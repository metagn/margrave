/* Generated by the Nim Compiler v2.2.6 */
var framePtr = null;
var excHandler = 0;
var lastJSError = null;
var NTI33555173 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI134217746 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI134217747 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI721420299 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI1023410572 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI1023410551 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI1023410561 = {size: 0, kind: 19, base: null, node: null, finalizer: null};
var NTI1040187396 = {size: 0, kind: 19, base: null, node: null, finalizer: null};
var NTI1291845635 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI1291845636 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI1291845637 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI1291845638 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI1291845639 = {size: 0, kind: 22, base: null, node: null, finalizer: null};
var NTI1258291208 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI1258291206 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI1258291203 = {size: 0, kind: 22, base: null, node: null, finalizer: null};
var NTI1258291257 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI1258291204 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI1275068945 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI1308622853 = {size: 0, kind: 19, base: null, node: null, finalizer: null};
var NTI1275068441 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI1275068440 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI1275068439 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI1275068438 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI1275068436 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI1275068431 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI1275068430 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI1275068429 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI1275068428 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI1275068427 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI1275068426 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI1275068425 = {size: 0, kind: 22, base: null, node: null, finalizer: null};
var NTI1308622852 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI1241513990 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI1241513996 = {size: 0, kind: 19, base: null, node: null, finalizer: null};
var NTI1241513989 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI1241513988 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI1241513987 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI1241513991 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI1023410261 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI738197551 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI33554444 = {size: 0,kind: 44,base: null,node: null,finalizer: null};
var NTI822083959 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI1191182342 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI1191182339 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI1023410227 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI1023410257 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI1023410269 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI1023410270 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI788529243 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI1023410179 = {size: 0,kind: 1,base: null,node: null,finalizer: null};
var NTI570426741 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI788529198 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI1023410560 = {size: 0, kind: 19, base: null, node: null, finalizer: null};
var NTI738197532 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI1040187400 = {size: 0, kind: 19, base: null, node: null, finalizer: null};
var NTI33554448 = {size: 0,kind: 2,base: null,node: null,finalizer: null};
var NTI1040187395 = {size: 0, kind: 19, base: null, node: null, finalizer: null};
var NTI33555167 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI33555175 = {size: 0, kind: 22, base: null, node: null, finalizer: null};
var NTI33554449 = {size: 0,kind: 28,base: null,node: null,finalizer: null};
var NTI33555174 = {size: 0, kind: 22, base: null, node: null, finalizer: null};
var NTI33555171 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI33555172 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI134217750 = {size: 0, kind: 17, base: null, node: null, finalizer: null};
var NTI1191182351 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI1191182363 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI1191182360 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI1191182357 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI788529173 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI822083587 = {size: 0,kind: 31,base: null,node: null,finalizer: null};
var NTI788529172 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI788529169 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI788529166 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI788529155 = {size: 0, kind: 14, base: null, node: null, finalizer: null};
var NTI788529158 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI788529156 = {size: 0, kind: 22, base: null, node: null, finalizer: null};
var NTI1191182347 = {size: 0, kind: 24, base: null, node: null, finalizer: null};
var NTI33554435 = {size: 0,kind: 31,base: null,node: null,finalizer: null};
var NTI33554450 = {size: 0,kind: 29,base: null,node: null,finalizer: null};
var NTI1191182346 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI1191182345 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI1191182343 = {size: 0,kind: 25,base: null,node: null,finalizer: null};
var NTI33554466 = {size: 0,kind: 1,base: null,node: null,finalizer: null};
var NTI1191182340 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NTI1191182341 = {size: 0, kind: 18, base: null, node: null, finalizer: null};
var NNI1191182340 = {kind: 2, len: 10, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "curlyNoHtmlEscape", len: 0, typ: NTI33554466, name: "curlyNoHtmlEscape", sons: null}, 
{kind: 1, offset: "insertLineBreaks", len: 0, typ: NTI33554466, name: "insertLineBreaks", sons: null}, 
{kind: 1, offset: "inlineHtmlHandler", len: 0, typ: NTI1191182343, name: "inlineHtmlHandler", sons: null}, 
{kind: 1, offset: "codeBlockLanguageHandler", len: 0, typ: NTI1191182345, name: "codeBlockLanguageHandler", sons: null}, 
{kind: 1, offset: "setLinkHandler", len: 0, typ: NTI1191182346, name: "setLinkHandler", sons: null}, 
{kind: 1, offset: "disableLineEscaping", len: 0, typ: NTI33554466, name: "disableLineEscaping", sons: null}, 
{kind: 1, offset: "disableTextAlignExtension", len: 0, typ: NTI33554466, name: "disableTextAlignExtension", sons: null}, 
{kind: 1, offset: "disableCurly", len: 0, typ: NTI33554466, name: "disableCurly", sons: null}, 
{kind: 1, offset: "disableRawCurly", len: 0, typ: NTI33554466, name: "disableRawCurly", sons: null}, 
{kind: 1, offset: "disableCodeFormat", len: 0, typ: NTI33554466, name: "disableCodeFormat", sons: null}]};
NTI1191182340.node = NNI1191182340;
var NNI788529155 = {kind: 2, offset: 0, typ: null, name: null, len: 29, sons: {"0": {kind: 1, offset: 0, typ: NTI788529155, name: "", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI788529155, name: "p", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI788529155, name: "br", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI788529155, name: "h1", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI788529155, name: "h2", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI788529155, name: "h3", len: 0, sons: null}, 
"6": {kind: 1, offset: 6, typ: NTI788529155, name: "h4", len: 0, sons: null}, 
"7": {kind: 1, offset: 7, typ: NTI788529155, name: "h5", len: 0, sons: null}, 
"8": {kind: 1, offset: 8, typ: NTI788529155, name: "h6", len: 0, sons: null}, 
"9": {kind: 1, offset: 9, typ: NTI788529155, name: "ul", len: 0, sons: null}, 
"10": {kind: 1, offset: 10, typ: NTI788529155, name: "ol", len: 0, sons: null}, 
"11": {kind: 1, offset: 11, typ: NTI788529155, name: "li", len: 0, sons: null}, 
"12": {kind: 1, offset: 12, typ: NTI788529155, name: "blockquote", len: 0, sons: null}, 
"13": {kind: 1, offset: 13, typ: NTI788529155, name: "sup", len: 0, sons: null}, 
"14": {kind: 1, offset: 14, typ: NTI788529155, name: "sub", len: 0, sons: null}, 
"15": {kind: 1, offset: 15, typ: NTI788529155, name: "em", len: 0, sons: null}, 
"16": {kind: 1, offset: 16, typ: NTI788529155, name: "strong", len: 0, sons: null}, 
"17": {kind: 1, offset: 17, typ: NTI788529155, name: "pre", len: 0, sons: null}, 
"18": {kind: 1, offset: 18, typ: NTI788529155, name: "code", len: 0, sons: null}, 
"19": {kind: 1, offset: 19, typ: NTI788529155, name: "u", len: 0, sons: null}, 
"20": {kind: 1, offset: 20, typ: NTI788529155, name: "s", len: 0, sons: null}, 
"21": {kind: 1, offset: 21, typ: NTI788529155, name: "img", len: 0, sons: null}, 
"22": {kind: 1, offset: 22, typ: NTI788529155, name: "input", len: 0, sons: null}, 
"23": {kind: 1, offset: 23, typ: NTI788529155, name: "a", len: 0, sons: null}, 
"24": {kind: 1, offset: 24, typ: NTI788529155, name: "picture", len: 0, sons: null}, 
"25": {kind: 1, offset: 25, typ: NTI788529155, name: "video", len: 0, sons: null}, 
"26": {kind: 1, offset: 26, typ: NTI788529155, name: "audio", len: 0, sons: null}, 
"27": {kind: 1, offset: 27, typ: NTI788529155, name: "source", len: 0, sons: null}, 
"28": {kind: 1, offset: 28, typ: NTI788529155, name: "unknownTag", len: 0, sons: null}}};
NTI788529155.node = NNI788529155;
var NNI788529172 = {kind: 2, len: 4, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI822083587, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI33554435, name: "Field1", sons: null}, 
{kind: 1, offset: "Field2", len: 0, typ: NTI33554450, name: "Field2", sons: null}, 
{kind: 1, offset: "Field3", len: 0, typ: NTI33554450, name: "Field3", sons: null}]};
NTI788529172.node = NNI788529172;
NTI788529169.base = NTI788529172;
var NNI788529166 = {kind: 2, len: 4, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "data", len: 0, typ: NTI788529169, name: "data", sons: null}, 
{kind: 1, offset: "counter", len: 0, typ: NTI33554435, name: "counter", sons: null}, 
{kind: 1, offset: "first", len: 0, typ: NTI33554435, name: "first", sons: null}, 
{kind: 1, offset: "last", len: 0, typ: NTI33554435, name: "last", sons: null}]};
NTI788529166.node = NNI788529166;
NTI788529173.base = NTI788529156;
var NNI788529158 = {kind: 3, offset: "isText", len: 2, typ: NTI33554466, name: "isText", sons: [[setConstr(1), {kind: 1, offset: "str", len: 0, typ: NTI33554450, name: "str", sons: null}], 
[setConstr(2), {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "tag", len: 0, typ: NTI788529155, name: "tag", sons: null}, 
{kind: 1, offset: "attrs", len: 0, typ: NTI788529166, name: "attrs", sons: null}, 
{kind: 1, offset: "content", len: 0, typ: NTI788529173, name: "content", sons: null}]}]]};
NTI788529158.node = NNI788529158;
NTI788529156.base = NTI788529158;
NTI1191182347.base = NTI788529156;
NTI1191182351.base = NTI788529156;
var NNI1191182363 = {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI822083587, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI33554450, name: "Field1", sons: null}, 
{kind: 1, offset: "Field2", len: 0, typ: NTI1191182351, name: "Field2", sons: null}]};
NTI1191182363.node = NNI1191182363;
NTI1191182360.base = NTI1191182363;
var NNI1191182357 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "data", len: 0, typ: NTI1191182360, name: "data", sons: null}, 
{kind: 1, offset: "counter", len: 0, typ: NTI33554435, name: "counter", sons: null}]};
NTI1191182357.node = NNI1191182357;
var NNI1191182341 = {kind: 2, len: 5, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "options", len: 0, typ: NTI1191182340, name: "options", sons: null}, 
{kind: 1, offset: "str", len: 0, typ: NTI33554450, name: "str", sons: null}, 
{kind: 1, offset: "pos", len: 0, typ: NTI33554435, name: "pos", sons: null}, 
{kind: 1, offset: "contextStack", len: 0, typ: NTI1191182347, name: "contextStack", sons: null}, 
{kind: 1, offset: "linkReferrers", len: 0, typ: NTI1191182357, name: "linkReferrers", sons: null}]};
NTI1191182341.node = NNI1191182341;
var NNI134217750 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI134217750.node = NNI134217750;
var NNI33555172 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI33555172.node = NNI33555172;
NTI33555174.base = NTI33555171;
NTI33555175.base = NTI33555171;
var NNI33555171 = {kind: 2, len: 5, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "parent", len: 0, typ: NTI33555174, name: "parent", sons: null}, 
{kind: 1, offset: "name", len: 0, typ: NTI33554450, name: "name", sons: null}, 
{kind: 1, offset: "message", len: 0, typ: NTI33554449, name: "msg", sons: null}, 
{kind: 1, offset: "trace", len: 0, typ: NTI33554449, name: "trace", sons: null}, 
{kind: 1, offset: "up", len: 0, typ: NTI33555175, name: "up", sons: null}]};
NTI33555171.node = NNI33555171;
var NNI33555167 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI33555167.node = NNI33555167;
NTI33555171.base = NTI33555167;
NTI33555172.base = NTI33555171;
NTI134217750.base = NTI33555172;
NTI1040187395.base = NTI33554448;
NTI1040187400.base = NTI33554448;
var NNI738197532 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "a", len: 0, typ: NTI33554435, name: "a", sons: null}, 
{kind: 1, offset: "b", len: 0, typ: NTI33554435, name: "b", sons: null}]};
NTI738197532.node = NNI738197532;
NTI1023410560.base = NTI788529155;
NTI788529198.base = NTI788529156;
NTI788529243.base = NTI788529156;
var NNI570426741 = {kind: 2, len: 4, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "singleLine0", len: 0, typ: NTI1023410179, name: "singleLine0", sons: null}, 
{kind: 1, offset: "elems1", len: 0, typ: NTI788529243, name: "elems1", sons: null}, 
{kind: 1, offset: "lastStr2", len: 0, typ: NTI788529156, name: "lastStr2", sons: null}, 
{kind: 1, offset: "initialPos3", len: 0, typ: NTI33554435, name: "initialPos3", sons: null}]};
NTI570426741.node = NNI570426741;
NTI570426741.base = NTI33555167;
NTI1023410270.base = NTI788529156;
var NNI1023410257 = {kind: 2, offset: 0, typ: null, name: null, len: 3, sons: {"0": {kind: 1, offset: 0, typ: NTI1023410257, name: "frDone", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI1023410257, name: "frReachedEnd", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI1023410257, name: "frFailed", len: 0, sons: null}}};
NTI1023410257.node = NNI1023410257;
var NNI1023410269 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI1023410257, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI1023410270, name: "Field1", sons: null}]};
NTI1023410269.node = NNI1023410269;
var NNI1023410227 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI33554450, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI33554450, name: "Field1", sons: null}]};
NTI1023410227.node = NNI1023410227;
NTI1191182342.base = NTI33554450;
var NNI1191182339 = {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "url", len: 0, typ: NTI33554450, name: "url", sons: null}, 
{kind: 1, offset: "tip", len: 0, typ: NTI33554450, name: "tip", sons: null}, 
{kind: 1, offset: "altUrls", len: 0, typ: NTI1191182342, name: "altUrls", sons: null}]};
NTI1191182339.node = NNI1191182339;
var NNI822083959 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI33554444, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI33554444, name: "Field1", sons: null}]};
NTI822083959.node = NNI822083959;
var NNI738197551 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "a", len: 0, typ: NTI33554435, name: "a", sons: null}, 
{kind: 1, offset: "b", len: 0, typ: NTI33554435, name: "b", sons: null}]};
NTI738197551.node = NNI738197551;
var NNI1023410261 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI1023410257, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI788529156, name: "Field1", sons: null}]};
NTI1023410261.node = NNI1023410261;
var NNI1241513987 = {kind: 2, offset: 0, typ: null, name: null, len: 14, sons: {"0": {kind: 1, offset: 0, typ: NTI1241513987, name: "xmlError", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI1241513987, name: "xmlEof", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI1241513987, name: "xmlCharData", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI1241513987, name: "xmlWhitespace", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI1241513987, name: "xmlComment", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI1241513987, name: "xmlPI", len: 0, sons: null}, 
"6": {kind: 1, offset: 6, typ: NTI1241513987, name: "xmlElementStart", len: 0, sons: null}, 
"7": {kind: 1, offset: 7, typ: NTI1241513987, name: "xmlElementEnd", len: 0, sons: null}, 
"8": {kind: 1, offset: 8, typ: NTI1241513987, name: "xmlElementOpen", len: 0, sons: null}, 
"9": {kind: 1, offset: 9, typ: NTI1241513987, name: "xmlAttribute", len: 0, sons: null}, 
"10": {kind: 1, offset: 10, typ: NTI1241513987, name: "xmlElementClose", len: 0, sons: null}, 
"11": {kind: 1, offset: 11, typ: NTI1241513987, name: "xmlCData", len: 0, sons: null}, 
"12": {kind: 1, offset: 12, typ: NTI1241513987, name: "xmlEntity", len: 0, sons: null}, 
"13": {kind: 1, offset: 13, typ: NTI1241513987, name: "xmlSpecial", len: 0, sons: null}}};
NTI1241513987.node = NNI1241513987;
var NNI1241513988 = {kind: 2, offset: 0, typ: null, name: null, len: 10, sons: {"0": {kind: 1, offset: 0, typ: NTI1241513988, name: "errNone", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI1241513988, name: "errEndOfCDataExpected", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI1241513988, name: "errNameExpected", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI1241513988, name: "errSemicolonExpected", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI1241513988, name: "errQmGtExpected", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI1241513988, name: "errGtExpected", len: 0, sons: null}, 
"6": {kind: 1, offset: 6, typ: NTI1241513988, name: "errEqExpected", len: 0, sons: null}, 
"7": {kind: 1, offset: 7, typ: NTI1241513988, name: "errQuoteExpected", len: 0, sons: null}, 
"8": {kind: 1, offset: 8, typ: NTI1241513988, name: "errEndOfCommentExpected", len: 0, sons: null}, 
"9": {kind: 1, offset: 9, typ: NTI1241513988, name: "errAttributeValueExpected", len: 0, sons: null}}};
NTI1241513988.node = NNI1241513988;
var NNI1241513989 = {kind: 2, offset: 0, typ: null, name: null, len: 5, sons: {"0": {kind: 1, offset: 0, typ: NTI1241513989, name: "stateStart", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI1241513989, name: "stateNormal", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI1241513989, name: "stateAttr", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI1241513989, name: "stateEmptyElementTag", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI1241513989, name: "stateError", len: 0, sons: null}}};
NTI1241513989.node = NNI1241513989;
var NNI1241513990 = {kind: 2, offset: 0, typ: null, name: null, len: 4, sons: {"0": {kind: 1, offset: 0, typ: NTI1241513990, name: "reportWhitespace", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI1241513990, name: "reportComments", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI1241513990, name: "allowUnquotedAttribs", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI1241513990, name: "allowEmptyAttribs", len: 0, sons: null}}};
NTI1241513990.node = NNI1241513990;
NTI1241513996.base = NTI1241513990;
var NNI1241513991 = {kind: 2, len: 9, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "a", len: 0, typ: NTI33554449, name: "a", sons: null}, 
{kind: 1, offset: "b", len: 0, typ: NTI33554449, name: "b", sons: null}, 
{kind: 1, offset: "c", len: 0, typ: NTI33554449, name: "c", sons: null}, 
{kind: 1, offset: "kind", len: 0, typ: NTI1241513987, name: "kind", sons: null}, 
{kind: 1, offset: "err", len: 0, typ: NTI1241513988, name: "err", sons: null}, 
{kind: 1, offset: "state", len: 0, typ: NTI1241513989, name: "state", sons: null}, 
{kind: 1, offset: "cIsEmpty", len: 0, typ: NTI33554466, name: "cIsEmpty", sons: null}, 
{kind: 1, offset: "filename", len: 0, typ: NTI33554449, name: "filename", sons: null}, 
{kind: 1, offset: "options", len: 0, typ: NTI1241513996, name: "options", sons: null}]};
NTI1241513991.node = NNI1241513991;
var NNI1275068426 = {kind: 2, len: 10, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "closeImpl", len: 0, typ: NTI1275068427, name: "closeImpl", sons: null}, 
{kind: 1, offset: "atEndImpl", len: 0, typ: NTI1275068428, name: "atEndImpl", sons: null}, 
{kind: 1, offset: "setPositionImpl", len: 0, typ: NTI1275068429, name: "setPositionImpl", sons: null}, 
{kind: 1, offset: "getPositionImpl", len: 0, typ: NTI1275068430, name: "getPositionImpl", sons: null}, 
{kind: 1, offset: "readDataStrImpl", len: 0, typ: NTI1275068431, name: "readDataStrImpl", sons: null}, 
{kind: 1, offset: "readLineImpl", len: 0, typ: NTI1275068436, name: "readLineImpl", sons: null}, 
{kind: 1, offset: "readDataImpl", len: 0, typ: NTI1275068438, name: "readDataImpl", sons: null}, 
{kind: 1, offset: "peekDataImpl", len: 0, typ: NTI1275068439, name: "peekDataImpl", sons: null}, 
{kind: 1, offset: "writeDataImpl", len: 0, typ: NTI1275068440, name: "writeDataImpl", sons: null}, 
{kind: 1, offset: "flushImpl", len: 0, typ: NTI1275068441, name: "flushImpl", sons: null}]};
NTI1275068426.node = NNI1275068426;
NTI1275068426.base = NTI33555167;
NTI1275068425.base = NTI1275068426;
NTI1308622853.base = NTI33554448;
var NNI1308622852 = {kind: 2, len: 8, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "bufpos", len: 0, typ: NTI33554435, name: "bufpos", sons: null}, 
{kind: 1, offset: "buf", len: 0, typ: NTI33554449, name: "buf", sons: null}, 
{kind: 1, offset: "input", len: 0, typ: NTI1275068425, name: "input", sons: null}, 
{kind: 1, offset: "lineNumber", len: 0, typ: NTI33554435, name: "lineNumber", sons: null}, 
{kind: 1, offset: "sentinel", len: 0, typ: NTI33554435, name: "sentinel", sons: null}, 
{kind: 1, offset: "lineStart", len: 0, typ: NTI33554435, name: "lineStart", sons: null}, 
{kind: 1, offset: "offsetBase", len: 0, typ: NTI33554435, name: "offsetBase", sons: null}, 
{kind: 1, offset: "refillChars", len: 0, typ: NTI1308622853, name: "refillChars", sons: null}]};
NTI1308622852.node = NNI1308622852;
NTI1308622852.base = NTI33555167;
NTI1241513991.base = NTI1308622852;
var NNI1275068945 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "data", len: 0, typ: NTI33554449, name: "data", sons: null}, 
{kind: 1, offset: "pos", len: 0, typ: NTI33554435, name: "pos", sons: null}]};
NTI1275068945.node = NNI1275068945;
NTI1275068945.base = NTI1275068426;
var NNI1258291204 = {kind: 2, offset: 0, typ: null, name: null, len: 6, sons: {"0": {kind: 1, offset: 0, typ: NTI1258291204, name: "xnText", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI1258291204, name: "xnVerbatimText", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI1258291204, name: "xnElement", len: 0, sons: null}, 
"3": {kind: 1, offset: 3, typ: NTI1258291204, name: "xnCData", len: 0, sons: null}, 
"4": {kind: 1, offset: 4, typ: NTI1258291204, name: "xnEntity", len: 0, sons: null}, 
"5": {kind: 1, offset: 5, typ: NTI1258291204, name: "xnComment", len: 0, sons: null}}};
NTI1258291204.node = NNI1258291204;
NTI1258291208.base = NTI1258291203;
var NNI1291845636 = {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "Field0", len: 0, typ: NTI33554449, name: "Field0", sons: null}, 
{kind: 1, offset: "Field1", len: 0, typ: NTI33554449, name: "Field1", sons: null}, 
{kind: 1, offset: "Field2", len: 0, typ: NTI33554466, name: "Field2", sons: null}]};
NTI1291845636.node = NNI1291845636;
NTI1291845637.base = NTI1291845636;
var NNI1291845635 = {kind: 2, offset: 0, typ: null, name: null, len: 3, sons: {"0": {kind: 1, offset: 0, typ: NTI1291845635, name: "modeCaseSensitive", len: 0, sons: null}, 
"1": {kind: 1, offset: 1, typ: NTI1291845635, name: "modeCaseInsensitive", len: 0, sons: null}, 
"2": {kind: 1, offset: 2, typ: NTI1291845635, name: "modeStyleInsensitive", len: 0, sons: null}}};
NTI1291845635.node = NNI1291845635;
var NNI1291845638 = {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "counter", len: 0, typ: NTI33554435, name: "counter", sons: null}, 
{kind: 1, offset: "data", len: 0, typ: NTI1291845637, name: "data", sons: null}, 
{kind: 1, offset: "mode", len: 0, typ: NTI1291845635, name: "mode", sons: null}]};
NTI1291845638.node = NNI1291845638;
NTI1291845638.base = NTI33555167;
NTI1291845639.base = NTI1291845638;
var NNI1258291206 = {kind: 2, len: 2, offset: 0, typ: null, name: null, sons: [{kind: 3, offset: "k", len: 6, typ: NTI1258291204, name: "k", sons: [[setConstr(0, 1, 5, 3, 4), {kind: 1, offset: "fText", len: 0, typ: NTI33554449, name: "fText", sons: null}], 
[setConstr(2), {kind: 2, len: 3, offset: 0, typ: null, name: null, sons: [{kind: 1, offset: "fTag", len: 0, typ: NTI33554449, name: "fTag", sons: null}, 
{kind: 1, offset: "s", len: 0, typ: NTI1258291208, name: "s", sons: null}, 
{kind: 1, offset: "fAttr", len: 0, typ: NTI1291845639, name: "fAttr", sons: null}]}]]}, 
{kind: 1, offset: "fClientData", len: 0, typ: NTI33554435, name: "fClientData", sons: null}]};
NTI1258291206.node = NNI1258291206;
NTI1258291203.base = NTI1258291206;
NTI1258291257.base = NTI1258291203;
NTI1040187396.base = NTI33554448;
NTI1023410561.base = NTI33554448;
NTI1023410551.base = NTI788529156;
NTI1023410572.base = NTI788529156;
NTI721420299.base = NTI788529156;
var NNI134217747 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI134217747.node = NNI134217747;
var NNI134217746 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI134217746.node = NNI134217746;
var NNI33555173 = {kind: 2, len: 0, offset: 0, typ: null, name: null, sons: []};
NTI33555173.node = NNI33555173;
NTI33555173.base = NTI33555171;
NTI134217746.base = NTI33555173;
NTI134217747.base = NTI134217746;

function setConstr() {
        var result = {};
    for (var i = 0; i < arguments.length; ++i) {
      var x = arguments[i];
      if (typeof(x) == "object") {
        for (var j = x[0]; j <= x[1]; ++j) {
          result[j] = true;
        }
      } else {
        result[x] = true;
      }
    }
    return result;
  

  
}
var ConstSet1 = setConstr(17, 16, 4, 18, 27, 19, 23, 22, 21);

function nimCopy(dest_p0, src_p1, ti_p2) {
  var result_33557352 = null;

    switch (ti_p2.kind) {
    case 21:
    case 22:
    case 23:
    case 5:
      if (!(isFatPointer__system_u2900(ti_p2))) {
      result_33557352 = src_p1;
      }
      else {
        result_33557352 = [src_p1[0], src_p1[1]];
      }
      
      break;
    case 19:
            if (dest_p0 === null || dest_p0 === undefined) {
        dest_p0 = {};
      }
      else {
        for (var key in dest_p0) { delete dest_p0[key]; }
      }
      for (var key in src_p1) { dest_p0[key] = src_p1[key]; }
      result_33557352 = dest_p0;
    
      break;
    case 18:
    case 17:
      if (!((ti_p2.base == null))) {
      result_33557352 = nimCopy(dest_p0, src_p1, ti_p2.base);
      }
      else {
      if ((ti_p2.kind == 17)) {
      result_33557352 = (dest_p0 === null || dest_p0 === undefined) ? {m_type: ti_p2} : dest_p0;
      }
      else {
        result_33557352 = (dest_p0 === null || dest_p0 === undefined) ? {} : dest_p0;
      }
      }
      nimCopyAux(result_33557352, src_p1, ti_p2.node);
      break;
    case 4:
    case 16:
            if(ArrayBuffer.isView(src_p1)) { 
        if(dest_p0 === null || dest_p0 === undefined || dest_p0.length != src_p1.length) {
          dest_p0 = new src_p1.constructor(src_p1);
        } else {
          dest_p0.set(src_p1, 0);
        }
        result_33557352 = dest_p0;
      } else {
        if (src_p1 === null) {
          result_33557352 = null;
        }
        else {
          if (dest_p0 === null || dest_p0 === undefined || dest_p0.length != src_p1.length) {
            dest_p0 = new Array(src_p1.length);
          }
          result_33557352 = dest_p0;
          for (var i = 0; i < src_p1.length; ++i) {
            result_33557352[i] = nimCopy(result_33557352[i], src_p1[i], ti_p2.base);
          }
        }
      }
    
      break;
    case 24:
    case 27:
            if (src_p1 === null) {
        result_33557352 = null;
      }
      else {
        if (dest_p0 === null || dest_p0 === undefined || dest_p0.length != src_p1.length) {
          dest_p0 = new Array(src_p1.length);
        }
        result_33557352 = dest_p0;
        for (var i = 0; i < src_p1.length; ++i) {
          result_33557352[i] = nimCopy(result_33557352[i], src_p1[i], ti_p2.base);
        }
      }
    
      break;
    case 28:
            if (src_p1 !== null) {
        result_33557352 = src_p1.slice(0);
      }
    
      break;
    default: 
      result_33557352 = src_p1;
      break;
    }

  return result_33557352;

}
var ConstSet2 = setConstr(true);

function isObj(obj_p0, subclass_p1) {
  var result_33557465 = false;

  BeforeRet: {
    var x_33557466 = obj_p0;
    if ((x_33557466 == subclass_p1)) {
    result_33557465 = true;
    break BeforeRet;
    }
    
    Label1: {
        Label2: while (true) {
        if (!!((x_33557466 == subclass_p1))) break Label2;
          if ((x_33557466 == null)) {
          result_33557465 = false;
          break BeforeRet;
          }
          
          x_33557466 = x_33557466.base;
        }
    };
    result_33557465 = true;
    break BeforeRet;
  };

  return result_33557465;

}

function toJSStr(s_p0) {
  var result_33556941 = null;

    var res_33556995 = newSeq__system_u2538((s_p0).length);
    var i_33556996 = 0;
    var j_33556997 = 0;
    Label1: {
        Label2: while (true) {
        if (!(i_33556996 < (s_p0).length)) break Label2;
          var c_33556998 = s_p0[i_33556996];
          if ((c_33556998 < 128)) {
          res_33556995[j_33556997] = String.fromCharCode(c_33556998);
          i_33556996 += 1;
          }
          else {
            var helper_33557024 = newSeq__system_u2538(0);
            Label3: {
                Label4: while (true) {
                if (!true) break Label4;
                  var code_33557025 = c_33556998.toString(16);
                  if ((((code_33557025) == null ? 0 : (code_33557025).length) == 1)) {
                  helper_33557024.push("%0");;
                  }
                  else {
                  helper_33557024.push("%");;
                  }
                  
                  helper_33557024.push(code_33557025);;
                  i_33556996 += 1;
                  if ((((s_p0).length <= i_33556996) || (s_p0[i_33556996] < 128))) {
                  break Label3;
                  }
                  
                  c_33556998 = s_p0[i_33556996];
                }
            };
++excHandler;
            try {
            res_33556995[j_33556997] = decodeURIComponent(helper_33557024.join(""));
--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
            raiseDefect();
            res_33556995[j_33556997] = helper_33557024.join("");
            lastJSError = prevJSError;
            } finally {
            }
          }
          
          j_33556997 += 1;
        }
    };
    if (res_33556995.length < j_33556997) { for (var i = res_33556995.length ; i < j_33556997 ; ++i) res_33556995.push(null); }
               else { res_33556995.length = j_33556997; };
    result_33556941 = res_33556995.join("");

  return result_33556941;

}

function raiseException(e_p0, ename_p1) {
    e_p0.name = ename_p1;
    if ((excHandler == 0)) {
    unhandledException(e_p0);
    }
    
    throw e_p0;

  
}

function raiseFieldError2(f_p0, discVal_p1) {
    raiseException({message: (f_p0).concat(discVal_p1,[39]), parent: null, m_type: NTI134217750, name: null, trace: [], up: null}, "FieldDefect");

  
}

function makeNimstrLit(c_p0) {
      var result = [];
  for (var i = 0; i < c_p0.length; ++i) {
    result[i] = c_p0.charCodeAt(i);
  }
  return result;
  

  
}

function mnewString(len_p0) {
        var result = new Array(len_p0);
    for (var i = 0; i < len_p0; i++) {result[i] = 0;}
    return result;
  

  
}

function nimBoolToStr(x_p0) {
  var result_33556465 = [];

    if (x_p0) {
    result_33556465 = nimCopy(null, [116,114,117,101], NTI33554449);
    }
    else {
      result_33556465 = nimCopy(null, [102,97,108,115,101], NTI33554449);
    }
    

  return result_33556465;

}

function reprDiscriminant(e_p0, typ_p1) {
    var Temporary1;

  var result_33557695 = [];

    switch (typ_p1.kind) {
    case 14:
      Temporary1 = reprEnum(e_p0, typ_p1);
      break;
    case 1:
      Temporary1 = nimBoolToStr(!((e_p0 == 0)));
      break;
    default: 
      Temporary1 = HEX24__systemZdollars_u14(e_p0);
      break;
    }
    result_33557695 = nimCopy(null, Temporary1, NTI33554449);

  return result_33557695;

}
var ConstSet3 = setConstr(42, 45, 43);
var ConstSet4 = setConstr(9, [11, 12], 32);
                              var InlineWhitespace_1023410385 = nimCopy(null, ConstSet4, NTI1040187395);
var ConstSet5 = setConstr([48, 57]);
                              var Digits_1040187411 = nimCopy(null, ConstSet5, NTI1040187400);
var ConstSet6 = setConstr(true);
var ConstSet7 = setConstr(true);
var ConstSet8 = setConstr(9, 10, 12);
                    var SpecialLineTags_1023410378 = nimCopy(null, ConstSet8, NTI1023410560);
var ConstSet9 = setConstr(true);
var ConstSet10 = setConstr(true);
var ConstSet11 = setConstr(true);
var ConstSet12 = setConstr(true);
var ConstSet13 = setConstr(true);
var ConstSet14 = setConstr(32);
var ConstSet15 = setConstr(13, 10);
var ConstSet16 = setConstr(true);
var ConstSet17 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet18 = setConstr(32, 9, 11, 13, 10, 12);
var ConstSet19 = setConstr(true);
var ConstSet20 = setConstr(true);
var ConstSet21 = setConstr(32, 9, 11, 13, 10, 12);
                  var Whitespace_1040187406 = nimCopy(null, ConstSet21, NTI1040187395);
var ConstSet22 = setConstr(true);
var ConstSet23 = setConstr([97, 122], [65, 90], [48, 57], 45, 95, 58, 46);
var ConstSet24 = setConstr(true);
var ConstSet25 = setConstr(0);
var ConstSet26 = setConstr(2, 1);
var ConstSet27 = setConstr(0);
var ConstSet28 = setConstr(2, 1);
var ConstSet29 = setConstr(0);
var ConstSet30 = setConstr(2, 1);
var ConstSet31 = setConstr(0);
var ConstSet32 = setConstr(2, 1);
var ConstSet33 = setConstr(true);
var ConstSet34 = setConstr(true);
var ConstSet35 = setConstr(9, [11, 13], 32);
var ConstSet36 = setConstr(true);

function cstrToNimstr(c_p0) {
      var ln = c_p0.length;
  var result = new Array(ln);
  var r = 0;
  for (var i = 0; i < ln; ++i) {
    var ch = c_p0.charCodeAt(i);

    if (ch < 128) {
      result[r] = ch;
    }
    else {
      if (ch < 2048) {
        result[r] = (ch >> 6) | 192;
      }
      else {
        if (ch < 55296 || ch >= 57344) {
          result[r] = (ch >> 12) | 224;
        }
        else {
            ++i;
            ch = 65536 + (((ch & 1023) << 10) | (c_p0.charCodeAt(i) & 1023));
            result[r] = (ch >> 18) | 240;
            ++r;
            result[r] = ((ch >> 12) & 63) | 128;
        }
        ++r;
        result[r] = ((ch >> 6) & 63) | 128;
      }
      ++r;
      result[r] = (ch & 63) | 128;
    }
    ++r;
  }
  return result;
  

  
}
var ConstSet37 = setConstr(true);
var ConstSet38 = setConstr(true);
var ConstSet39 = setConstr(true);
var ConstSet40 = setConstr(true);
var ConstSet41 = setConstr(true);
var ConstSet42 = setConstr(true);
var ConstSet43 = setConstr(true);
var ConstSet44 = setConstr(true);
var ConstSet45 = setConstr(true);
var ConstSet46 = setConstr(true);
var ConstSet47 = setConstr(true);
var ConstSet48 = setConstr(true);
var ConstSet49 = setConstr(true);
var ConstSet50 = setConstr(true);
var ConstSet51 = setConstr(true);
var ConstSet52 = setConstr(true);
var ConstSet53 = setConstr(true);
var ConstSet54 = setConstr(true);
var ConstSet55 = setConstr(true);
var ConstSet56 = setConstr(true);
var ConstSet57 = setConstr(true);
var ConstSet58 = setConstr(true);
var ConstSet59 = setConstr(2, 1);
var ConstSet60 = setConstr(true);
var ConstSet61 = setConstr(true);
var ConstSet62 = setConstr(2, 1);
var ConstSet63 = setConstr(true);
var ConstSet64 = setConstr(0);
var ConstSet65 = setConstr(2, 1);
var ConstSet66 = setConstr(true);
var ConstSet67 = setConstr(0);
var ConstSet68 = setConstr(2, 1);
var ConstSet69 = setConstr(0, 1);
var ConstSet70 = setConstr(2, 1);
var ConstSet71 = setConstr(0);
var ConstSet72 = setConstr(2, 1);
var ConstSet73 = setConstr(0);
var ConstSet74 = setConstr(2, 1);

function nimMin(a_p0, b_p1) {
    var Temporary1;

  var result_33557175 = 0;

  BeforeRet: {
    if ((a_p0 <= b_p1)) {
    Temporary1 = a_p0;
    }
    else {
    Temporary1 = b_p1;
    }
    
    result_33557175 = Temporary1;
    break BeforeRet;
  };

  return result_33557175;

}

function nimMax(a_p0, b_p1) {
    var Temporary1;

  var result_33557179 = 0;

  BeforeRet: {
    if ((b_p1 <= a_p0)) {
    Temporary1 = a_p0;
    }
    else {
    Temporary1 = b_p1;
    }
    
    result_33557179 = Temporary1;
    break BeforeRet;
  };

  return result_33557179;

}
var ConstSet75 = setConstr(13, 10, 47);
var ConstSet76 = setConstr(2, 1);
var ConstSet77 = setConstr([65, 90], [97, 122], 95, 58, [128, 255]);

function addChar(x_p0, c_p1) {
    x_p0.push(c_p1);

  
}
var ConstSet78 = setConstr([65, 90], [97, 122], [48, 57], 46, 45, 95, 58, [128, 255]);
var ConstSet79 = setConstr([65, 90], [97, 122], 95, 58, [128, 255]);
var ConstSet80 = setConstr([48, 57]);
var ConstSet81 = setConstr(2, 4, 12);

function eqStrings(a_p0, b_p1) {
        if (a_p0 == b_p1) return true;
    if (a_p0 === null && b_p1.length == 0) return true;
    if (b_p1 === null && a_p0.length == 0) return true;
    if ((!a_p0) || (!b_p1)) return false;
    var alen = a_p0.length;
    if (alen != b_p1.length) return false;
    for (var i = 0; i < alen; ++i)
      if (a_p0[i] != b_p1[i]) return false;
    return true;
  

  
}
var ConstSet82 = setConstr(39, 34);
var ConstSet83 = setConstr(34, 39, 96, 61, 60, 62, 32, 0, 9, 10, 12, 12);
var ConstSet84 = setConstr(2);
var ConstSet85 = setConstr(2);
var ConstSet86 = setConstr(2);
var ConstSet87 = setConstr(2);
var ConstSet88 = setConstr(0, 1, 5, 3, 4);
var ConstSet89 = setConstr(0, 1, 5, 3, 4);
var ConstSet90 = setConstr(2);
var ConstSet91 = setConstr([65, 90]);
var ConstSet92 = setConstr([65, 90]);
var ConstSet93 = setConstr([65, 90]);
var ConstSet94 = setConstr(2);
var ConstSet95 = setConstr(0, 1, 5, 3, 4);
var ConstSet96 = setConstr(0, 1, 5, 3, 4);
var ConstSet97 = setConstr(true);
var ConstSet98 = setConstr(true);
var ConstSet99 = setConstr(true);
var ConstSet100 = setConstr(true);
var ConstSet101 = setConstr([65, 90], [97, 122]);
                var Letters_1040187407 = nimCopy(null, ConstSet101, NTI1040187396);
var ConstSet102 = setConstr(true);
var ConstSet103 = setConstr(92, 60, 62, 38, 42, 95, 94, 96, 91, 93, 123, 125, 126, 33);
var ConstSet104 = setConstr(13, 10);
var ConstSet105 = setConstr(true);
var ConstSet106 = setConstr(true);
var ConstSet107 = setConstr(true);
var ConstSet108 = setConstr(true);
var ConstSet109 = setConstr(true);
var ConstSet110 = setConstr(12, 1);
var ConstSet111 = setConstr(true);
var ConstSet112 = setConstr(true);
var ConstSet113 = setConstr(40, 91, 123, 58);
                  var IdStarts_1023410379 = nimCopy(null, ConstSet113, NTI1023410561);
var ConstSet114 = setConstr([97, 122], [65, 90], [48, 57], 45, 95, 58, 46);
var ConstSet115 = setConstr(true);
var ConstSet116 = setConstr(true);
var ConstSet117 = setConstr(true);
var ConstSet118 = setConstr(true);
      var defaultParserOptions_1191182377 = {curlyNoHtmlEscape: false, insertLineBreaks: false, inlineHtmlHandler: null, codeBlockLanguageHandler: null, setLinkHandler: null, disableLineEscaping: false, disableTextAlignExtension: false, disableCurly: false, disableRawCurly: false, disableCodeFormat: false};
var ConstSet119 = setConstr(true);
var ConstSet120 = setConstr(true);
var ConstSet121 = setConstr(true);
var ConstSet122 = setConstr(true);
var ConstSet123 = setConstr(true);
var ConstSet124 = setConstr(true);
var ConstSet125 = setConstr(true);
var ConstSet126 = setConstr(true);
var objectID_822083762 = [0];

function input__converter_u1946() {
  var result_570427291 = null;

    result_570427291 = document.getElementById("input").value;

  return result_570427291;

}

function isFatPointer__system_u2900(ti_p0) {
  var result_33557334 = false;

  BeforeRet: {
    result_33557334 = !((ConstSet1[ti_p0.base.kind] != undefined));
    break BeforeRet;
  };

  return result_33557334;

}

function nimCopyAux(dest_p0, src_p1, n_p2) {
    switch (n_p2.kind) {
    case 0:
      break;
    case 1:
            dest_p0[n_p2.offset] = nimCopy(dest_p0[n_p2.offset], src_p1[n_p2.offset], n_p2.typ);
    
      break;
    case 2:
          for (var i = 0; i < n_p2.sons.length; i++) {
      nimCopyAux(dest_p0, src_p1, n_p2.sons[i]);
    }
    
      break;
    case 3:
            dest_p0[n_p2.offset] = nimCopy(dest_p0[n_p2.offset], src_p1[n_p2.offset], n_p2.typ);
      for (var i = 0; i < n_p2.sons.length; ++i) {
        nimCopyAux(dest_p0, src_p1, n_p2.sons[i][1]);
      }
    
      break;
    }

  
}

function initMargraveParser__OOZsrcZmargraveZparserZdefs_u42(text_p0) {
  var result_1191182380 = ({options: ({curlyNoHtmlEscape: false, insertLineBreaks: false, inlineHtmlHandler: null, codeBlockLanguageHandler: null, setLinkHandler: null, disableLineEscaping: false, disableTextAlignExtension: false, disableCurly: false, disableRawCurly: false, disableCodeFormat: false}), str: null, pos: 0, contextStack: [], linkReferrers: ({data: [], counter: 0})});

    result_1191182380 = nimCopy(result_1191182380, {str: text_p0, pos: 0, options: ({curlyNoHtmlEscape: false, insertLineBreaks: false, inlineHtmlHandler: null, codeBlockLanguageHandler: null, setLinkHandler: null, disableLineEscaping: false, disableTextAlignExtension: false, disableCurly: false, disableRawCurly: false, disableCodeFormat: false}), contextStack: [], linkReferrers: ({data: [], counter: 0})}, NTI1191182341);

  return result_1191182380;

}

function add__system_u1954(x_p0, x_p0_Idx, y_p1) {
          if (x_p0[x_p0_Idx] === null) { x_p0[x_p0_Idx] = []; }
      var off = x_p0[x_p0_Idx].length;
      x_p0[x_p0_Idx].length += y_p1.length;
      for (var i = 0; i < y_p1.length; ++i) {
        x_p0[x_p0_Idx][off+i] = y_p1.charCodeAt(i);
      }
    

  
}

function newSeq__system_u2538(len_p0) {
  var result_33556974 = [];

    result_33556974 = new Array(len_p0); for (var i = 0 ; i < len_p0 ; ++i) { result_33556974[i] = null; }
  return result_33556974;

}

function isNimException__system_u2037() {
    return lastJSError && lastJSError.m_type;

  
}

function getCurrentException() {
  var result_33556472 = null;

    if (isNimException__system_u2037()) {
    result_33556472 = lastJSError;
    }
    

  return result_33556472;

}

function raiseDefect() {
    if (isNimException__system_u2037()) {
    var e_33556686 = getCurrentException();
    if (isObj(e_33556686.m_type, NTI33555172)) {
    if ((excHandler == 0)) {
    unhandledException(e_33556686);
    }
    
    throw e_33556686;
    }
    
    }
    

  
}

function unhandledException(e_p0) {
    var buf_33556680 = [[]];
    if (!(((e_p0.message).length == 0))) {
    buf_33556680[0].push.apply(buf_33556680[0], [69,114,114,111,114,58,32,117,110,104,97,110,100,108,101,100,32,101,120,99,101,112,116,105,111,110,58,32]);;
    buf_33556680[0].push.apply(buf_33556680[0], e_p0.message);;
    }
    else {
    buf_33556680[0].push.apply(buf_33556680[0], [69,114,114,111,114,58,32,117,110,104,97,110,100,108,101,100,32,101,120,99,101,112,116,105,111,110]);;
    }
    
    buf_33556680[0].push.apply(buf_33556680[0], [32,91]);;
    add__system_u1954(buf_33556680, 0, e_p0.name);
    buf_33556680[0].push.apply(buf_33556680[0], [93,10]);;
    var cbuf_33556681 = toJSStr(buf_33556680[0]);
      if (typeof(Error) !== "undefined") {
    throw new Error(cbuf_33556681);
  }
  else {
    throw cbuf_33556681;
  }
  

  
}

function addChars__stdZprivateZdigitsutils_u202(result_p0, result_p0_Idx, x_p1, start_p2, n_p3) {
    var Temporary1;

    var old_318767312 = (result_p0[result_p0_Idx]).length;
    if (result_p0[result_p0_Idx].length < (Temporary1 = (old_318767312 + n_p3), Temporary1)) { for (var i = result_p0[result_p0_Idx].length; i < Temporary1; ++i) result_p0[result_p0_Idx].push(0); }
         else {result_p0[result_p0_Idx].length = Temporary1; };
    Label2: {
      var iHEX60gensym4_318767326 = 0;
      var i_570427396 = 0;
      Label3: {
          Label4: while (true) {
          if (!(i_570427396 < n_p3)) break Label4;
            iHEX60gensym4_318767326 = i_570427396;
            result_p0[result_p0_Idx][(old_318767312 + iHEX60gensym4_318767326)] = x_p1.charCodeAt((start_p2 + iHEX60gensym4_318767326));
            i_570427396 += 1;
          }
      };
    };

  
}

function addChars__stdZprivateZdigitsutils_u198(result_p0, result_p0_Idx, x_p1) {
    addChars__stdZprivateZdigitsutils_u202(result_p0, result_p0_Idx, x_p1, 0, ((x_p1) == null ? 0 : (x_p1).length));

  
}

function addInt__stdZprivateZdigitsutils_u223(result_p0, result_p0_Idx, x_p1) {
    addChars__stdZprivateZdigitsutils_u198(result_p0, result_p0_Idx, ((x_p1) + ""));

  
}

function addInt__stdZprivateZdigitsutils_u241(result_p0, result_p0_Idx, x_p1) {
    addInt__stdZprivateZdigitsutils_u223(result_p0, result_p0_Idx, BigInt(x_p1));

  
}

function HEX24__systemZdollars_u14(xHEX60gensym0_p0) {
  var result_385875984 = [[]];

    result_385875984[0] = nimCopy(null, [], NTI33554449);
    addInt__stdZprivateZdigitsutils_u241(result_385875984, 0, xHEX60gensym0_p0);

  return result_385875984[0];

}

function reprEnum(e_p0, typ_p1) {
  var result_33557657 = [];

    var tmp_33557658 = false;
    var item_33557659 = typ_p1.node.sons[e_p0];
    tmp_33557658 = item_33557659 !== undefined;
    if (tmp_33557658) {
    result_33557657 = nimCopy(null, makeNimstrLit(item_33557659.name), NTI33554449);
    }
    else {
      result_33557657 = nimCopy(null, (HEX24__systemZdollars_u14(e_p0)).concat([32,40,105,110,118,97,108,105,100,32,100,97,116,97,33,41]), NTI33554449);
    }
    

  return result_33557657;

}

function anyNext__OOZsrcZmargraveZparserZutils_u548(parser_p0, offset_p1) {
  var result_1207960103 = false;

    result_1207960103 = ((parser_p0.pos + offset_p1) < ((parser_p0.str) == null ? 0 : (parser_p0.str).length));

  return result_1207960103;

}

function peekMatch__OOZsrcZmargraveZparserZutils_u567(parser_p0, pat_p1, offset_p2) {
  var result_1207960123 = false;

    result_1207960123 = (anyNext__OOZsrcZmargraveZparserZutils_u548(parser_p0, offset_p2) && (pat_p1[parser_p0.str.charCodeAt((parser_p0.pos + offset_p2))] != undefined));

  return result_1207960123;

}

function nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, pat_p1, offset_p2) {
  var result_1207960233 = false;

    result_1207960233 = peekMatch__OOZsrcZmargraveZparserZutils_u567(parser_p0, pat_p1, offset_p2);
    if (result_1207960233) {
    parser_p0.pos += (offset_p2 + 1);
    }
    

  return result_1207960233;

}

function peekMatch__OOZsrcZmargraveZparserZutils_u562(parser_p0, pat_p1, offset_p2) {
  var result_1207960118 = false;

    result_1207960118 = (anyNext__OOZsrcZmargraveZparserZutils_u548(parser_p0, offset_p2) && (parser_p0.str.charCodeAt((parser_p0.pos + offset_p2)) == pat_p1));

  return result_1207960118;

}

function nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, pat_p1, offset_p2) {
  var result_1207960224 = false;

    result_1207960224 = peekMatch__OOZsrcZmargraveZparserZutils_u562(parser_p0, pat_p1, offset_p2);
    if (result_1207960224) {
    parser_p0.pos += (offset_p2 + 1);
    }
    

  return result_1207960224;

}

function HEX5BHEX5D__OOZsrcZmargraveZcommon_u22(c_p0, ind_p1) {
  var result_738197532 = null;

    result_738197532 = c_p0.substring(ind_p1.a, (ind_p1.b + 1));

  return result_738197532;

}

function HEX2EHEX2E__stdZstrbasics_u48(a_p0, b_p1) {
  var result_1124073525 = ({a: 0, b: 0});

    result_1124073525 = nimCopy(result_1124073525, {a: a_p0, b: b_p1}, NTI738197532);

  return result_1124073525;

}

function peekMatch__OOZsrcZmargraveZparserZutils_u602(parser_p0, pat_p1, offset_p2) {
    var Temporary1;

  var result_1207960158 = false;

    if (!anyNext__OOZsrcZmargraveZparserZutils_u548(parser_p0, ((offset_p2 + (pat_p1).length) - 1))) Temporary1 = false; else {      Temporary1 = (HEX5BHEX5D__OOZsrcZmargraveZcommon_u22(parser_p0.str, HEX2EHEX2E__stdZstrbasics_u48((parser_p0.pos + offset_p2), ((parser_p0.pos + offset_p2) + (pat_p1).length) - 1)) == toJSStr(pat_p1));    }    result_1207960158 = Temporary1;

  return result_1207960158;

}

function nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, pat_p1, offset_p2) {
  var result_1207960262 = false;

    result_1207960262 = peekMatch__OOZsrcZmargraveZparserZutils_u602(parser_p0, pat_p1, offset_p2);
    if (result_1207960262) {
    parser_p0.pos += (offset_p2 + (pat_p1).length);
    }
    

  return result_1207960262;

}

function HEX5BHEX5D__OOZsrcZmargraveZelement_u2730(s_p0, i_p1) {
  var result_788531886 = null;
  var result_788531886_Idx = 0;

    result_788531886 = s_p0; result_788531886_Idx = ((s_p0).length - i_p1);

  return [result_788531886, result_788531886_Idx];

}

function HEX5BHEX5D__OOZsrcZmargraveZelement_u2726(elem_p0, i_p1) {
    var Temporary1;
    var Temporary2;

  var result_788531881 = null;

    var Temporary1 = elem_p0;
    if (ConstSet7[Temporary1.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary1.isText, NTI33554466)); }
    result_788531881 = (Temporary2 = HEX5BHEX5D__OOZsrcZmargraveZelement_u2730(Temporary1.content, i_p1), Temporary2)[0][Temporary2[1]];

  return result_788531881;

}

function add__OOZsrcZmargraveZelement_u2786(elem_p0, cont_p1) {
    var Temporary1;

    var Temporary1 = elem_p0;
    if (ConstSet11[Temporary1.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary1.isText, NTI33554466)); }
    Temporary1.content.push(cont_p1);;

  
}

function newElem__OOZsrcZmargraveZelement_u114(tag_p0, content_p1) {
  var result_788529273 = null;

    result_788529273 = {isText: false, tag: tag_p0, content: nimCopy(null, content_p1, NTI788529198), attrs: ({data: [], counter: 0, first: 0, last: 0}), str: null};

  return result_788529273;

}

function newStr__OOZsrcZmargraveZelement_u57(s_p0) {
  var result_788529211 = null;

    result_788529211 = {isText: true, str: s_p0, tag: 0, attrs: ({data: [], counter: 0, first: 0, last: 0}), content: []};

  return result_788529211;

}

function add__OOZsrcZmargraveZelement_u2820(elem_p0, str_p1) {
    var Temporary1;

    var Temporary1 = elem_p0;
    if (ConstSet12[Temporary1.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary1.isText, NTI33554466)); }
    Temporary1.content.push(newStr__OOZsrcZmargraveZelement_u57(str_p1));;

  
}

function addNewline__converter_u118(parser_p0, elem_p2) {
      var options_570425471 = nimCopy(null, parser_p0.options, NTI1191182340);
    if (options_570425471.insertLineBreaks) {
    add__OOZsrcZmargraveZelement_u2786(elem_p2, newElem__OOZsrcZmargraveZelement_u114(2, []));
    }
    else {
    add__OOZsrcZmargraveZelement_u2820(elem_p2, "\n");
    }
    

  
}

function add__OOZsrcZmargraveZelement_u2796(x_p0, x_p0_Idx, y_p1) {
    var Temporary1;

    var xl_788531956 = (x_p0[x_p0_Idx]).length;
    if (x_p0[x_p0_Idx].length < (Temporary1 = (xl_788531956 + (y_p1).length), Temporary1)) { for (var i = x_p0[x_p0_Idx].length ; i < Temporary1 ; ++i) x_p0[x_p0_Idx].push(null); }
               else { x_p0[x_p0_Idx].length = Temporary1; };
    Label2: {
      var i_788531971 = 0;
      var colontmp__570427399 = 0;
      colontmp__570427399 = (y_p1).length - 1;
      var res_570427400 = 0;
      Label3: {
          Label4: while (true) {
          if (!(res_570427400 <= colontmp__570427399)) break Label4;
            i_788531971 = res_570427400;
            x_p0[x_p0_Idx][(xl_788531956 + i_788531971)] = y_p1[i_788531971];
            res_570427400 += 1;
          }
      };
    };

  
}

function add__OOZsrcZmargraveZelement_u2793(elem_p0, cont_p1) {
    var Temporary1;

    var Temporary1 = elem_p0;
    if (ConstSet13[Temporary1.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary1.isText, NTI33554466)); }
    add__OOZsrcZmargraveZelement_u2796(Temporary1, "content", cont_p1);

  
}

function add__converter_u175(x_p0, x_p0_Idx) {
    if (null != "\\") { if (null == x_p0[x_p0_Idx]) x_p0[x_p0_Idx] = "\\"; else x_p0[x_p0_Idx] += "\\"; };

  
}

function anyPrev__OOZsrcZmargraveZparserZutils_u552(parser_p0, offset_p1) {
  var result_1207960107 = false;

    result_1207960107 = (0 <= ((parser_p0.pos + offset_p1) - 1));

  return result_1207960107;

}

function peekPrevMatch__OOZsrcZmargraveZparserZutils_u642(parser_p0, pat_p1, offset_p2) {
  var result_1207960199 = false;

    result_1207960199 = (anyPrev__OOZsrcZmargraveZparserZutils_u552(parser_p0, offset_p2) && peekMatch__OOZsrcZmargraveZparserZutils_u567(parser_p0, pat_p1, (offset_p2 - 1)));

  return result_1207960199;

}

function prevWhitespace__OOZsrcZmargraveZparserZutils_u638(parser_p0, offset_p1) {
  var result_1207960193 = false;

    result_1207960193 = (!(anyPrev__OOZsrcZmargraveZparserZutils_u552(parser_p0, offset_p1)) || peekPrevMatch__OOZsrcZmargraveZparserZutils_u642(parser_p0, ConstSet17, offset_p1));

  return result_1207960193;

}

function nextWhitespace__OOZsrcZmargraveZparserZutils_u648(parser_p0, offset_p1) {
  var result_1207960203 = false;

    result_1207960203 = (!(anyNext__OOZsrcZmargraveZparserZutils_u548(parser_p0, offset_p1)) || peekMatch__OOZsrcZmargraveZparserZutils_u567(parser_p0, ConstSet18, (offset_p1 + 1)));

  return result_1207960203;

}

function surroundedWhitespace__OOZsrcZmargraveZparserZutils_u652(parser_p0, offset_p1) {
  var result_1207960207 = false;

    result_1207960207 = (prevWhitespace__OOZsrcZmargraveZparserZutils_u638(parser_p0, offset_p1) && nextWhitespace__OOZsrcZmargraveZparserZutils_u648(parser_p0, offset_p1));

  return result_1207960207;

}

function add__converter_u922(x_p0, x_p0_Idx) {
    if (null != "*") { if (null == x_p0[x_p0_Idx]) x_p0[x_p0_Idx] = "*"; else x_p0[x_p0_Idx] += "*"; };

  
}

function onlyNextWhitespace__OOZsrcZmargraveZparserZutils_u660(parser_p0, offset_p1) {
  var result_1207960215 = false;

    result_1207960215 = (!(prevWhitespace__OOZsrcZmargraveZparserZutils_u638(parser_p0, offset_p1)) && nextWhitespace__OOZsrcZmargraveZparserZutils_u648(parser_p0, offset_p1));

  return result_1207960215;

}

function add__converter_u953(x_p0, x_p0_Idx) {
    if (null != "_") { if (null == x_p0[x_p0_Idx]) x_p0[x_p0_Idx] = "_"; else x_p0[x_p0_Idx] += "_"; };

  
}

function add__OOZsrcZmargraveZcommon_u8(x_p0, x_p0_Idx, y_p1) {
    var Temporary1;

    if (null != (Temporary1 = String.fromCharCode(y_p1), Temporary1)) { if (null == x_p0[x_p0_Idx]) x_p0[x_p0_Idx] = Temporary1; else x_p0[x_p0_Idx] += Temporary1; };

  
}

function peekMatch__OOZsrcZmargraveZparserZutils_u576(parser_p0, pat_p1, offset_p2, len_p3) {
    var Temporary1;

  var result_1207960133 = false;

  BeforeRet: {
    if (anyNext__OOZsrcZmargraveZparserZutils_u548(parser_p0, ((offset_p2 + len_p3) - 1))) {
    Label2: {
      var i_1207960138 = 0;
      var colontmp__570427524 = 0;
      colontmp__570427524 = len_p3;
      var i_570427525 = 0;
      Label3: {
          Label4: while (true) {
          if (!(i_570427525 < colontmp__570427524)) break Label4;
            i_1207960138 = i_570427525;
            if (!((parser_p0.str.charCodeAt((parser_p0.pos + (offset_p2 + i_1207960138))) == pat_p1))) {
            result_1207960133 = false;
            break BeforeRet;
            }
            
            i_570427525 += 1;
          }
      };
    };
    Temporary1 = true;
    }
    else {
    Temporary1 = false;
    }
    
    result_1207960133 = Temporary1;
  };

  return result_1207960133;

}

function nextMatch__OOZsrcZmargraveZparserZutils_u686(parser_p0, pat_p1, offset_p2, len_p3) {
  var result_1207960243 = false;

    result_1207960243 = peekMatch__OOZsrcZmargraveZparserZutils_u576(parser_p0, pat_p1, offset_p2, len_p3);
    if (result_1207960243) {
    parser_p0.pos += (offset_p2 + len_p3);
    }
    

  return result_1207960243;

}

function parseCodeBlockStr__converter_u1018(parser_p0, delimChar_p2) {
              var Temporary10;
              var Temporary11;

  var result_570426367 = {Field0: null, Field1: null};

  BeforeRet: {
    var colontmp__570427516 = "";
    var colontmp__570427517 = "";
    result_570426367 = nimCopy(result_570426367, {Field0: colontmp__570427516, Field1: colontmp__570427517}, NTI1023410227);
    var delimLen_570426368 = 3;
    Label1: {
        Label2: while (true) {
        if (!nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, delimChar_p2, 0)) break Label2;
          delimLen_570426368 += 1;
        }
    };
    Label3: {
        Label4: while (true) {
        if (!nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, Whitespace_1040187406, 0)) break Label4;
        }
    };
      var options_570426380 = nimCopy(null, parser_p0.options, NTI1191182340);
    if (!((options_570426380.codeBlockLanguageHandler == null))) {
    Label5: {
        Label6: while (true) {
          var ch_570426385 = parser_p0.str.charCodeAt((parser_p0.pos + 0));
        if (!nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, ConstSet23, 0)) break Label6;
          add__OOZsrcZmargraveZcommon_u8(result_570426367, "Field0", ch_570426385);
        }
    };
    }
    else {
    }
    
    Label7: {
      var ch_570426386 = 0;
      Label8: {
          Label9: while (true) {
          if (!(parser_p0.pos < ((parser_p0.str) == null ? 0 : (parser_p0.str).length))) break Label9;
            ch_570426386 = parser_p0.str.charCodeAt((parser_p0.pos + 0));
            if (nextMatch__OOZsrcZmargraveZparserZutils_u686(parser_p0, delimChar_p2, 0, delimLen_570426368)) {
            parser_p0.pos -= 1;
            break BeforeRet;
            }
            else {
              switch (ch_570426386) {
              case 62:
                Temporary10 = "&gt;";
                break;
              case 60:
                Temporary10 = "&lt;";
                break;
              case 38:
                Temporary10 = "&amp;";
                break;
              default: 
                Temporary10 = String.fromCharCode(ch_570426386);
                break;
              }
            if (null != (Temporary11 = Temporary10, Temporary11)) { if (null == result_570426367.Field1) result_570426367.Field1 = Temporary11; else result_570426367.Field1 += Temporary11; };
            }
            
            parser_p0.pos += 1;
          }
      };
    };
  };

  return result_570426367;

}

function parseCodeBlock__converter_u1012(parser_p0, delimChar_p2) {
  var result_570426361 = null;

    var str_570426392 = parseCodeBlockStr__converter_u1018(parser_p0, delimChar_p2);
    result_570426361 = newElem__OOZsrcZmargraveZelement_u114(17, [newStr__OOZsrcZmargraveZelement_u57(str_570426392.Field1)]);
      var options_570426404 = nimCopy(null, parser_p0.options, NTI1191182340);
    if (!((options_570426404.codeBlockLanguageHandler == null))) {
    if (!((((str_570426392.Field0) == null ? 0 : (str_570426392.Field0).length) == 0))) {
    options_570426404.codeBlockLanguageHandler(result_570426361, str_570426392.Field0);
    }
    
    }
    else {
    }
    

  return result_570426361;

}

function parseAux__converter_u180(tag_p0, del_p1, parser_p2, acceptedReasons_p3) {
      var Temporary1;
      var Temporary2;

  var result_570425529 = 0;

    var currentPos_570425530 = parser_p2.pos;
    var tmpTuple_570425537 = parseDelimed__converter_u134(parser_p2, del_p1, this.singleLine0);
    var finishReason_570425538 = tmpTuple_570425537["Field0"];
    var parsedElems_570425539 = nimCopy(null, tmpTuple_570425537["Field1"], NTI1023410270);
    if ((acceptedReasons_p3[finishReason_570425538] != undefined)) {
    this.elems1.push(newElem__OOZsrcZmargraveZelement_u114(tag_p0, parsedElems_570425539));;
    this.lastStr2 = newStr__OOZsrcZmargraveZelement_u57("");
    this.elems1.push(this.lastStr2);;
    result_570425529 = 0;
    }
    else {
      var Temporary1 = this.lastStr2;
      if (ConstSet24[Temporary1.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary1.isText, NTI33554466)); }
      if (null != (Temporary2 = HEX5BHEX5D__OOZsrcZmargraveZcommon_u22(parser_p2.str, HEX2EHEX2E__stdZstrbasics_u48(this.initialPos3, currentPos_570425530 - 1)), Temporary2)) { if (null == Temporary1.str) Temporary1.str = Temporary2; else Temporary1.str += Temporary2; };
      add__OOZsrcZmargraveZelement_u2796(this, "elems1", parsedElems_570425539);
      this.lastStr2 = newStr__OOZsrcZmargraveZelement_u57("");
      this.elems1.push(this.lastStr2);;
      result_570425529 = finishReason_570425538;
    }
    

  return result_570425529;

}

function add__converter_u371(x_p0, x_p0_Idx) {
    if (null != "(") { if (null == x_p0[x_p0_Idx]) x_p0[x_p0_Idx] = "("; else x_p0[x_p0_Idx] += "("; };

  
}

function add__converter_u384(x_p0, x_p0_Idx) {
    if (null != ")") { if (null == x_p0[x_p0_Idx]) x_p0[x_p0_Idx] = ")"; else x_p0[x_p0_Idx] += ")"; };

  
}

function parseLink__converter_u324(parser_p0, failOnNewline_p2) {
                var Temporary6;

  var result_570425673 = {Field0: false, Field1: ({url: null, tip: null, altUrls: []})};

  BeforeRet: {
    var state_570425683 = 0;
    var delim_570425684 = 0;
    var escaped_570425685 = false;
    var openparens_570425686 = 1;
    var urlNum_570425687 = (-1);
    result_570425673.Field1.url = "";
    Label1: {
        Label2: while (true) {
        if (!nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, ConstSet35, 0)) break Label2;
        }
    };
    Label3: {
      var ch_570425696 = 0;
      Label4: {
          Label5: while (true) {
          if (!(parser_p0.pos < ((parser_p0.str) == null ? 0 : (parser_p0.str).length))) break Label5;
            ch_570425696 = parser_p0.str.charCodeAt((parser_p0.pos + 0));
            switch (state_570425683) {
            case 0:
              switch (ch_570425696) {
              case 9:
              case 11:
              case 12:
              case 13:
              case 32:
                break;
              case 10:
                result_570425673.Field0 = failOnNewline_p2;
                break BeforeRet;
                break;
              default: 
                parser_p0.pos -= 1;
                state_570425683 = 1;
                break;
              }
              break;
            case 1:
              switch (ch_570425696) {
              case 9:
              case 11:
              case 12:
              case 13:
              case 32:
                state_570425683 = 2;
                break;
              case 10:
                result_570425673.Field0 = failOnNewline_p2;
                break BeforeRet;
                break;
              case 40:
                openparens_570425686 += 1;
                if ((urlNum_570425687 < 0)) {
                add__converter_u371(result_570425673.Field1, "url");
                }
                else {
                add__converter_u371(result_570425673.Field1.altUrls, urlNum_570425687);
                }
                
                break;
              case 41:
                openparens_570425686 -= 1;
                if ((openparens_570425686 == 0)) {
                result_570425673.Field0 = true;
                break BeforeRet;
                }
                else {
                  if ((urlNum_570425687 < 0)) {
                  add__converter_u384(result_570425673.Field1, "url");
                  }
                  else {
                  add__converter_u384(result_570425673.Field1.altUrls, urlNum_570425687);
                  }
                  
                }
                
                break;
              default: 
                if ((urlNum_570425687 < 0)) {
                add__OOZsrcZmargraveZcommon_u8(result_570425673.Field1, "url", ch_570425696);
                }
                else {
                add__OOZsrcZmargraveZcommon_u8(result_570425673.Field1.altUrls, urlNum_570425687, ch_570425696);
                }
                
                break;
              }
              break;
            case 2:
              switch (ch_570425696) {
              case 34:
              case 39:
              case 60:
                state_570425683 = 3;
                if ((ch_570425696 == 60)) {
                Temporary6 = 62;
                }
                else {
                Temporary6 = ch_570425696;
                }
                
                delim_570425684 = Temporary6;
                break;
              case 124:
                state_570425683 = 0;
                result_570425673.Field1.altUrls.push("");;
                urlNum_570425687 += 1;
                break;
              case 41:
                result_570425673.Field0 = true;
                break BeforeRet;
                break;
              case 10:
                result_570425673.Field0 = failOnNewline_p2;
                break BeforeRet;
                break;
              case 9:
              case 11:
              case 12:
              case 13:
              case 32:
                break;
              default: 
                parser_p0.pos -= 1;
                state_570425683 = 3;
                delim_570425684 = 41;
                break;
              }
              break;
            case 3:
              if (!(escaped_570425685)) {
              if ((ch_570425696 == 92)) {
              escaped_570425685 = true;
              }
              else {
              if ((ch_570425696 == delim_570425684)) {
              if ((delim_570425684 == 41)) {
              parser_p0.pos -= 1;
              }
              
              state_570425683 = 4;
              }
              else {
              if ((ch_570425696 == 10)) {
              result_570425673.Field0 = failOnNewline_p2;
              break BeforeRet;
              }
              else {
              add__OOZsrcZmargraveZcommon_u8(result_570425673.Field1, "tip", ch_570425696);
              }
              }}
              }
              else {
                if (!((setConstr(92, delim_570425684)[ch_570425696] != undefined))) {
                add__converter_u175(result_570425673.Field1, "tip");
                }
                
                add__OOZsrcZmargraveZcommon_u8(result_570425673.Field1, "tip", ch_570425696);
                escaped_570425685 = false;
              }
              
              break;
            case 4:
              switch (ch_570425696) {
              case 41:
                result_570425673.Field0 = true;
                break BeforeRet;
                break;
              case 10:
                result_570425673.Field0 = failOnNewline_p2;
                break BeforeRet;
                break;
              case 9:
              case 11:
              case 12:
              case 13:
              case 32:
                break;
              default: 
                result_570425673.Field0 = false;
                break BeforeRet;
                break;
              }
              break;
            }
            parser_p0.pos += 1;
          }
      };
    };
    result_570425673.Field0 = failOnNewline_p2;
  };

  return result_570425673;

}

function nextPowerOfTwo__pureZmath_u222(x_p0) {
  var result_872415456 = 0;

    result_872415456 = (x_p0 - 1);
    result_872415456 = (result_872415456 | (result_872415456 >> 16));
    result_872415456 = (result_872415456 | (result_872415456 >> 8));
    result_872415456 = (result_872415456 | (result_872415456 >> 4));
    result_872415456 = (result_872415456 | (result_872415456 >> 2));
    result_872415456 = (result_872415456 | (result_872415456 >> 1));
    result_872415456 += (1 + ((x_p0 <= 0) ? 1 : 0));

  return result_872415456;

}

function slotsNeeded__pureZcollectionsZtables_u42(count_p0) {
  var result_805306412 = 0;

    result_805306412 = nextPowerOfTwo__pureZmath_u222(((Math.trunc(count_p0 / 2) + count_p0) + 4));

  return result_805306412;

}

function lenU__pureZhashes_u532(s_p0) {
  var result_822084118 = 0n;

    result_822084118 = BigInt.asUintN(64, BigInt((s_p0).length));

  return result_822084118;

}

function load8e__pureZhashes_u492(s_p0, o_p1) {
  var result_822084079 = 0n;

    result_822084079 = (((((((BigInt.asUintN(64, BigInt(s_p0[(o_p1 + 7)]) << BigInt(56)) | BigInt.asUintN(64, BigInt(s_p0[(o_p1 + 6)]) << BigInt(48))) | BigInt.asUintN(64, BigInt(s_p0[(o_p1 + 5)]) << BigInt(40))) | BigInt.asUintN(64, BigInt(s_p0[(o_p1 + 4)]) << BigInt(32))) | BigInt.asUintN(64, BigInt(s_p0[(o_p1 + 3)]) << BigInt(24))) | BigInt.asUintN(64, BigInt(s_p0[(o_p1 + 2)]) << BigInt(16))) | BigInt.asUintN(64, BigInt(s_p0[(o_p1 + 1)]) << BigInt(8))) | BigInt(s_p0[(o_p1 + 0)]));

  return result_822084079;

}

function load8__pureZhashes_u528(s_p0, o_p1) {
  var result_822084115 = 0n;

    result_822084115 = load8e__pureZhashes_u492(s_p0, o_p1);

  return result_822084115;

}

function rotR__pureZhashes_u545(v_p0, bits_p1) {
  var result_822084132 = 0n;

    result_822084132 = ((v_p0 >> BigInt(bits_p1)) | BigInt.asUintN(64, v_p0 << BigInt((64 - bits_p1))));

  return result_822084132;

}

function len16__pureZhashes_u557(u_p0, v_p1, mul_p2) {
  var result_822084145 = 0n;

    var a_822084146 = BigInt.asUintN(64, ((u_p0 ^ v_p1) * mul_p2));
    a_822084146 = (a_822084146 ^ (a_822084146 >> BigInt(47)));
    var b_822084151 = BigInt.asUintN(64, ((v_p1 ^ a_822084146) * mul_p2));
    b_822084151 = (b_822084151 ^ (b_822084151 >> BigInt(47)));
    result_822084145 = BigInt.asUintN(64, (b_822084151 * mul_p2));

  return result_822084145;

}

function load4e__pureZhashes_u476(s_p0, o_p1) {
  var result_822084063 = 0;

    result_822084063 = (((((((((s_p0[(o_p1 + 3)] >>> 0) << 24) >>> 0) | (((s_p0[(o_p1 + 2)] >>> 0) << 16) >>> 0)) >>> 0) | (((s_p0[(o_p1 + 1)] >>> 0) << 8) >>> 0)) >>> 0) | (s_p0[(o_p1 + 0)] >>> 0)) >>> 0);

  return result_822084063;

}

function load4__pureZhashes_u524(s_p0, o_p1) {
  var result_822084111 = 0;

    result_822084111 = load4e__pureZhashes_u476(s_p0, o_p1);

  return result_822084111;

}

function shiftMix__pureZhashes_u538(v_p0) {
  var result_822084124 = 0n;

    result_822084124 = (v_p0 ^ (v_p0 >> BigInt(47)));

  return result_822084124;

}

function len0_16__pureZhashes_u572(s_p0) {
    var Temporary1;

  var result_822084158 = 0n;

    if ((8 <= (s_p0).length)) {
    var mul_822084162 = BigInt.asUintN(64, (11160318154034397263n + BigInt.asUintN(64, (2n * lenU__pureZhashes_u532(s_p0)))));
    var a_822084163 = BigInt.asUintN(64, (load8__pureZhashes_u528(s_p0, 0) + 11160318154034397263n));
    var b_822084167 = load8__pureZhashes_u528(s_p0, ((s_p0).length - 8));
    var c_822084168 = BigInt.asUintN(64, (BigInt.asUintN(64, (rotR__pureZhashes_u545(b_822084167, 37) * mul_822084162)) + a_822084163));
    var d_822084169 = BigInt.asUintN(64, (BigInt.asUintN(64, (rotR__pureZhashes_u545(a_822084163, 25) + b_822084167)) * mul_822084162));
    Temporary1 = len16__pureZhashes_u557(c_822084168, d_822084169, mul_822084162);
    }
    else {
    if ((4 <= (s_p0).length)) {
    var mul_822084173 = BigInt.asUintN(64, (11160318154034397263n + BigInt.asUintN(64, (2n * lenU__pureZhashes_u532(s_p0)))));
    var a_822084174 = BigInt(load4__pureZhashes_u524(s_p0, 0));
    Temporary1 = len16__pureZhashes_u557(BigInt.asUintN(64, (lenU__pureZhashes_u532(s_p0) + BigInt.asUintN(64, a_822084174 << BigInt(3)))), BigInt(load4__pureZhashes_u524(s_p0, ((s_p0).length - 4))), mul_822084173);
    }
    else {
    if ((0 < (s_p0).length)) {
    var a_822084185 = (s_p0[0] >>> 0);
    var b_822084193 = (s_p0[((s_p0).length >> 1)] >>> 0);
    var c_822084197 = (s_p0[((s_p0).length - 1)] >>> 0);
    var y_822084202 = ((a_822084185 + ((b_822084193 << 8) >>> 0)) >>> 0);
    var z_822084207 = BigInt.asUintN(64, (lenU__pureZhashes_u532(s_p0) + BigInt(((c_822084197 << 2) >>> 0))));
    Temporary1 = BigInt.asUintN(64, (shiftMix__pureZhashes_u538((BigInt.asUintN(64, (BigInt(y_822084202) * 11160318154034397263n)) ^ BigInt.asUintN(64, (z_822084207 * 14097894508562428199n)))) * 11160318154034397263n));
    }
    else {
    Temporary1 = 11160318154034397263n;
    }
    }}
    result_822084158 = Temporary1;

  return result_822084158;

}

function len17_32__pureZhashes_u624(s_p0) {
  var result_822084210 = 0n;

    var mul_822084211 = BigInt.asUintN(64, (11160318154034397263n + BigInt.asUintN(64, (2n * lenU__pureZhashes_u532(s_p0)))));
    var a_822084212 = BigInt.asUintN(64, (load8__pureZhashes_u528(s_p0, 0) * 13011662864482103923n));
    var b_822084213 = load8__pureZhashes_u528(s_p0, 8);
    var c_822084217 = BigInt.asUintN(64, (load8__pureZhashes_u528(s_p0, ((s_p0).length - 8)) * mul_822084211));
    var d_822084221 = BigInt.asUintN(64, (load8__pureZhashes_u528(s_p0, ((s_p0).length - 16)) * 11160318154034397263n));
    result_822084210 = len16__pureZhashes_u557(BigInt.asUintN(64, (BigInt.asUintN(64, (rotR__pureZhashes_u545(BigInt.asUintN(64, (a_822084212 + b_822084213)), 43) + rotR__pureZhashes_u545(c_822084217, 30))) + d_822084221)), BigInt.asUintN(64, (BigInt.asUintN(64, (a_822084212 + rotR__pureZhashes_u545(BigInt.asUintN(64, (b_822084213 + 11160318154034397263n)), 18))) + c_822084217)), mul_822084211);

  return result_822084210;

}

function len33_64__pureZhashes_u638(s_p0) {
  var result_822084224 = 0n;

    var mul_822084225 = BigInt.asUintN(64, (11160318154034397263n + BigInt.asUintN(64, (2n * lenU__pureZhashes_u532(s_p0)))));
    var a_822084226 = BigInt.asUintN(64, (load8__pureZhashes_u528(s_p0, 0) * 11160318154034397263n));
    var b_822084227 = load8__pureZhashes_u528(s_p0, 8);
    var c_822084231 = BigInt.asUintN(64, (load8__pureZhashes_u528(s_p0, ((s_p0).length - 8)) * mul_822084225));
    var d_822084235 = BigInt.asUintN(64, (load8__pureZhashes_u528(s_p0, ((s_p0).length - 16)) * 11160318154034397263n));
    var y_822084236 = BigInt.asUintN(64, (BigInt.asUintN(64, (rotR__pureZhashes_u545(BigInt.asUintN(64, (a_822084226 + b_822084227)), 43) + rotR__pureZhashes_u545(c_822084231, 30))) + d_822084235));
    var z_822084237 = len16__pureZhashes_u557(y_822084236, BigInt.asUintN(64, (BigInt.asUintN(64, (a_822084226 + rotR__pureZhashes_u545(BigInt.asUintN(64, (b_822084227 + 11160318154034397263n)), 18))) + c_822084231)), mul_822084225);
    var e_822084238 = BigInt.asUintN(64, (load8__pureZhashes_u528(s_p0, 16) * mul_822084225));
    var f_822084239 = load8__pureZhashes_u528(s_p0, 24);
    var g_822084243 = BigInt.asUintN(64, (BigInt.asUintN(64, (y_822084236 + load8__pureZhashes_u528(s_p0, ((s_p0).length - 32)))) * mul_822084225));
    var h_822084247 = BigInt.asUintN(64, (BigInt.asUintN(64, (z_822084237 + load8__pureZhashes_u528(s_p0, ((s_p0).length - 24)))) * mul_822084225));
    result_822084224 = len16__pureZhashes_u557(BigInt.asUintN(64, (BigInt.asUintN(64, (rotR__pureZhashes_u545(BigInt.asUintN(64, (e_822084238 + f_822084239)), 43) + rotR__pureZhashes_u545(g_822084243, 30))) + h_822084247)), BigInt.asUintN(64, (BigInt.asUintN(64, (e_822084238 + rotR__pureZhashes_u545(BigInt.asUintN(64, (f_822084239 + a_822084226)), 18))) + g_822084243)), mul_822084225);

  return result_822084224;

}

function weakLen32withSeeds2__pureZhashes_u669(w_p0, x_p1, y_p2, z_p3, a_p4, b_p5) {
  var result_822084260 = {Field0: 0n, Field1: 0n};

    var a_822084261 = BigInt.asUintN(64, (a_p4 + w_p0));
    var b_822084262 = rotR__pureZhashes_u545(BigInt.asUintN(64, (BigInt.asUintN(64, (b_p5 + a_822084261)) + z_p3)), 21);
    var c_822084263 = a_822084261;
    a_822084261 = BigInt.asUintN(64, a_822084261 + BigInt(x_p1));
    a_822084261 = BigInt.asUintN(64, a_822084261 + BigInt(y_p2));
    b_822084262 = BigInt.asUintN(64, b_822084262 + BigInt(rotR__pureZhashes_u545(a_822084261, 44)));
    result_822084260["Field0"] = BigInt.asUintN(64, (a_822084261 + z_p3));
    result_822084260["Field1"] = BigInt.asUintN(64, (b_822084262 + c_822084263));

  return result_822084260;

}

function weakLen32withSeeds__pureZhashes_u692(s_p0, o_p1, a_p2, b_p3) {
  var result_822084281 = {Field0: 0n, Field1: 0n};

    result_822084281 = nimCopy(result_822084281, weakLen32withSeeds2__pureZhashes_u669(load8__pureZhashes_u528(s_p0, o_p1), load8__pureZhashes_u528(s_p0, (o_p1 + 8)), load8__pureZhashes_u528(s_p0, (o_p1 + 16)), load8__pureZhashes_u528(s_p0, (o_p1 + 24)), a_p2, b_p3), NTI822083959);

  return result_822084281;

}

function hashFarm__pureZhashes_u715(s_p0) {
  var result_822084301 = 0n;

  BeforeRet: {
    if (((s_p0).length <= 16)) {
    result_822084301 = len0_16__pureZhashes_u572(s_p0);
    break BeforeRet;
    }
    
    if (((s_p0).length <= 32)) {
    result_822084301 = len17_32__pureZhashes_u624(s_p0);
    break BeforeRet;
    }
    
    if (((s_p0).length <= 64)) {
    result_822084301 = len33_64__pureZhashes_u638(s_p0);
    break BeforeRet;
    }
    
    var o_822084312 = 0;
    var x_822084313 = 81n;
    var y_822084314 = 2480279821605975764n;
    var z_822084315 = BigInt.asUintN(64, (shiftMix__pureZhashes_u538(BigInt.asUintN(64, (BigInt.asUintN(64, (y_822084314 * 11160318154034397263n)) + 113n))) * 11160318154034397263n));
    var v_822084321 = nimCopy(null, {Field0: 0n, Field1: 0n}, NTI822083959);
    var w_822084326 = nimCopy(null, {Field0: 0n, Field1: 0n}, NTI822083959);
    x_822084313 = BigInt.asUintN(64, (BigInt.asUintN(64, (x_822084313 * 11160318154034397263n)) + load8__pureZhashes_u528(s_p0, 0)));
    var eos_822084330 = (Math.trunc(((s_p0).length - 1) / 64) * 64);
    var last64_822084334 = ((eos_822084330 + (((s_p0).length - 1) & 63)) - 63);
    Label1: {
        Label2: while (true) {
        if (!true) break Label2;
          x_822084313 = BigInt.asUintN(64, (rotR__pureZhashes_u545(BigInt.asUintN(64, (BigInt.asUintN(64, (BigInt.asUintN(64, (x_822084313 + y_822084314)) + v_822084321["Field0"])) + load8__pureZhashes_u528(s_p0, (o_822084312 + 8)))), 37) * 13011662864482103923n));
          y_822084314 = BigInt.asUintN(64, (rotR__pureZhashes_u545(BigInt.asUintN(64, (BigInt.asUintN(64, (y_822084314 + v_822084321["Field1"])) + load8__pureZhashes_u528(s_p0, (o_822084312 + 48)))), 42) * 13011662864482103923n));
          x_822084313 = (x_822084313 ^ w_822084326["Field1"]);
          y_822084314 = BigInt.asUintN(64, y_822084314 + BigInt(BigInt.asUintN(64, (v_822084321["Field0"] + load8__pureZhashes_u528(s_p0, (o_822084312 + 40))))));
          z_822084315 = BigInt.asUintN(64, (rotR__pureZhashes_u545(BigInt.asUintN(64, (z_822084315 + w_822084326["Field0"])), 33) * 13011662864482103923n));
          v_822084321 = nimCopy(v_822084321, weakLen32withSeeds__pureZhashes_u692(s_p0, (o_822084312 + 0), BigInt.asUintN(64, (v_822084321["Field1"] * 13011662864482103923n)), BigInt.asUintN(64, (x_822084313 + w_822084326["Field0"]))), NTI822083959);
          w_822084326 = nimCopy(w_822084326, weakLen32withSeeds__pureZhashes_u692(s_p0, (o_822084312 + 32), BigInt.asUintN(64, (z_822084315 + w_822084326["Field1"])), BigInt.asUintN(64, (y_822084314 + load8__pureZhashes_u528(s_p0, (o_822084312 + 16))))), NTI822083959);
          var HEX3Atmp_570427537 = z_822084315;
          z_822084315 = x_822084313;
          x_822084313 = HEX3Atmp_570427537;
          o_822084312 += 64;
          if ((o_822084312 == eos_822084330)) {
          break Label1;
          }
          
        }
    };
    var mul_822084352 = BigInt.asUintN(64, (13011662864482103923n + BigInt.asUintN(64, (z_822084315 & 255n) << BigInt(1))));
    o_822084312 = last64_822084334;
    w_822084326["Field0"] = BigInt.asUintN(64, w_822084326["Field0"] + BigInt((BigInt.asUintN(64, (lenU__pureZhashes_u532(s_p0) - 1n)) & 63n)));
    v_822084321["Field0"] = BigInt.asUintN(64, v_822084321["Field0"] + BigInt(w_822084326["Field0"]));
    w_822084326["Field0"] = BigInt.asUintN(64, w_822084326["Field0"] + BigInt(v_822084321["Field0"]));
    x_822084313 = BigInt.asUintN(64, (rotR__pureZhashes_u545(BigInt.asUintN(64, (BigInt.asUintN(64, (BigInt.asUintN(64, (x_822084313 + y_822084314)) + v_822084321["Field0"])) + load8__pureZhashes_u528(s_p0, (o_822084312 + 8)))), 37) * mul_822084352));
    y_822084314 = BigInt.asUintN(64, (rotR__pureZhashes_u545(BigInt.asUintN(64, (BigInt.asUintN(64, (y_822084314 + v_822084321["Field1"])) + load8__pureZhashes_u528(s_p0, (o_822084312 + 48)))), 42) * mul_822084352));
    x_822084313 = (x_822084313 ^ BigInt.asUintN(64, (w_822084326["Field1"] * 9n)));
    y_822084314 = BigInt.asUintN(64, y_822084314 + BigInt(BigInt.asUintN(64, (BigInt.asUintN(64, (v_822084321["Field0"] * 9n)) + load8__pureZhashes_u528(s_p0, (o_822084312 + 40))))));
    z_822084315 = BigInt.asUintN(64, (rotR__pureZhashes_u545(BigInt.asUintN(64, (z_822084315 + w_822084326["Field0"])), 33) * mul_822084352));
    v_822084321 = nimCopy(v_822084321, weakLen32withSeeds__pureZhashes_u692(s_p0, (o_822084312 + 0), BigInt.asUintN(64, (v_822084321["Field1"] * mul_822084352)), BigInt.asUintN(64, (x_822084313 + w_822084326["Field0"]))), NTI822083959);
    w_822084326 = nimCopy(w_822084326, weakLen32withSeeds__pureZhashes_u692(s_p0, (o_822084312 + 32), BigInt.asUintN(64, (z_822084315 + w_822084326["Field1"])), BigInt.asUintN(64, (y_822084314 + load8__pureZhashes_u528(s_p0, (o_822084312 + 16))))), NTI822083959);
    var HEX3Atmp_570427538 = z_822084315;
    z_822084315 = x_822084313;
    x_822084313 = HEX3Atmp_570427538;
    result_822084301 = len16__pureZhashes_u557(BigInt.asUintN(64, (BigInt.asUintN(64, (len16__pureZhashes_u557(v_822084321["Field0"], w_822084326["Field0"], mul_822084352) + BigInt.asUintN(64, (shiftMix__pureZhashes_u538(y_822084314) * 14097894508562428199n)))) + z_822084315)), BigInt.asUintN(64, (len16__pureZhashes_u557(v_822084321["Field1"], w_822084326["Field1"], mul_822084352) + x_822084313)), mul_822084352);
  };

  return result_822084301;

}

function hash__pureZhashes_u794(x_p0) {
  var result_822084380 = 0;

    var xx_822084381 = cstrToNimstr(x_p0);
    result_822084380 = Number(BigInt.asIntN(32, hashFarm__pureZhashes_u715((xx_822084381.slice(0, (xx_822084381).length - 1 + 1)))));

  return result_822084380;

}

function isFilled__pureZcollectionsZtables_u31(hcode_p0) {
  var result_805306401 = false;

    result_805306401 = !((hcode_p0 == 0));

  return result_805306401;

}

function nextTry__pureZcollectionsZtables_u34(h_p0, maxHash_p1) {
  var result_805306405 = 0;

    result_805306405 = ((h_p0 + 1) & maxHash_p1);

  return result_805306405;

}

function rawGet__OOZsrcZmargraveZelement_u710(t_p0, key_p1, hc_p2, hc_p2_Idx) {
  var result_788529868 = 0;

  BeforeRet: {
    hc_p2[hc_p2_Idx] = hash__pureZhashes_u794(key_p1);
    if ((hc_p2[hc_p2_Idx] == 0)) {
    hc_p2[hc_p2_Idx] = 314159265;
    }
    
    if (((t_p0.data).length == 0)) {
    result_788529868 = (-1);
    break BeforeRet;
    }
    
    var h_788529918 = (hc_p2[hc_p2_Idx] & (t_p0.data).length - 1);
    Label1: {
        Label2: while (true) {
        if (!isFilled__pureZcollectionsZtables_u31(t_p0.data[h_788529918].Field0)) break Label2;
          if (((t_p0.data[h_788529918].Field0 == hc_p2[hc_p2_Idx]) && (t_p0.data[h_788529918].Field2 == key_p1))) {
          result_788529868 = h_788529918;
          break BeforeRet;
          }
          
          h_788529918 = nextTry__pureZcollectionsZtables_u34(h_788529918, (t_p0.data).length - 1);
        }
    };
    result_788529868 = ((-1) - h_788529918);
  };

  return result_788529868;

}

function mustRehash__OOZsrcZmargraveZelement_u1016(t_p0) {
  var result_788530171 = false;

    result_788530171 = (((t_p0.data).length < (t_p0.counter + Math.trunc(t_p0.counter / 2))) || (((t_p0.data).length - t_p0.counter) < 4));

  return result_788530171;

}

function rawInsert__OOZsrcZmargraveZelement_u1548(t_p0, data_p1, data_p1_Idx, key_p2, val_p3, hc_p4, h_p5) {
    data_p1[data_p1_Idx][h_p5].Field2 = key_p2;
    data_p1[data_p1_Idx][h_p5].Field3 = val_p3;
    data_p1[data_p1_Idx][h_p5].Field0 = hc_p4;
    data_p1[data_p1_Idx][h_p5].Field1 = (-1);
    if ((t_p0.first < 0)) {
    t_p0.first = h_p5;
    }
    
    if ((0 <= t_p0.last)) {
    data_p1[data_p1_Idx][t_p0.last].Field1 = h_p5;
    }
    
    t_p0.last = h_p5;

  
}

function enlarge__OOZsrcZmargraveZelement_u1165(t_p0) {
          var Temporary5;
          var Temporary6;

    var n_788530323 = [];
    n_788530323 = new Array(((t_p0.data).length * 2)); for (var i = 0 ; i < ((t_p0.data).length * 2) ; ++i) { n_788530323[i] = {Field0: 0, Field1: 0, Field2: null, Field3: null}; }    var h_788530371 = t_p0.first;
    t_p0.first = (-1);
    t_p0.last = (-1);
    var HEX3Atmp_570427541 = nimCopy(null, t_p0.data, NTI788529169);
    t_p0.data = n_788530323;
    n_788530323 = HEX3Atmp_570427541;
    Label1: {
        Label2: while (true) {
        if (!(0 <= h_788530371)) break Label2;
          var nxt_788530425 = n_788530323[h_788530371].Field1;
          var eh_788530475 = n_788530323[h_788530371].Field0;
          if (isFilled__pureZcollectionsZtables_u31(eh_788530475)) {
          var j_788530479 = (eh_788530475 & (t_p0.data).length - 1);
          Label3: {
              Label4: while (true) {
              if (!isFilled__pureZcollectionsZtables_u31(t_p0.data[j_788530479].Field0)) break Label4;
                j_788530479 = nextTry__pureZcollectionsZtables_u34(j_788530479, (t_p0.data).length - 1);
              }
          };
          Temporary5 = n_788530323[h_788530371].Field2;
          n_788530323[h_788530371].Field2 = null;
          Temporary6 = n_788530323[h_788530371].Field3;
          n_788530323[h_788530371].Field3 = null;
          rawInsert__OOZsrcZmargraveZelement_u1548(t_p0, t_p0, "data", Temporary5, Temporary6, n_788530323[h_788530371].Field0, j_788530479);
          }
          
          h_788530371 = nxt_788530425;
        }
    };

  
}

function rawGetKnownHC__OOZsrcZmargraveZelement_u1826(t_p0, key_p1, hc_p2) {
  var result_788530984 = 0;

  BeforeRet: {
    if (((t_p0.data).length == 0)) {
    result_788530984 = (-1);
    break BeforeRet;
    }
    
    var h_788531031 = (hc_p2 & (t_p0.data).length - 1);
    Label1: {
        Label2: while (true) {
        if (!isFilled__pureZcollectionsZtables_u31(t_p0.data[h_788531031].Field0)) break Label2;
          if (((t_p0.data[h_788531031].Field0 == hc_p2) && (t_p0.data[h_788531031].Field2 == key_p1))) {
          result_788530984 = h_788531031;
          break BeforeRet;
          }
          
          h_788531031 = nextTry__pureZcollectionsZtables_u34(h_788531031, (t_p0.data).length - 1);
        }
    };
    result_788530984 = ((-1) - h_788531031);
  };

  return result_788530984;

}

function HEX5BHEX5DHEX3D__OOZsrcZmargraveZelement_u641(t_p0, key_p1, val_p2) {
    if (((t_p0.data).length == 0)) {
    var correctSizeHEX60gensym4_788529843 = slotsNeeded__pureZcollectionsZtables_u42(32);
    t_p0.counter = 0;
    t_p0.data = new Array(correctSizeHEX60gensym4_788529843); for (var i = 0 ; i < correctSizeHEX60gensym4_788529843 ; ++i) { t_p0.data[i] = {Field0: 0, Field1: 0, Field2: null, Field3: null}; }    t_p0.first = (-1);
    t_p0.last = (-1);
    }
    
    var hc_788529853 = [0];
    var index_788530069 = rawGet__OOZsrcZmargraveZelement_u710(t_p0, key_p1, hc_788529853, 0);
    if ((0 <= index_788530069)) {
    t_p0.data[index_788530069].Field3 = val_p2;
    }
    else {
      if (((t_p0.data).length == 0)) {
      var correctSizeHEX60gensym9_788530163 = slotsNeeded__pureZcollectionsZtables_u42(32);
      t_p0.counter = 0;
      t_p0.data = new Array(correctSizeHEX60gensym9_788530163); for (var i = 0 ; i < correctSizeHEX60gensym9_788530163 ; ++i) { t_p0.data[i] = {Field0: 0, Field1: 0, Field2: null, Field3: null}; }      t_p0.first = (-1);
      t_p0.last = (-1);
      }
      
      if (mustRehash__OOZsrcZmargraveZelement_u1016(t_p0)) {
      enlarge__OOZsrcZmargraveZelement_u1165(t_p0);
      index_788530069 = rawGetKnownHC__OOZsrcZmargraveZelement_u1826(t_p0, key_p1, hc_788529853[0]);
      }
      
      index_788530069 = ((-1) - index_788530069);
      rawInsert__OOZsrcZmargraveZelement_u1548(t_p0, t_p0, "data", key_p1, val_p2, hc_788529853[0], index_788530069);
      t_p0.counter += 1;
    }
    

  
}

function attr__OOZsrcZmargraveZelement_u601(elem_p0, key_p1, val_p2) {
    var Temporary1;

    var Temporary1 = elem_p0;
    if (ConstSet37[Temporary1.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'attrs\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary1.isText, NTI33554466)); }
    HEX5BHEX5DHEX3D__OOZsrcZmargraveZelement_u641(Temporary1.attrs, key_p1, val_p2);

  
}

function attrEscaped__OOZsrcZmargraveZelement_u2055(elem_p0, key_p1, val_p2) {
    var esc_788531211 = [""];
    Label1: {
      var v_788531212 = 0;
      var iHEX60gensym13_570427532 = 0;
      var nHEX60gensym13_570427533 = ((val_p2) == null ? 0 : (val_p2).length);
      Label2: {
          Label3: while (true) {
          if (!(iHEX60gensym13_570427532 < nHEX60gensym13_570427533)) break Label3;
            v_788531212 = val_p2.charCodeAt(iHEX60gensym13_570427532);
            if ((v_788531212 == 34)) {
            if (null != "&quot;") { if (null == esc_788531211[0]) esc_788531211[0] = "&quot;"; else esc_788531211[0] += "&quot;"; };
            }
            else {
            add__OOZsrcZmargraveZcommon_u8(esc_788531211, 0, v_788531212);
            }
            
            iHEX60gensym13_570427532 += 1;
          }
      };
    };
    attr__OOZsrcZmargraveZelement_u601(elem_p0, key_p1, esc_788531211[0]);

  
}

function find__OOZsrcZmargraveZparserZutils_u95(a_p0, item_p1) {
  var result_1207959652 = 0;

  BeforeRet: {
    result_1207959652 = 0;
    Label1: {
      var i_1207959666 = null;
      var i_570427550 = 0;
      Label2: {
          Label3: while (true) {
          if (!(i_570427550 < (a_p0).length)) break Label3;
            i_1207959666 = a_p0[i_570427550];
            if ((i_1207959666 == item_p1)) {
            break BeforeRet;
            }
            
            result_1207959652 += 1;
            i_570427550 += 1;
          }
      };
    };
    result_1207959652 = (-1);
  };

  return result_1207959652;

}

function contains__OOZsrcZmargraveZparserZutils_u90(a_p0, item_p1) {
  var result_1207959646 = false;

  BeforeRet: {
    result_1207959646 = (0 <= find__OOZsrcZmargraveZparserZutils_u95(a_p0, item_p1));
    break BeforeRet;
  };

  return result_1207959646;

}

function HEX5BHEX5D__OOZsrcZmargraveZcommon_u37(c_p0, ind_p1) {
  var result_738197548 = null;

    result_738197548 = c_p0.substring((((c_p0) == null ? 0 : (c_p0).length) - ind_p1.a), ((((c_p0) == null ? 0 : (c_p0).length) - ind_p1.b) + 1));

  return result_738197548;

}

function HEX2EHEX2E__OOZsrcZmargraveZparserZutils_u29(a_p0, b_p1) {
  var result_1207959586 = ({a: 0, b: 0});

    result_1207959586 = nimCopy(result_1207959586, {a: a_p0, b: b_p1}, NTI738197551);

  return result_1207959586;

}

function del__OOZsrcZmargraveZelement_u2165(t_p0, key_p1) {
            var Temporary3;
            var Temporary4;

  BeforeRet: {
    if ((t_p0.counter == 0)) {
    break BeforeRet;
    }
    
    var n_788531324 = [];
    n_788531324 = new Array((t_p0.data).length); for (var i = 0 ; i < (t_p0.data).length ; ++i) { n_788531324[i] = {Field0: 0, Field1: 0, Field2: null, Field3: null}; }    var h_788531372 = t_p0.first;
    t_p0.first = (-1);
    t_p0.last = (-1);
    var HEX3Atmp_570427553 = nimCopy(null, t_p0.data, NTI788529169);
    t_p0.data = n_788531324;
    n_788531324 = HEX3Atmp_570427553;
    var resHEX60gensym17_788531378 = 0;
    resHEX60gensym17_788531378 = hash__pureZhashes_u794(key_p1);
    if ((resHEX60gensym17_788531378 == 0)) {
    resHEX60gensym17_788531378 = 314159265;
    }
    
    var hc_788531382 = resHEX60gensym17_788531378;
    Label1: {
        Label2: while (true) {
        if (!(0 <= h_788531372)) break Label2;
          var nxt_788531432 = n_788531324[h_788531372].Field1;
          if (isFilled__pureZcollectionsZtables_u31(n_788531324[h_788531372].Field0)) {
          if (((n_788531324[h_788531372].Field0 == hc_788531382) && (n_788531324[h_788531372].Field2 == key_p1))) {
          t_p0.counter -= 1;
          }
          else {
            var j_788531697 = ((-1) - rawGetKnownHC__OOZsrcZmargraveZelement_u1826(t_p0, n_788531324[h_788531372].Field2, n_788531324[h_788531372].Field0));
            Temporary3 = n_788531324[h_788531372].Field2;
            n_788531324[h_788531372].Field2 = null;
            Temporary4 = n_788531324[h_788531372].Field3;
            n_788531324[h_788531372].Field3 = null;
            rawInsert__OOZsrcZmargraveZelement_u1548(t_p0, t_p0, "data", Temporary3, Temporary4, n_788531324[h_788531372].Field0, j_788531697);
          }
          
          }
          
          h_788531372 = nxt_788531432;
        }
    };
  };

  
}

function pop__OOZsrcZmargraveZparserZutils_u235(t_p0, key_p1, val_p2, val_p2_Idx) {
    var Temporary1;

  var result_1207959793 = false;

    var hc_1207959794 = [0];
    var index_1207959809 = rawGet__OOZsrcZmargraveZelement_u710(t_p0, key_p1, hc_1207959794, 0);
    result_1207959793 = (0 <= index_1207959809);
    if (result_1207959793) {
    Temporary1 = t_p0.data[index_1207959809].Field3;
    t_p0.data[index_1207959809].Field3 = null;
    val_p2[val_p2_Idx] = Temporary1;
    del__OOZsrcZmargraveZelement_u2165(t_p0, key_p1);
    }
    

  return result_1207959793;

}

function insert__OOZsrcZmargraveZparserZutils_u374(x_p0, x_p0_Idx, item_p1, i_p2) {
    var it_1207959951 = null;
    x_p0[x_p0_Idx] = x_p0[x_p0_Idx] || []; x_p0[x_p0_Idx].splice(i_p2, 0, it_1207959951);
    x_p0[x_p0_Idx][i_p2] = item_p1;

  
}

function setLinkDefault__OOZsrcZmargraveZparserZutils_u23(elem_p0, link_p1) {
    var Temporary1;
      var Temporary2;
      var Temporary3;
        var Temporary4;
        var Temporary5;
      var Temporary6;
          var Temporary7;
        var Temporary8;
          var Temporary9;
        var Temporary10;
                var Temporary14;
          var Temporary15;
          var Temporary16;
        var Temporary17;

    var Temporary1 = elem_p0;
    if (ConstSet39[Temporary1.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary1.isText, NTI33554466)); }
    switch (Temporary1.tag) {
    case 23:
      attrEscaped__OOZsrcZmargraveZelement_u2055(elem_p0, "href", link_p1.url);
      break;
    case 21:
      var firstUrl_1207959578 = link_p1.url;
      if ((((4 <= ((firstUrl_1207959578) == null ? 0 : (firstUrl_1207959578).length)) && contains__OOZsrcZmargraveZparserZutils_u90([".mp4", ".m4v", ".mov", ".ogv"], HEX5BHEX5D__OOZsrcZmargraveZcommon_u37(firstUrl_1207959578, HEX2EHEX2E__OOZsrcZmargraveZparserZutils_u29(4, 1)))) || ((5 <= ((firstUrl_1207959578) == null ? 0 : (firstUrl_1207959578).length)) && (HEX5BHEX5D__OOZsrcZmargraveZcommon_u37(firstUrl_1207959578, HEX2EHEX2E__OOZsrcZmargraveZparserZutils_u29(5, 1)) == ".webm")))) {
      var Temporary2 = elem_p0;
      if (ConstSet40[Temporary2.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary2.isText, NTI33554466)); }
      Temporary2.tag = 25;
      }
      else {
      if ((((4 <= ((firstUrl_1207959578) == null ? 0 : (firstUrl_1207959578).length)) && contains__OOZsrcZmargraveZparserZutils_u90([".mp3", ".oga", ".ogg", ".wav"], HEX5BHEX5D__OOZsrcZmargraveZcommon_u37(firstUrl_1207959578, HEX2EHEX2E__OOZsrcZmargraveZparserZutils_u29(4, 1)))) || ((5 <= ((firstUrl_1207959578) == null ? 0 : (firstUrl_1207959578).length)) && (HEX5BHEX5D__OOZsrcZmargraveZcommon_u37(firstUrl_1207959578, HEX2EHEX2E__OOZsrcZmargraveZparserZutils_u29(5, 1)) == ".flac")))) {
      var Temporary3 = elem_p0;
      if (ConstSet41[Temporary3.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary3.isText, NTI33554466)); }
      Temporary3.tag = 26;
      }
      }
        var Temporary4 = elem_p0;
        if (ConstSet42[Temporary4.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary4.isText, NTI33554466)); }
      if (!((Temporary4.tag == 21))) {
      attr__OOZsrcZmargraveZelement_u601(elem_p0, "controls", "");
      var altText_1207959750 = [null];
        var Temporary5 = elem_p0;
        if (ConstSet43[Temporary5.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'attrs\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary5.isText, NTI33554466)); }
      if (pop__OOZsrcZmargraveZparserZutils_u235(Temporary5.attrs, "alt", altText_1207959750, 0)) {
      var Temporary6 = elem_p0;
      if (ConstSet44[Temporary6.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary6.isText, NTI33554466)); }
      Temporary6.content = nimCopy(null, [newStr__OOZsrcZmargraveZelement_u57(altText_1207959750[0])], NTI788529243);
      }
      
      }
      
      if (((link_p1.altUrls).length == 0)) {
      attrEscaped__OOZsrcZmargraveZelement_u2055(elem_p0, "src", link_p1.url);
      }
      else {
        var sourceAttr_1207959911 = null;
          var Temporary7 = elem_p0;
          if (ConstSet45[Temporary7.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary7.isText, NTI33554466)); }
        if ((Temporary7.tag == 21)) {
        var Temporary8 = elem_p0;
        if (ConstSet46[Temporary8.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary8.isText, NTI33554466)); }
        Temporary8.tag = 24;
        sourceAttr_1207959911 = "srcset";
        }
        else {
          sourceAttr_1207959911 = "src";
        }
        
        var i_1207959916 = 0;
          var Temporary9 = elem_p0;
          if (ConstSet47[Temporary9.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary9.isText, NTI33554466)); }
        if (!((Temporary9.tag == 24))) {
        var srcElemHEX60gensym17_1207959925 = newElem__OOZsrcZmargraveZelement_u114(27, []);
        attrEscaped__OOZsrcZmargraveZelement_u2055(srcElemHEX60gensym17_1207959925, sourceAttr_1207959911, link_p1.url);
        var Temporary10 = elem_p0;
        if (ConstSet48[Temporary10.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary10.isText, NTI33554466)); }
        insert__OOZsrcZmargraveZparserZutils_u374(Temporary10, "content", srcElemHEX60gensym17_1207959925, i_1207959916);
        i_1207959916 += 1;
        }
        
        Label11: {
          var alt_1207959976 = null;
          var i_570427545 = 0;
          var L_570427546 = (link_p1.altUrls).length;
          Label12: {
              Label13: while (true) {
              if (!(i_570427545 < L_570427546)) break Label13;
                alt_1207959976 = link_p1.altUrls[i_570427545];
                var srcElemHEX60gensym22_1207959978 = newElem__OOZsrcZmargraveZelement_u114(27, []);
                attrEscaped__OOZsrcZmargraveZelement_u2055(srcElemHEX60gensym22_1207959978, sourceAttr_1207959911, alt_1207959976);
                var Temporary14 = elem_p0;
                if (ConstSet49[Temporary14.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary14.isText, NTI33554466)); }
                insert__OOZsrcZmargraveZparserZutils_u374(Temporary14, "content", srcElemHEX60gensym22_1207959978, i_1207959916);
                i_1207959916 += 1;
                i_570427545 += 1;
              }
          };
        };
          var Temporary15 = elem_p0;
          if (ConstSet50[Temporary15.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary15.isText, NTI33554466)); }
        if ((Temporary15.tag == 24)) {
        var imgElem_1207959994 = newElem__OOZsrcZmargraveZelement_u114(21, []);
        attrEscaped__OOZsrcZmargraveZelement_u2055(imgElem_1207959994, "src", link_p1.url);
        var altText_1207959995 = [null];
          var Temporary16 = elem_p0;
          if (ConstSet51[Temporary16.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'attrs\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary16.isText, NTI33554466)); }
        if (pop__OOZsrcZmargraveZparserZutils_u235(Temporary16.attrs, "alt", altText_1207959995, 0)) {
        attr__OOZsrcZmargraveZelement_u601(imgElem_1207959994, "alt", altText_1207959995[0]);
        }
        
        var Temporary17 = elem_p0;
        if (ConstSet52[Temporary17.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary17.isText, NTI33554466)); }
        Temporary17.content.push(imgElem_1207959994);;
        }
        
      }
      
      break;
    default: 
      attrEscaped__OOZsrcZmargraveZelement_u2055(elem_p0, "src", link_p1.url);
      break;
    }

  
}

function setLink__converter_u470(parser_p0, elem_p2, link_p3) {
      var options_570425826 = nimCopy(null, parser_p0.options, NTI1191182340);
    if (!((options_570425826.setLinkHandler == null))) {
    options_570425826.setLinkHandler(elem_p2, link_p3);
    }
    else {
    setLinkDefault__OOZsrcZmargraveZparserZutils_u23(elem_p2, link_p3);
    }
    

  
}

function add__converter_u502(x_p0, x_p0_Idx) {
    if (null != "[") { if (null == x_p0[x_p0_Idx]) x_p0[x_p0_Idx] = "["; else x_p0[x_p0_Idx] += "["; };

  
}

function add__converter_u511(x_p0, x_p0_Idx) {
    if (null != "]") { if (null == x_p0[x_p0_Idx]) x_p0[x_p0_Idx] = "]"; else x_p0[x_p0_Idx] += "]"; };

  
}

function escapeHtmlChar__OOZsrcZmargraveZparserZutils_u7(ch_p0) {
    var Temporary1;

  var result_1207959561 = null;

    switch (ch_p0) {
    case 60:
      Temporary1 = "&lt;";
      break;
    case 62:
      Temporary1 = "&gt;";
      break;
    case 38:
      Temporary1 = "&amp;";
      break;
    default: 
      Temporary1 = String.fromCharCode(ch_p0);
      break;
    }
    result_1207959561 = Temporary1;

  return result_1207959561;

}

function parseReferenceName__converter_u488(parser_p0, failed_p2, failed_p2_Idx) {
              var Temporary4;
              var Temporary5;
              var Temporary6;

  var result_570425837 = [null];

  BeforeRet: {
    result_570425837[0] = "";
    var openbracks_570425838 = 1;
    var escaped_570425839 = false;
    Label1: {
      var ch_570425840 = 0;
      Label2: {
          Label3: while (true) {
          if (!(parser_p0.pos < ((parser_p0.str) == null ? 0 : (parser_p0.str).length))) break Label3;
            ch_570425840 = parser_p0.str.charCodeAt((parser_p0.pos + 0));
            if (!(escaped_570425839)) {
            switch (ch_570425840) {
            case 92:
              escaped_570425839 = true;
              break;
            case 91:
              openbracks_570425838 += 1;
              add__converter_u502(result_570425837, 0);
              break;
            case 93:
              openbracks_570425838 -= 1;
              if ((openbracks_570425838 == 0)) {
              break BeforeRet;
              }
              else {
              add__converter_u511(result_570425837, 0);
              }
              
              break;
            case 10:
              failed_p2[failed_p2_Idx] = true;
              break BeforeRet;
              break;
            default: 
              if (null != (Temporary4 = escapeHtmlChar__OOZsrcZmargraveZparserZutils_u7(ch_570425840), Temporary4)) { if (null == result_570425837[0]) result_570425837[0] = Temporary4; else result_570425837[0] += Temporary4; };
              break;
            }
            }
            else {
              switch (ch_570425840) {
              case 92:
              case 91:
              case 93:
                Temporary5 = String.fromCharCode(ch_570425840);
                break;
              default: 
                Temporary5 = ("\\\\" + escapeHtmlChar__OOZsrcZmargraveZparserZutils_u7(ch_570425840));
                break;
              }
              if (null != (Temporary6 = Temporary5, Temporary6)) { if (null == result_570425837[0]) result_570425837[0] = Temporary6; else result_570425837[0] += Temporary6; };
              escaped_570425839 = false;
            }
            
            parser_p0.pos += 1;
          }
      };
    };
    failed_p2[failed_p2_Idx] = true;
  };

  return result_570425837[0];

}

function rawGet__converter_u608(t_p0, key_p1, hc_p2, hc_p2_Idx) {
  var result_570425958 = 0;

  BeforeRet: {
    hc_p2[hc_p2_Idx] = hash__pureZhashes_u794(key_p1);
    if ((hc_p2[hc_p2_Idx] == 0)) {
    hc_p2[hc_p2_Idx] = 314159265;
    }
    
    if (((t_p0.data).length == 0)) {
    result_570425958 = (-1);
    break BeforeRet;
    }
    
    var h_570425972 = (hc_p2[hc_p2_Idx] & (t_p0.data).length - 1);
    Label1: {
        Label2: while (true) {
        if (!isFilled__pureZcollectionsZtables_u31(t_p0.data[h_570425972].Field0)) break Label2;
          if (((t_p0.data[h_570425972].Field0 == hc_p2[hc_p2_Idx]) && (t_p0.data[h_570425972].Field1 == key_p1))) {
          result_570425958 = h_570425972;
          break BeforeRet;
          }
          
          h_570425972 = nextTry__pureZcollectionsZtables_u34(h_570425972, (t_p0.data).length - 1);
        }
    };
    result_570425958 = ((-1) - h_570425972);
  };

  return result_570425958;

}

function mustRehash__converter_u677(t_p0) {
  var result_570426024 = false;

    result_570426024 = (((t_p0.data).length < (t_p0.counter + Math.trunc(t_p0.counter / 2))) || (((t_p0.data).length - t_p0.counter) < 4));

  return result_570426024;

}

function rawInsert__converter_u752(t_p0, data_p1, data_p1_Idx, key_p2, val_p3, hc_p4, h_p5) {
    data_p1[data_p1_Idx][h_p5].Field1 = key_p2;
    data_p1[data_p1_Idx][h_p5].Field2 = nimCopy(null, val_p3, NTI1191182351);
    data_p1[data_p1_Idx][h_p5].Field0 = hc_p4;

  
}

function enlarge__converter_u710(t_p0) {
    var n_570426060 = [];
    n_570426060 = new Array(((t_p0.data).length * 2)); for (var i = 0 ; i < ((t_p0.data).length * 2) ; ++i) { n_570426060[i] = {Field0: 0, Field1: null, Field2: []}; }    var HEX3Atmp_570427564 = nimCopy(null, t_p0.data, NTI1191182360);
    t_p0.data = n_570426060;
    n_570426060 = HEX3Atmp_570427564;
    Label1: {
      var i_570426084 = 0;
      var colontmp__570427560 = 0;
      colontmp__570427560 = (n_570426060).length - 1;
      var res_570427562 = 0;
      Label2: {
          Label3: while (true) {
          if (!(res_570427562 <= colontmp__570427560)) break Label3;
            i_570426084 = res_570427562;
            var eh_570426085 = n_570426060[i_570426084].Field0;
            if (isFilled__pureZcollectionsZtables_u31(eh_570426085)) {
            var j_570426089 = (eh_570426085 & (t_p0.data).length - 1);
            Label4: {
                Label5: while (true) {
                if (!isFilled__pureZcollectionsZtables_u31(t_p0.data[j_570426089].Field0)) break Label5;
                  j_570426089 = nextTry__pureZcollectionsZtables_u34(j_570426089, (t_p0.data).length - 1);
                }
            };
            rawInsert__converter_u752(t_p0, t_p0, "data", n_570426060[i_570426084].Field1, n_570426060[i_570426084].Field2, eh_570426085, j_570426089);
            }
            
            res_570427562 += 1;
          }
      };
    };

  
}

function rawGetKnownHC__converter_u762(t_p0, key_p1, hc_p2) {
  var result_570426112 = 0;

  BeforeRet: {
    if (((t_p0.data).length == 0)) {
    result_570426112 = (-1);
    break BeforeRet;
    }
    
    var h_570426123 = (hc_p2 & (t_p0.data).length - 1);
    Label1: {
        Label2: while (true) {
        if (!isFilled__pureZcollectionsZtables_u31(t_p0.data[h_570426123].Field0)) break Label2;
          if (((t_p0.data[h_570426123].Field0 == hc_p2) && (t_p0.data[h_570426123].Field1 == key_p1))) {
          result_570426112 = h_570426123;
          break BeforeRet;
          }
          
          h_570426123 = nextTry__pureZcollectionsZtables_u34(h_570426123, (t_p0.data).length - 1);
        }
    };
    result_570426112 = ((-1) - h_570426123);
  };

  return result_570426112;

}

function mgetOrPut__converter_u582(t_p0, key_p1, val_p2) {
  var result_570425932 = null;
  var result_570425932_Idx = 0;

    if (((t_p0.data).length == 0)) {
    var correctSizeHEX60gensym32_570425942 = slotsNeeded__pureZcollectionsZtables_u42(32);
    t_p0.counter = 0;
    t_p0.data = new Array(correctSizeHEX60gensym32_570425942); for (var i = 0 ; i < correctSizeHEX60gensym32_570425942 ; ++i) { t_p0.data[i] = {Field0: 0, Field1: null, Field2: []}; }    }
    
    var hc_570425951 = [0];
    var index_570426007 = rawGet__converter_u608(t_p0, key_p1, hc_570425951, 0);
    if ((index_570426007 < 0)) {
    if (((t_p0.data).length == 0)) {
    var correctSizeHEX60gensym37_570426016 = slotsNeeded__pureZcollectionsZtables_u42(32);
    t_p0.counter = 0;
    t_p0.data = new Array(correctSizeHEX60gensym37_570426016); for (var i = 0 ; i < correctSizeHEX60gensym37_570426016 ; ++i) { t_p0.data[i] = {Field0: 0, Field1: null, Field2: []}; }    }
    
    if (mustRehash__converter_u677(t_p0)) {
    enlarge__converter_u710(t_p0);
    index_570426007 = rawGetKnownHC__converter_u762(t_p0, key_p1, hc_570425951[0]);
    }
    
    index_570426007 = ((-1) - index_570426007);
    rawInsert__converter_u752(t_p0, t_p0, "data", key_p1, val_p2, hc_570425951[0], index_570426007);
    t_p0.counter += 1;
    }
    
    result_570425932 = t_p0.data[index_570426007]; result_570425932_Idx = "Field2";

  return [result_570425932, result_570425932_Idx];

}

function parseBracket__converter_u271(parser_p0, image_p2, singleLine_p3) {
    var Temporary1;
      var Temporary2;
        var Temporary3;
        var Temporary4;
    var Temporary5;
    var Temporary6;
    var Temporary7;
    var Temporary8;
      var Temporary9;
      var Temporary10;
        var Temporary11;
        var Temporary12;
      var Temporary13;
    var Temporary14;

  var result_570425621 = null;

  BeforeRet: {
    var canBeSub_570425622 = (!(image_p2) && !(prevWhitespace__OOZsrcZmargraveZparserZutils_u638(parser_p0, (-1))));
    var firstPos_570425623 = parser_p0.pos;
    var tmpTuple_570425630 = parseDelimed__converter_u134(parser_p0, [93], singleLine_p3);
    var textWorked_570425631 = tmpTuple_570425630["Field0"];
    var textElems_570425632 = nimCopy(null, tmpTuple_570425630["Field1"], NTI1023410270);
    parser_p0.pos += 1;
    var secondPos_570425638 = (parser_p0.pos - 2);
    if (!((textWorked_570425631 == 0))) {
    result_570425621 = newElem__OOZsrcZmargraveZelement_u114(0, textElems_570425632);
    break BeforeRet;
    }
    
      if (!((!(image_p2) && ((textElems_570425632).length == 1)) && textElems_570425632[0].isText)) Temporary2 = false; else {        var Temporary3 = textElems_570425632[0];
        if (ConstSet33[Temporary3.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary3.isText, NTI33554466)); }
        Temporary2 = ((((Temporary4 = Temporary3.str, Temporary4)) == null ? 0 : (Temporary4).length) == 1);      }    if (Temporary2) {
    var Temporary5 = textElems_570425632[0];
    if (ConstSet34[Temporary5.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary5.isText, NTI33554466)); }
    switch ((Temporary6 = Temporary5.str, Temporary6).charCodeAt(0)) {
    case 32:
      Temporary7 = 1;
      break;
    case 120:
      Temporary7 = 2;
      break;
    default: 
      Temporary7 = 0;
      break;
    }
    Temporary1 = Temporary7;
    }
    else {
    Temporary1 = 0;
    }
    
    var checkMark_570425647 = Temporary1;
    if ((parser_p0.pos < ((parser_p0.str) == null ? 0 : (parser_p0.str).length))) {
    var initialPos_570425648 = parser_p0.pos;
    if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 40, 0)) {
    var tmpTuple_570425803 = parseLink__converter_u324(parser_p0, false);
    var linkWorked_570425804 = tmpTuple_570425803["Field0"];
    var link_570425805 = nimCopy(null, tmpTuple_570425803["Field1"], NTI1191182339);
    if (linkWorked_570425804) {
    if ((((((link_570425805.url) == null ? 0 : (link_570425805.url).length) == 0) && ((textElems_570425632).length == 1)) && textElems_570425632[0].isText)) {
    var Temporary8 = textElems_570425632[0];
    if (ConstSet36[Temporary8.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary8.isText, NTI33554466)); }
    link_570425805.url = Temporary8.str.trim();
    }
    
    if (image_p2) {
    result_570425621 = {isText: false, tag: 21, attrs: ({data: [], counter: 0, first: 0, last: 0}), content: [], str: null};
    if ((0 < (secondPos_570425638 - firstPos_570425623))) {
    attrEscaped__OOZsrcZmargraveZelement_u2055(result_570425621, "alt", HEX5BHEX5D__OOZsrcZmargraveZcommon_u22(parser_p0.str, HEX2EHEX2E__stdZstrbasics_u48(firstPos_570425623, secondPos_570425638)));
    }
    
    }
    else {
      result_570425621 = {isText: false, tag: 23, attrs: ({data: [], counter: 0, first: 0, last: 0}), content: [], str: null};
      var Temporary9 = result_570425621;
      if (ConstSet38[Temporary9.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary9.isText, NTI33554466)); }
      Temporary9.content = nimCopy(null, textElems_570425632, NTI1023410270);
    }
    
    if (!((((link_570425805.tip) == null ? 0 : (link_570425805.tip).length) == 0))) {
    attrEscaped__OOZsrcZmargraveZelement_u2055(result_570425621, "title", link_570425805.tip);
    }
    
    setLink__converter_u470(parser_p0, result_570425621, link_570425805);
    break BeforeRet;
    }
    else {
      parser_p0.pos = initialPos_570425648;
    }
    
    }
    else {
    if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 91, 0)) {
    var refNameFailed_570425831 = [false];
    var refName_570425859 = parseReferenceName__converter_u488(parser_p0, refNameFailed_570425831, 0);
    if (refNameFailed_570425831[0]) {
    parser_p0.pos = initialPos_570425648;
    }
    else {
      if ((((refName_570425859) == null ? 0 : (refName_570425859).length) == 0)) {
      refName_570425859 = HEX5BHEX5D__OOZsrcZmargraveZcommon_u22(parser_p0.str, HEX2EHEX2E__stdZstrbasics_u48(firstPos_570425623, secondPos_570425638));
      }
      
      result_570425621 = {isText: false, tag: 0, attrs: ({data: [], counter: 0, first: 0, last: 0}), content: [], str: null};
      if (image_p2) {
      var Temporary10 = result_570425621;
      if (ConstSet53[Temporary10.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary10.isText, NTI33554466)); }
      Temporary10.tag = 21;
      if ((0 < (secondPos_570425638 - firstPos_570425623))) {
      attrEscaped__OOZsrcZmargraveZelement_u2055(result_570425621, "alt", HEX5BHEX5D__OOZsrcZmargraveZcommon_u22(parser_p0.str, HEX2EHEX2E__stdZstrbasics_u48(firstPos_570425623, secondPos_570425638)));
      }
      
      }
      else {
        var Temporary11 = result_570425621;
        if (ConstSet54[Temporary11.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary11.isText, NTI33554466)); }
        Temporary11.tag = 23;
        var Temporary12 = result_570425621;
        if (ConstSet55[Temporary12.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary12.isText, NTI33554466)); }
        Temporary12.content = nimCopy(null, textElems_570425632, NTI1023410270);
      }
      
      (Temporary13 = mgetOrPut__converter_u582(parser_p0.linkReferrers, refName_570425859, []), Temporary13)[0][Temporary13[1]].push(result_570425621);;
      break BeforeRet;
    }
    
    }
    else {
    parser_p0.pos -= 1;
    }
    }
    }
    
    if (image_p2) {
    result_570425621 = newElem__OOZsrcZmargraveZelement_u114(0, textElems_570425632);
    }
    else {
    if ((checkMark_570425647 == 0)) {
    if (canBeSub_570425622) {
    Temporary14 = 14;
    }
    else {
      parser_p0.pos -= 1;
    Temporary14 = 0;
    }
    
    result_570425621 = newElem__OOZsrcZmargraveZelement_u114(Temporary14, textElems_570425632);
    }
    else {
      result_570425621 = newElem__OOZsrcZmargraveZelement_u114(22, []);
      attr__OOZsrcZmargraveZelement_u601(result_570425621, "type", "checkbox");
      attr__OOZsrcZmargraveZelement_u601(result_570425621, "disabled", "");
      if ((checkMark_570425647 == 2)) {
      attr__OOZsrcZmargraveZelement_u601(result_570425621, "checked", "");
      }
      
    }
    }
  };

  return result_570425621;

}

function bracket__converter_u267(image_p0, parser_p1) {
      var Temporary1;
    var Temporary2;
    var Temporary3;
    var Temporary4;

  var result_570425614 = 0;

    var elem_570426222 = parseBracket__converter_u271(parser_p1, image_p0, this.singleLine0);
      var Temporary1 = elem_570426222;
      if (ConstSet56[Temporary1.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary1.isText, NTI33554466)); }
    if ((Temporary1.tag == 0)) {
    var Temporary2 = this.lastStr2;
    if (ConstSet57[Temporary2.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary2.isText, NTI33554466)); }
    if (image_p0) {
    Temporary3 = "![";
    }
    else {
    Temporary3 = "[";
    }
    
    if (null != Temporary3) { if (null == Temporary2.str) Temporary2.str = Temporary3; else Temporary2.str += Temporary3; };
    var Temporary4 = elem_570426222;
    if (ConstSet58[Temporary4.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary4.isText, NTI33554466)); }
    add__OOZsrcZmargraveZelement_u2796(this, "elems1", Temporary4.content);
    this.lastStr2 = newStr__OOZsrcZmargraveZelement_u57("");
    this.elems1.push(this.lastStr2);;
    }
    else {
      this.elems1.push(elem_570426222);;
      this.lastStr2 = newStr__OOZsrcZmargraveZelement_u57("");
      this.elems1.push(this.lastStr2);;
    }
    
    result_570425614 = 0;

  return result_570425614;

}

function add__converter_u1120(x_p0, x_p0_Idx) {
    if (null != "{") { if (null == x_p0[x_p0_Idx]) x_p0[x_p0_Idx] = "{"; else x_p0[x_p0_Idx] += "{"; };

  
}

function add__converter_u1147(x_p0, x_p0_Idx) {
    if (null != "}") { if (null == x_p0[x_p0_Idx]) x_p0[x_p0_Idx] = "}"; else x_p0[x_p0_Idx] += "}"; };

  
}

function parseCurly__converter_u1124(parser_p0) {
    var Temporary1;
    var Temporary2;
              var Temporary6;
              var Temporary7;
              var Temporary8;
              var Temporary9;

  var result_570426472 = [null];

  BeforeRet: {
    result_570426472[0] = "";
    if (!nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 33, 0)) Temporary2 = false; else {      Temporary2 = !({curlyNoHtmlEscape: false, insertLineBreaks: false, inlineHtmlHandler: null, codeBlockLanguageHandler: null, setLinkHandler: null, disableLineEscaping: false, disableTextAlignExtension: false, disableCurly: false, disableRawCurly: false, disableCodeFormat: false}.disableRawCurly);    }    if (Temporary2) Temporary1 = true; else {      Temporary1 = parser_p0.options.curlyNoHtmlEscape;    }    var noHtmlEscape_570426473 = Temporary1;
    var opencurlys_570426474 = 1;
    var escaped_570426475 = false;
    Label3: {
      var ch_570426476 = 0;
      Label4: {
          Label5: while (true) {
          if (!(parser_p0.pos < ((parser_p0.str) == null ? 0 : (parser_p0.str).length))) break Label5;
            ch_570426476 = parser_p0.str.charCodeAt((parser_p0.pos + 0));
            if (!(escaped_570426475)) {
            switch (ch_570426476) {
            case 92:
              escaped_570426475 = true;
              break;
            case 123:
              opencurlys_570426474 += 1;
              add__converter_u1120(result_570426472, 0);
              break;
            case 125:
              opencurlys_570426474 -= 1;
              if ((opencurlys_570426474 == 0)) {
              break BeforeRet;
              }
              else {
              add__converter_u1147(result_570426472, 0);
              }
              
              break;
            default: 
              if (noHtmlEscape_570426473) {
              Temporary6 = String.fromCharCode(ch_570426476);
              }
              else {
              Temporary6 = escapeHtmlChar__OOZsrcZmargraveZparserZutils_u7(ch_570426476);
              }
              
              if (null != (Temporary7 = Temporary6, Temporary7)) { if (null == result_570426472[0]) result_570426472[0] = Temporary7; else result_570426472[0] += Temporary7; };
              break;
            }
            }
            else {
              switch (ch_570426476) {
              case 62:
              case 60:
              case 38:
                Temporary8 = escapeHtmlChar__OOZsrcZmargraveZparserZutils_u7(ch_570426476);
                break;
              case 92:
              case 125:
              case 123:
                Temporary8 = String.fromCharCode(ch_570426476);
                break;
              default: 
                Temporary8 = ("\\\\" + String.fromCharCode(ch_570426476));
                break;
              }
              if (null != (Temporary9 = Temporary8, Temporary9)) { if (null == result_570426472[0]) result_570426472[0] = Temporary9; else result_570426472[0] += Temporary9; };
              escaped_570426475 = false;
            }
            
            parser_p0.pos += 1;
          }
      };
    };
  };

  return result_570426472[0];

}

function parseCodePreformat__converter_u1173(parser_p0, delim_p2) {
  var result_570426522 = {Field0: 0, Field1: null};

  BeforeRet: {
    var s_570426523 = [[]];
    Label1: {
      var ch_570426524 = 0;
      Label2: {
          Label3: while (true) {
          if (!(parser_p0.pos < ((parser_p0.str) == null ? 0 : (parser_p0.str).length))) break Label3;
            ch_570426524 = parser_p0.str.charCodeAt((parser_p0.pos + 0));
            if (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, delim_p2, 0)) {
            parser_p0.pos -= 1;
            var colontmp__570427569 = 0;
            var colontmp__570427570 = newElem__OOZsrcZmargraveZelement_u114(18, [newStr__OOZsrcZmargraveZelement_u57(toJSStr(s_570426523[0]))]);
            result_570426522 = nimCopy(result_570426522, {Field0: colontmp__570427569, Field1: colontmp__570427570}, NTI1023410261);
            break BeforeRet;
            }
            else {
            add__system_u1954(s_570426523, 0, escapeHtmlChar__OOZsrcZmargraveZparserZutils_u7(ch_570426524));
            }
            
            parser_p0.pos += 1;
          }
      };
    };
    var colontmp__570427572 = 1;
    var colontmp__570427573 = newElem__OOZsrcZmargraveZelement_u114(18, [newStr__OOZsrcZmargraveZelement_u57(toJSStr(s_570426523[0]))]);
    result_570426522 = nimCopy(result_570426522, {Field0: colontmp__570427572, Field1: colontmp__570427573}, NTI1023410261);
  };

  return result_570426522;

}

function noAdjacentWhitespace__OOZsrcZmargraveZparserZutils_u664(parser_p0, offset_p1) {
  var result_1207960219 = false;

    result_1207960219 = (!(prevWhitespace__OOZsrcZmargraveZparserZutils_u638(parser_p0, offset_p1)) && !(nextWhitespace__OOZsrcZmargraveZparserZutils_u648(parser_p0, offset_p1)));

  return result_1207960219;

}

function onlyPrevWhitespace__OOZsrcZmargraveZparserZutils_u656(parser_p0, offset_p1) {
  var result_1207960211 = false;

    result_1207960211 = (prevWhitespace__OOZsrcZmargraveZparserZutils_u638(parser_p0, offset_p1) && !(nextWhitespace__OOZsrcZmargraveZparserZutils_u648(parser_p0, offset_p1)));

  return result_1207960211;

}

function ssClose__pureZstreams_u1130(s_p0) {
    var s_1275069548 = s_p0;
    s_1275069548.data = nimCopy(null, [], NTI33554449);

  
}

function ssAtEnd__pureZstreams_u777(s_p0) {
  var result_1275069195 = false;

  BeforeRet: {
    var s_1275069196 = s_p0;
    result_1275069195 = ((s_1275069196.data).length <= s_1275069196.pos);
    break BeforeRet;
  };

  return result_1275069195;

}

function clamp__pureZstreams_u817(x_p0, a_p1, b_p2) {
  var result_1275069238 = 0;

  BeforeRet: {
    if ((x_p0 < a_p1)) {
    result_1275069238 = a_p1;
    break BeforeRet;
    }
    
    if ((b_p2 < x_p0)) {
    result_1275069238 = b_p2;
    break BeforeRet;
    }
    
    result_1275069238 = x_p0;
    break BeforeRet;
  };

  return result_1275069238;

}

function ssSetPosition__pureZstreams_u813(s_p0, pos_p1) {
    var s_1275069232 = s_p0;
    s_1275069232.pos = clamp__pureZstreams_u817(pos_p1, 0, (s_1275069232.data).length);

  
}

function ssGetPosition__pureZstreams_u823(s_p0) {
  var result_1275069241 = 0;

  BeforeRet: {
    var s_1275069242 = s_p0;
    result_1275069241 = s_1275069242.pos;
    break BeforeRet;
  };

  return result_1275069241;

}

function HEX5BHEX5DHEX3D__pureZstrutils_u1166(s_p0, s_p0_Idx, x_p1, b_p2) {
    var a_1040188565 = x_p1.a;
    var L_1040188567 = ((x_p1.b - a_1040188565) + 1);
    if ((L_1040188567 == (b_p2).length)) {
    Label1: {
      var i_1040188572 = 0;
      var i_570427578 = 0;
      Label2: {
          Label3: while (true) {
          if (!(i_570427578 < L_1040188567)) break Label3;
            i_1040188572 = i_570427578;
            s_p0[s_p0_Idx][(i_1040188572 + a_1040188565)] = b_p2[i_1040188572];
            i_570427578 += 1;
          }
      };
    };
    }
    else {
      var shiftHEX60gensym107_1040188578 = ((b_p2).length - nimMax(0, L_1040188567));
      var newLenHEX60gensym107_1040188579 = ((s_p0[s_p0_Idx]).length + shiftHEX60gensym107_1040188578);
      if ((0 < shiftHEX60gensym107_1040188578)) {
      if (s_p0[s_p0_Idx].length < newLenHEX60gensym107_1040188579) { for (var i = s_p0[s_p0_Idx].length; i < newLenHEX60gensym107_1040188579; ++i) s_p0[s_p0_Idx].push(0); }
         else {s_p0[s_p0_Idx].length = newLenHEX60gensym107_1040188579; };
      Label4: {
        var iHEX60gensym107_1040188585 = 0;
        var colontmp__570427581 = 0;
        var colontmp__570427582 = 0;
        colontmp__570427581 = (newLenHEX60gensym107_1040188579 - 1);
        colontmp__570427582 = (a_1040188565 + (b_p2).length);
        var res_570427584 = colontmp__570427581;
        Label5: {
            Label6: while (true) {
            if (!(colontmp__570427582 <= res_570427584)) break Label6;
              iHEX60gensym107_1040188585 = res_570427584;
              s_p0[s_p0_Idx][iHEX60gensym107_1040188585] = s_p0[s_p0_Idx][(iHEX60gensym107_1040188585 - shiftHEX60gensym107_1040188578)];
              res_570427584 -= 1;
            }
        };
      };
      }
      else {
        Label7: {
          var iHEX60gensym107_1040188591 = 0;
          var colontmp__570427587 = 0;
          var colontmp__570427588 = 0;
          colontmp__570427587 = (a_1040188565 + (b_p2).length);
          colontmp__570427588 = (newLenHEX60gensym107_1040188579 - 1);
          var res_570427589 = colontmp__570427587;
          Label8: {
              Label9: while (true) {
              if (!(res_570427589 <= colontmp__570427588)) break Label9;
                iHEX60gensym107_1040188591 = res_570427589;
                s_p0[s_p0_Idx][iHEX60gensym107_1040188591] = s_p0[s_p0_Idx][(iHEX60gensym107_1040188591 - shiftHEX60gensym107_1040188578)];
                res_570427589 += 1;
              }
          };
        };
        if (s_p0[s_p0_Idx].length < newLenHEX60gensym107_1040188579) { for (var i = s_p0[s_p0_Idx].length; i < newLenHEX60gensym107_1040188579; ++i) s_p0[s_p0_Idx].push(0); }
         else {s_p0[s_p0_Idx].length = newLenHEX60gensym107_1040188579; };
      }
      
      Label10: {
        var iHEX60gensym107_1040188596 = 0;
        var colontmp__570427592 = 0;
        colontmp__570427592 = (b_p2).length;
        var i_570427593 = 0;
        Label11: {
            Label12: while (true) {
            if (!(i_570427593 < colontmp__570427592)) break Label12;
              iHEX60gensym107_1040188596 = i_570427593;
              s_p0[s_p0_Idx][(a_1040188565 + iHEX60gensym107_1040188596)] = b_p2[iHEX60gensym107_1040188596];
              i_570427593 += 1;
            }
        };
      };
    }
    

  
}

function HEX5BHEX5D__pureZstrutils_u1274(s_p0, x_p1) {
  var result_1040188671 = [];

    var a_1040188673 = x_p1.a;
    var L_1040188675 = ((x_p1.b - a_1040188673) + 1);
    result_1040188671 = nimCopy(null, mnewString(L_1040188675), NTI33554449);
    Label1: {
      var i_1040188680 = 0;
      var i_570427596 = 0;
      Label2: {
          Label3: while (true) {
          if (!(i_570427596 < L_1040188675)) break Label3;
            i_1040188680 = i_570427596;
            result_1040188671[i_1040188680] = s_p0[(i_1040188680 + a_1040188673)];
            i_570427596 += 1;
          }
      };
    };

  return result_1040188671;

}

function ssReadDataStr__pureZstreams_u827(s_p0, buffer_p1, buffer_p1_Idx, slice_p2) {
  var result_1275069248 = 0;

    var s_1275069249 = s_p0;
    result_1275069248 = nimMin(((slice_p2.b + 1) - slice_p2.a), ((s_1275069249.data).length - s_1275069249.pos));
    if ((0 < result_1275069248)) {
    Label1: {
    };
    HEX5BHEX5DHEX3D__pureZstrutils_u1166(buffer_p1, buffer_p1_Idx, HEX2EHEX2E__stdZstrbasics_u48(slice_p2.a, (slice_p2.a + result_1275069248) - 1), HEX5BHEX5D__pureZstrutils_u1274(s_1275069249.data, HEX2EHEX2E__stdZstrbasics_u48(s_1275069249.pos, (s_1275069249.pos + result_1275069248) - 1)));
    s_1275069249.pos += result_1275069248;
    }
    else {
      result_1275069248 = 0;
    }
    

  return result_1275069248;

}

function ssReadData__pureZstreams_u929(s_p0, buffer_p1, buffer_p1_Idx, bufLen_p2) {
  var result_1275069349 = 0;

    var s_1275069350 = s_p0;
    result_1275069349 = nimMin(bufLen_p2, ((s_1275069350.data).length - s_1275069350.pos));
    if ((0 < result_1275069349)) {
++excHandler;
    try {
    HEX5BHEX5DHEX3D__pureZstrutils_u1166(buffer_p1, buffer_p1_Idx, HEX2EHEX2E__stdZstrbasics_u48(0, result_1275069349 - 1), HEX5BHEX5D__pureZstrutils_u1274(s_1275069350.data, HEX2EHEX2E__stdZstrbasics_u48(s_1275069350.pos, (s_1275069350.pos + result_1275069349) - 1)));
--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
    raiseDefect();
    raiseException({message: makeNimstrLit("could not read string stream, did you use a non-string buffer pointer?"), parent: getCurrentException(), m_type: NTI33555172, name: null, trace: [], up: null}, "Defect");
    lastJSError = prevJSError;
    } finally {
    }
    s_1275069350.pos += result_1275069349;
    }
    else {
      result_1275069349 = 0;
    }
    

  return result_1275069349;

}

function ssPeekData__pureZstreams_u1022(s_p0, buffer_p1, buffer_p1_Idx, bufLen_p2) {
  var result_1275069442 = 0;

    var s_1275069443 = s_p0;
    result_1275069442 = nimMin(bufLen_p2, ((s_1275069443.data).length - s_1275069443.pos));
    if ((0 < result_1275069442)) {
++excHandler;
    try {
    HEX5BHEX5DHEX3D__pureZstrutils_u1166(buffer_p1, buffer_p1_Idx, HEX2EHEX2E__stdZstrbasics_u48(0, result_1275069442 - 1), HEX5BHEX5D__pureZstrutils_u1274(s_1275069443.data, HEX2EHEX2E__stdZstrbasics_u48(s_1275069443.pos, (s_1275069443.pos + result_1275069442) - 1)));
--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
    raiseDefect();
    raiseException({message: makeNimstrLit("could not peek string stream, did you use a non-string buffer pointer?"), parent: getCurrentException(), m_type: NTI33555172, name: null, trace: [], up: null}, "Defect");
    lastJSError = prevJSError;
    } finally {
    }
    }
    else {
      result_1275069442 = 0;
    }
    

  return result_1275069442;

}

function ssWriteData__pureZstreams_u1074(s_p0, buffer_p1, buffer_p1_Idx, bufLen_p2) {
    var Temporary1;

  BeforeRet: {
    var s_1275069494 = s_p0;
    if ((bufLen_p2 <= 0)) {
    break BeforeRet;
    }
    
    if (((s_1275069494.data).length < (s_1275069494.pos + bufLen_p2))) {
    if (s_1275069494.data.length < (Temporary1 = (s_1275069494.pos + bufLen_p2), Temporary1)) { for (var i = s_1275069494.data.length; i < Temporary1; ++i) s_1275069494.data.push(0); }
         else {s_1275069494.data.length = Temporary1; };
    }
    
++excHandler;
    try {
    HEX5BHEX5DHEX3D__pureZstrutils_u1166(s_1275069494, "data", HEX2EHEX2E__stdZstrbasics_u48(s_1275069494.pos, (s_1275069494.pos + bufLen_p2) - 1), HEX5BHEX5D__pureZstrutils_u1274(buffer_p1[buffer_p1_Idx], HEX2EHEX2E__stdZstrbasics_u48(0, bufLen_p2 - 1)));
--excHandler;
} catch (EXCEPTION) {
 var prevJSError = lastJSError;
 lastJSError = EXCEPTION;
 --excHandler;
    raiseDefect();
    raiseException({message: makeNimstrLit("could not write to string stream, did you use a non-string buffer pointer?"), parent: getCurrentException(), m_type: NTI33555172, name: null, trace: [], up: null}, "Defect");
    lastJSError = prevJSError;
    } finally {
    }
    s_1275069494.pos += bufLen_p2;
  };

  
}

function newStringStream__pureZstreams_u1133(s_p0) {
  var result_1275069551 = null;

    result_1275069551 = ({m_type: NTI1275068945, data: [], pos: 0, closeImpl: null, atEndImpl: null, setPositionImpl: null, getPositionImpl: null, readDataStrImpl: null, readLineImpl: null, readDataImpl: null, peekDataImpl: null, writeDataImpl: null, flushImpl: null});
    result_1275069551.data = nimCopy(null, s_p0, NTI33554449);
    result_1275069551.pos = 0;
    result_1275069551.closeImpl = ssClose__pureZstreams_u1130;
    result_1275069551.atEndImpl = ssAtEnd__pureZstreams_u777;
    result_1275069551.setPositionImpl = ssSetPosition__pureZstreams_u813;
    result_1275069551.getPositionImpl = ssGetPosition__pureZstreams_u823;
    result_1275069551.readDataStrImpl = ssReadDataStr__pureZstreams_u827;
    result_1275069551.readDataImpl = ssReadData__pureZstreams_u929;
    result_1275069551.peekDataImpl = ssPeekData__pureZstreams_u1022;
    result_1275069551.writeDataImpl = ssWriteData__pureZstreams_u1074;

  return result_1275069551;

}

function setPosition__pureZstreams_u70(s_p0, pos_p1) {
    s_p0.setPositionImpl(s_p0, pos_p1);

  
}

function readData__pureZstreams_u78(s_p0, buffer_p1, buffer_p1_Idx, bufLen_p2) {
  var result_1275068498 = 0;

    result_1275068498 = s_p0.readDataImpl(s_p0, buffer_p1, buffer_p1_Idx, bufLen_p2);

  return result_1275068498;

}

function readDataStr__pureZstreams_u84(s_p0, buffer_p1, buffer_p1_Idx, slice_p2) {
  var result_1275068505 = 0;

    if (!((s_p0.readDataStrImpl == null))) {
    result_1275068505 = s_p0.readDataStrImpl(s_p0, buffer_p1, buffer_p1_Idx, slice_p2);
    }
    else {
      result_1275068505 = readData__pureZstreams_u78(s_p0, buffer_p1[buffer_p1_Idx], slice_p2.a, ((slice_p2.b + 1) - slice_p2.a));
    }
    

  return result_1275068505;

}

function fillBuffer__pureZlexbase_u16(L_p0) {
              var Temporary8;

    var charsRead_1308622866 = 0;
    var toCopy_1308622867 = 0;
    var s_1308622868 = 0;
    var oldBufLen_1308622869 = 0;
    toCopy_1308622867 = ((L_p0.buf).length - (L_p0.sentinel + 1));
    if ((0 < toCopy_1308622867)) {
    Label1: {
      var i_1308622880 = 0;
      var i_570427599 = 0;
      Label2: {
          Label3: while (true) {
          if (!(i_570427599 < toCopy_1308622867)) break Label3;
            i_1308622880 = i_570427599;
            L_p0.buf[i_1308622880] = L_p0.buf[((L_p0.sentinel + 1) + i_1308622880)];
            i_570427599 += 1;
          }
      };
    };
    }
    
    charsRead_1308622866 = readDataStr__pureZstreams_u84(L_p0.input, L_p0, "buf", HEX2EHEX2E__stdZstrbasics_u48(toCopy_1308622867, ((toCopy_1308622867 + L_p0.sentinel) + 1) - 1));
    s_1308622868 = (toCopy_1308622867 + charsRead_1308622866);
    if ((charsRead_1308622866 < (L_p0.sentinel + 1))) {
    L_p0.buf[s_1308622868] = 0;
    L_p0.sentinel = s_1308622868;
    }
    else {
      s_1308622868 -= 1;
      Label4: {
          Label5: while (true) {
          if (!true) break Label5;
            Label6: {
                Label7: while (true) {
                if (!((0 <= s_1308622868) && !((L_p0.refillChars[L_p0.buf[s_1308622868]] != undefined)))) break Label7;
                  s_1308622868 -= 1;
                }
            };
            if ((0 <= s_1308622868)) {
            L_p0.sentinel = s_1308622868;
            break Label4;
            }
            else {
              oldBufLen_1308622869 = (L_p0.buf).length;
              if (L_p0.buf.length < (Temporary8 = ((L_p0.buf).length * 2), Temporary8)) { for (var i = L_p0.buf.length; i < Temporary8; ++i) L_p0.buf.push(0); }
         else {L_p0.buf.length = Temporary8; };
              charsRead_1308622866 = readDataStr__pureZstreams_u84(L_p0.input, L_p0, "buf", HEX2EHEX2E__stdZstrbasics_u48(oldBufLen_1308622869, (L_p0.buf).length - 1));
              if ((charsRead_1308622866 < oldBufLen_1308622869)) {
              L_p0.buf[(oldBufLen_1308622869 + charsRead_1308622866)] = 0;
              L_p0.sentinel = (oldBufLen_1308622869 + charsRead_1308622866);
              break Label4;
              }
              
              s_1308622868 = ((L_p0.buf).length - 1);
            }
            
          }
      };
    }
    

  
}

function skipUtf8Bom__pureZlexbase_u118(L_p0) {
    if ((((L_p0.buf[0] == 239) && (L_p0.buf[1] == 187)) && (L_p0.buf[2] == 191))) {
    L_p0.bufpos += 3;
    L_p0.lineStart += 3;
    }
    

  
}

function open__pureZlexbase_u130(L_p0, input_p1, bufLen_p2, refillChars_p3) {
    L_p0.input = input_p1;
    L_p0.bufpos = 0;
    L_p0.offsetBase = 0;
    L_p0.refillChars = nimCopy(L_p0.refillChars, refillChars_p3, NTI1308622853);
    L_p0.buf = nimCopy(null, mnewString(bufLen_p2), NTI33554449);
    L_p0.sentinel = (bufLen_p2 - 1);
    L_p0.lineStart = 0;
    L_p0.lineNumber = 1;
    fillBuffer__pureZlexbase_u16(L_p0);
    skipUtf8Bom__pureZlexbase_u118(L_p0);

  
}

function open__pureZparsexml_u65(my_p0, input_p1, filename_p2, options_p3) {
    open__pureZlexbase_u130(my_p0, input_p1, 8192, ConstSet75);
    my_p0.filename = nimCopy(null, filename_p2, NTI33554449);
    my_p0.state = 0;
    my_p0.kind = 0;
    my_p0.a = nimCopy(null, [], NTI33554449);
    my_p0.b = nimCopy(null, [], NTI33554449);
    my_p0.c = nimCopy(null, [], NTI33554449);
    my_p0.cIsEmpty = true;
    my_p0.options = nimCopy(my_p0.options, options_p3, NTI1241513996);

  
}

function fillBaseLexer__pureZlexbase_u72(L_p0, pos_p1) {
  var result_1308622923 = 0;

    if ((pos_p1 < L_p0.sentinel)) {
    result_1308622923 = (pos_p1 + 1);
    }
    else {
      fillBuffer__pureZlexbase_u16(L_p0);
      L_p0.offsetBase += pos_p1;
      L_p0.bufpos = 0;
      result_1308622923 = 0;
    }
    

  return result_1308622923;

}

function handleRefillChar__pureZlexbase_u107(L_p0, pos_p1) {
  var result_1308622958 = 0;

    result_1308622958 = fillBaseLexer__pureZlexbase_u72(L_p0, pos_p1);

  return result_1308622958;

}

function markError__pureZparsexml_u242(my_p0, kind_p1) {
    my_p0.err = kind_p1;
    my_p0.state = 4;

  
}

function parseName__pureZparsexml_u329(my_p0, dest_p1, dest_p1_Idx) {
    var pos_1241514316 = my_p0.bufpos;
    if ((ConstSet77[my_p0.buf[pos_1241514316]] != undefined)) {
    Label1: {
        Label2: while (true) {
        if (!true) break Label2;
          addChar(dest_p1[dest_p1_Idx], my_p0.buf[pos_1241514316]);;
          pos_1241514316 += 1;
          if (!((ConstSet78[my_p0.buf[pos_1241514316]] != undefined))) {
          break Label1;
          }
          
        }
    };
    my_p0.bufpos = pos_1241514316;
    }
    else {
    markError__pureZparsexml_u242(my_p0, 2);
    }
    

  
}

function handleCR__pureZlexbase_u83(L_p0, pos_p1) {
  var result_1308622934 = 0;

    L_p0.lineNumber += 1;
    result_1308622934 = fillBaseLexer__pureZlexbase_u72(L_p0, pos_p1);
    if ((L_p0.buf[result_1308622934] == 10)) {
    result_1308622934 = fillBaseLexer__pureZlexbase_u72(L_p0, result_1308622934);
    }
    
    L_p0.lineStart = result_1308622934;

  return result_1308622934;

}

function handleLF__pureZlexbase_u95(L_p0, pos_p1) {
  var result_1308622946 = 0;

    L_p0.lineNumber += 1;
    result_1308622946 = fillBaseLexer__pureZlexbase_u72(L_p0, pos_p1);
    L_p0.lineStart = result_1308622946;

  return result_1308622946;

}

function parseWhitespace__pureZparsexml_u318(my_p0, skip_p1) {
    var pos_1241514305 = my_p0.bufpos;
    Label1: {
        Label2: while (true) {
        if (!true) break Label2;
          switch (my_p0.buf[pos_1241514305]) {
          case 32:
          case 9:
            if (!(skip_p1)) {
            addChar(my_p0.a, my_p0.buf[pos_1241514305]);;
            }
            
            pos_1241514305 += 1;
            break;
          case 13:
            pos_1241514305 = handleCR__pureZlexbase_u83(my_p0, pos_1241514305);
            if (!(skip_p1)) {
            addChar(my_p0.a, 10);;
            }
            
            break;
          case 10:
            pos_1241514305 = handleLF__pureZlexbase_u95(my_p0, pos_1241514305);
            if (!(skip_p1)) {
            addChar(my_p0.a, 10);;
            }
            
            break;
          default: 
            break Label1;
            break;
          }
        }
    };
    my_p0.bufpos = pos_1241514305;

  
}

function parseEndTag__pureZparsexml_u526(my_p0) {
    my_p0.bufpos = handleRefillChar__pureZlexbase_u107(my_p0, (my_p0.bufpos + 1));
    parseName__pureZparsexml_u329(my_p0, my_p0, "a");
    parseWhitespace__pureZparsexml_u318(my_p0, true);
    if ((my_p0.buf[my_p0.bufpos] == 62)) {
    my_p0.bufpos += 1;
    }
    else {
    markError__pureZparsexml_u242(my_p0, 5);
    }
    
    my_p0.kind = 7;

  
}

function parseCDATA__pureZparsexml_u261(my_p0) {
    var pos_1241514247 = (my_p0.bufpos + 9);
    Label1: {
        Label2: while (true) {
        if (!true) break Label2;
          switch (my_p0.buf[pos_1241514247]) {
          case 93:
            if (((my_p0.buf[(pos_1241514247 + 1)] == 93) && (my_p0.buf[(pos_1241514247 + 2)] == 62))) {
            pos_1241514247 += 3;
            break Label1;
            }
            
            addChar(my_p0.a, 93);;
            pos_1241514247 += 1;
            break;
          case 0:
            markError__pureZparsexml_u242(my_p0, 1);
            break Label1;
            break;
          case 13:
            pos_1241514247 = handleCR__pureZlexbase_u83(my_p0, pos_1241514247);
            addChar(my_p0.a, 10);;
            break;
          case 10:
            pos_1241514247 = handleLF__pureZlexbase_u95(my_p0, pos_1241514247);
            addChar(my_p0.a, 10);;
            break;
          case 47:
            pos_1241514247 = handleRefillChar__pureZlexbase_u107(my_p0, pos_1241514247);
            addChar(my_p0.a, 47);;
            break;
          default: 
            addChar(my_p0.a, my_p0.buf[pos_1241514247]);;
            pos_1241514247 += 1;
            break;
          }
        }
    };
    my_p0.bufpos = pos_1241514247;
    my_p0.kind = 11;

  
}

function parseComment__pureZparsexml_u279(my_p0) {
    var pos_1241514265 = (my_p0.bufpos + 4);
    Label1: {
        Label2: while (true) {
        if (!true) break Label2;
          switch (my_p0.buf[pos_1241514265]) {
          case 45:
            if (((my_p0.buf[(pos_1241514265 + 1)] == 45) && (my_p0.buf[(pos_1241514265 + 2)] == 62))) {
            pos_1241514265 += 3;
            break Label1;
            }
            
            if ((my_p0.options[1] != undefined)) {
            addChar(my_p0.a, 45);;
            }
            
            pos_1241514265 += 1;
            break;
          case 0:
            markError__pureZparsexml_u242(my_p0, 8);
            break Label1;
            break;
          case 13:
            pos_1241514265 = handleCR__pureZlexbase_u83(my_p0, pos_1241514265);
            if ((my_p0.options[1] != undefined)) {
            addChar(my_p0.a, 10);;
            }
            
            break;
          case 10:
            pos_1241514265 = handleLF__pureZlexbase_u95(my_p0, pos_1241514265);
            if ((my_p0.options[1] != undefined)) {
            addChar(my_p0.a, 10);;
            }
            
            break;
          case 47:
            pos_1241514265 = handleRefillChar__pureZlexbase_u107(my_p0, pos_1241514265);
            if ((my_p0.options[1] != undefined)) {
            addChar(my_p0.a, 47);;
            }
            
            break;
          default: 
            if ((my_p0.options[1] != undefined)) {
            addChar(my_p0.a, my_p0.buf[pos_1241514265]);;
            }
            
            pos_1241514265 += 1;
            break;
          }
        }
    };
    my_p0.bufpos = pos_1241514265;
    my_p0.kind = 4;

  
}

function parseSpecial__pureZparsexml_u470(my_p0) {
    var pos_1241514456 = (my_p0.bufpos + 2);
    var opentags_1241514457 = 0;
    Label1: {
        Label2: while (true) {
        if (!true) break Label2;
          switch (my_p0.buf[pos_1241514456]) {
          case 0:
            markError__pureZparsexml_u242(my_p0, 5);
            break Label1;
            break;
          case 60:
            opentags_1241514457 += 1;
            pos_1241514456 += 1;
            addChar(my_p0.a, 60);;
            break;
          case 62:
            if ((opentags_1241514457 <= 0)) {
            pos_1241514456 += 1;
            break Label1;
            }
            
            opentags_1241514457 -= 1;
            pos_1241514456 += 1;
            addChar(my_p0.a, 62);;
            break;
          case 13:
            pos_1241514456 = handleCR__pureZlexbase_u83(my_p0, pos_1241514456);
            addChar(my_p0.a, 10);;
            break;
          case 10:
            pos_1241514456 = handleLF__pureZlexbase_u95(my_p0, pos_1241514456);
            addChar(my_p0.a, 10);;
            break;
          case 47:
            pos_1241514456 = handleRefillChar__pureZlexbase_u107(my_p0, pos_1241514456);
            addChar(my_p0.b, 47);;
            break;
          default: 
            addChar(my_p0.a, my_p0.buf[pos_1241514456]);;
            pos_1241514456 += 1;
            break;
          }
        }
    };
    my_p0.bufpos = pos_1241514456;
    my_p0.kind = 13;

  
}

function parsePI__pureZparsexml_u447(my_p0) {
    my_p0.bufpos += 2;
    parseName__pureZparsexml_u329(my_p0, my_p0, "a");
    var pos_1241514438 = my_p0.bufpos;
    if (my_p0.b.length < 0) { for (var i = my_p0.b.length; i < 0; ++i) my_p0.b.push(0); }
         else {my_p0.b.length = 0; };
    Label1: {
        Label2: while (true) {
        if (!true) break Label2;
          switch (my_p0.buf[pos_1241514438]) {
          case 0:
            markError__pureZparsexml_u242(my_p0, 4);
            break Label1;
            break;
          case 63:
            if ((my_p0.buf[(pos_1241514438 + 1)] == 62)) {
            pos_1241514438 += 2;
            break Label1;
            }
            
            addChar(my_p0.b, 63);;
            pos_1241514438 += 1;
            break;
          case 13:
            pos_1241514438 = handleCR__pureZlexbase_u83(my_p0, pos_1241514438);
            addChar(my_p0.b, 10);;
            break;
          case 10:
            pos_1241514438 = handleLF__pureZlexbase_u95(my_p0, pos_1241514438);
            addChar(my_p0.b, 10);;
            break;
          case 47:
            pos_1241514438 = handleRefillChar__pureZlexbase_u107(my_p0, pos_1241514438);
            addChar(my_p0.b, 47);;
            break;
          default: 
            addChar(my_p0.b, my_p0.buf[pos_1241514438]);;
            pos_1241514438 += 1;
            break;
          }
        }
    };
    my_p0.bufpos = pos_1241514438;
    my_p0.kind = 5;

  
}

function parseTag__pureZparsexml_u504(my_p0) {
  BeforeRet: {
    my_p0.bufpos += 1;
    parseName__pureZparsexml_u329(my_p0, my_p0, "a");
    if (((my_p0.a).length == 0)) {
    my_p0.kind = 2;
    addChar(my_p0.a, 60);;
    break BeforeRet;
    }
    
    parseWhitespace__pureZparsexml_u318(my_p0, true);
    if ((ConstSet79[my_p0.buf[my_p0.bufpos]] != undefined)) {
    my_p0.kind = 8;
    my_p0.state = 2;
    my_p0.c = nimCopy(null, my_p0.a, NTI33554449);
    my_p0.cIsEmpty = false;
    }
    else {
      my_p0.kind = 6;
      var slash_1241514499 = (my_p0.buf[my_p0.bufpos] == 47);
      if (slash_1241514499) {
      my_p0.bufpos = handleRefillChar__pureZlexbase_u107(my_p0, my_p0.bufpos);
      }
      
      if ((slash_1241514499 && (my_p0.buf[my_p0.bufpos] == 62))) {
      my_p0.bufpos += 1;
      my_p0.state = 3;
      my_p0.c = nimCopy(null, [], NTI33554449);
      my_p0.cIsEmpty = true;
      }
      else {
      if ((my_p0.buf[my_p0.bufpos] == 62)) {
      my_p0.bufpos += 1;
      }
      else {
      markError__pureZparsexml_u242(my_p0, 5);
      }
      }
    }
    
  };

  
}

function HEX3CHEX3DHEX25__system_u1072(x_p0, y_p1) {
  var result_33555507 = false;

    result_33555507 = (Number(BigInt.asUintN(32, BigInt(x_p0))) <= Number(BigInt.asUintN(32, BigInt(y_p1))));

  return result_33555507;

}

function nuctoUTF8(c_p0) {
  var result_1107296664 = [];

    result_1107296664 = nimCopy(null, [], NTI33554449);
    var iHEX60gensym21_1107296666 = c_p0;
    if (HEX3CHEX3DHEX25__system_u1072(iHEX60gensym21_1107296666, 127)) {
    if (result_1107296664.length < 1) { for (var i = result_1107296664.length; i < 1; ++i) result_1107296664.push(0); }
         else {result_1107296664.length = 1; };
    result_1107296664[0] = iHEX60gensym21_1107296666;
    }
    else {
    if (HEX3CHEX3DHEX25__system_u1072(iHEX60gensym21_1107296666, 2047)) {
    if (result_1107296664.length < 2) { for (var i = result_1107296664.length; i < 2; ++i) result_1107296664.push(0); }
         else {result_1107296664.length = 2; };
    result_1107296664[0] = ((iHEX60gensym21_1107296666 >> 6) | 192);
    result_1107296664[1] = ((iHEX60gensym21_1107296666 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25__system_u1072(iHEX60gensym21_1107296666, 65535)) {
    if (result_1107296664.length < 3) { for (var i = result_1107296664.length; i < 3; ++i) result_1107296664.push(0); }
         else {result_1107296664.length = 3; };
    result_1107296664[0] = ((iHEX60gensym21_1107296666 >> 12) | 224);
    result_1107296664[1] = (((iHEX60gensym21_1107296666 >> 6) & 63) | 128);
    result_1107296664[2] = ((iHEX60gensym21_1107296666 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25__system_u1072(iHEX60gensym21_1107296666, 2097151)) {
    if (result_1107296664.length < 4) { for (var i = result_1107296664.length; i < 4; ++i) result_1107296664.push(0); }
         else {result_1107296664.length = 4; };
    result_1107296664[0] = ((iHEX60gensym21_1107296666 >> 18) | 240);
    result_1107296664[1] = (((iHEX60gensym21_1107296666 >> 12) & 63) | 128);
    result_1107296664[2] = (((iHEX60gensym21_1107296666 >> 6) & 63) | 128);
    result_1107296664[3] = ((iHEX60gensym21_1107296666 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25__system_u1072(iHEX60gensym21_1107296666, 67108863)) {
    if (result_1107296664.length < 5) { for (var i = result_1107296664.length; i < 5; ++i) result_1107296664.push(0); }
         else {result_1107296664.length = 5; };
    result_1107296664[0] = ((iHEX60gensym21_1107296666 >> 24) | 248);
    result_1107296664[1] = (((iHEX60gensym21_1107296666 >> 18) & 63) | 128);
    result_1107296664[2] = (((iHEX60gensym21_1107296666 >> 12) & 63) | 128);
    result_1107296664[3] = (((iHEX60gensym21_1107296666 >> 6) & 63) | 128);
    result_1107296664[4] = ((iHEX60gensym21_1107296666 & 63) | 128);
    }
    else {
    if (HEX3CHEX3DHEX25__system_u1072(iHEX60gensym21_1107296666, 2147483647)) {
    if (result_1107296664.length < 6) { for (var i = result_1107296664.length; i < 6; ++i) result_1107296664.push(0); }
         else {result_1107296664.length = 6; };
    result_1107296664[0] = ((iHEX60gensym21_1107296666 >> 30) | 252);
    result_1107296664[1] = (((iHEX60gensym21_1107296666 >> 24) & 63) | 128);
    result_1107296664[2] = (((iHEX60gensym21_1107296666 >> 18) & 63) | 128);
    result_1107296664[3] = (((iHEX60gensym21_1107296666 >> 12) & 63) | 128);
    result_1107296664[4] = (((iHEX60gensym21_1107296666 >> 6) & 63) | 128);
    result_1107296664[5] = ((iHEX60gensym21_1107296666 & 63) | 128);
    }
    else {
    }
    }}}}}

  return result_1107296664;

}

function parseEntity__pureZparsexml_u346(my_p0, dest_p1, dest_p1_Idx) {
    var pos_1241514333 = (my_p0.bufpos + 1);
    my_p0.kind = 2;
    if ((my_p0.buf[pos_1241514333] == 35)) {
    var r_1241514334 = 0;
    pos_1241514333 += 1;
    if ((my_p0.buf[pos_1241514333] == 120)) {
    pos_1241514333 += 1;
    Label1: {
        Label2: while (true) {
        if (!true) break Label2;
          switch (my_p0.buf[pos_1241514333]) {
          case 48:
          case 49:
          case 50:
          case 51:
          case 52:
          case 53:
          case 54:
          case 55:
          case 56:
          case 57:
            r_1241514334 = (((r_1241514334 << 4) << 0 >> 0) | (my_p0.buf[pos_1241514333] - 48));
            break;
          case 97:
          case 98:
          case 99:
          case 100:
          case 101:
          case 102:
            r_1241514334 = (((r_1241514334 << 4) << 0 >> 0) | ((my_p0.buf[pos_1241514333] - 97) + 10));
            break;
          case 65:
          case 66:
          case 67:
          case 68:
          case 69:
          case 70:
            r_1241514334 = (((r_1241514334 << 4) << 0 >> 0) | ((my_p0.buf[pos_1241514333] - 65) + 10));
            break;
          default: 
            break Label1;
            break;
          }
          pos_1241514333 += 1;
        }
    };
    }
    else {
      Label3: {
          Label4: while (true) {
          if (!(ConstSet80[my_p0.buf[pos_1241514333]] != undefined)) break Label4;
            r_1241514334 = ((r_1241514334 * 10) + (my_p0.buf[pos_1241514333] - 48));
            pos_1241514333 += 1;
          }
      };
    }
    
    dest_p1[dest_p1_Idx].push.apply(dest_p1[dest_p1_Idx], nuctoUTF8(((r_1241514334) | 0)));;
    }
    else {
    if ((((my_p0.buf[pos_1241514333] == 108) && (my_p0.buf[(pos_1241514333 + 1)] == 116)) && (my_p0.buf[(pos_1241514333 + 2)] == 59))) {
    addChar(dest_p1[dest_p1_Idx], 60);;
    pos_1241514333 += 2;
    }
    else {
    if ((((my_p0.buf[pos_1241514333] == 103) && (my_p0.buf[(pos_1241514333 + 1)] == 116)) && (my_p0.buf[(pos_1241514333 + 2)] == 59))) {
    addChar(dest_p1[dest_p1_Idx], 62);;
    pos_1241514333 += 2;
    }
    else {
    if (((((my_p0.buf[pos_1241514333] == 97) && (my_p0.buf[(pos_1241514333 + 1)] == 109)) && (my_p0.buf[(pos_1241514333 + 2)] == 112)) && (my_p0.buf[(pos_1241514333 + 3)] == 59))) {
    addChar(dest_p1[dest_p1_Idx], 38);;
    pos_1241514333 += 3;
    }
    else {
    if ((((((my_p0.buf[pos_1241514333] == 97) && (my_p0.buf[(pos_1241514333 + 1)] == 112)) && (my_p0.buf[(pos_1241514333 + 2)] == 111)) && (my_p0.buf[(pos_1241514333 + 3)] == 115)) && (my_p0.buf[(pos_1241514333 + 4)] == 59))) {
    addChar(dest_p1[dest_p1_Idx], 39);;
    pos_1241514333 += 4;
    }
    else {
    if ((((((my_p0.buf[pos_1241514333] == 113) && (my_p0.buf[(pos_1241514333 + 1)] == 117)) && (my_p0.buf[(pos_1241514333 + 2)] == 111)) && (my_p0.buf[(pos_1241514333 + 3)] == 116)) && (my_p0.buf[(pos_1241514333 + 4)] == 59))) {
    addChar(dest_p1[dest_p1_Idx], 34);;
    pos_1241514333 += 4;
    }
    else {
      my_p0.bufpos = pos_1241514333;
      var name_1241514420 = [[]];
      parseName__pureZparsexml_u329(my_p0, name_1241514420, 0);
      pos_1241514333 = my_p0.bufpos;
      if ((!((my_p0.err == 2)) && (my_p0.buf[pos_1241514333] == 59))) {
      my_p0.kind = 12;
      }
      else {
      addChar(dest_p1[dest_p1_Idx], 38);;
      }
      
      dest_p1[dest_p1_Idx].push.apply(dest_p1[dest_p1_Idx], name_1241514420[0]);;
    }
    }}}}}
    if ((my_p0.buf[pos_1241514333] == 59)) {
    pos_1241514333 += 1;
    }
    else {
      my_p0.err = 3;
    }
    
    my_p0.bufpos = pos_1241514333;

  
}

function parseCharData__pureZparsexml_u593(my_p0) {
    var pos_1241514579 = my_p0.bufpos;
    Label1: {
        Label2: while (true) {
        if (!true) break Label2;
          switch (my_p0.buf[pos_1241514579]) {
          case 0:
          case 60:
          case 38:
            break Label1;
            break;
          case 13:
            pos_1241514579 = handleCR__pureZlexbase_u83(my_p0, pos_1241514579);
            addChar(my_p0.a, 10);;
            break;
          case 10:
            pos_1241514579 = handleLF__pureZlexbase_u95(my_p0, pos_1241514579);
            addChar(my_p0.a, 10);;
            break;
          case 47:
            pos_1241514579 = handleRefillChar__pureZlexbase_u107(my_p0, pos_1241514579);
            addChar(my_p0.a, 47);;
            break;
          default: 
            addChar(my_p0.a, my_p0.buf[pos_1241514579]);;
            pos_1241514579 += 1;
            break;
          }
        }
    };
    my_p0.bufpos = pos_1241514579;
    my_p0.kind = 2;

  
}

function rawGetTok__pureZparsexml_u601(my_p0) {
    my_p0.kind = 0;
    if (my_p0.a.length < 0) { for (var i = my_p0.a.length; i < 0; ++i) my_p0.a.push(0); }
         else {my_p0.a.length = 0; };
    var pos_1241514587 = my_p0.bufpos;
    switch (my_p0.buf[pos_1241514587]) {
    case 60:
      switch (my_p0.buf[(pos_1241514587 + 1)]) {
      case 47:
        parseEndTag__pureZparsexml_u526(my_p0);
        break;
      case 33:
        if ((((((((my_p0.buf[(pos_1241514587 + 2)] == 91) && (my_p0.buf[(pos_1241514587 + 3)] == 67)) && (my_p0.buf[(pos_1241514587 + 4)] == 68)) && (my_p0.buf[(pos_1241514587 + 5)] == 65)) && (my_p0.buf[(pos_1241514587 + 6)] == 84)) && (my_p0.buf[(pos_1241514587 + 7)] == 65)) && (my_p0.buf[(pos_1241514587 + 8)] == 91))) {
        parseCDATA__pureZparsexml_u261(my_p0);
        }
        else {
        if (((my_p0.buf[(pos_1241514587 + 2)] == 45) && (my_p0.buf[(pos_1241514587 + 3)] == 45))) {
        parseComment__pureZparsexml_u279(my_p0);
        }
        else {
        parseSpecial__pureZparsexml_u470(my_p0);
        }
        }
        break;
      case 63:
        parsePI__pureZparsexml_u447(my_p0);
        break;
      default: 
        parseTag__pureZparsexml_u504(my_p0);
        break;
      }
      break;
    case 32:
    case 9:
    case 13:
    case 10:
      parseWhitespace__pureZparsexml_u318(my_p0, false);
      my_p0.kind = 3;
      break;
    case 0:
      my_p0.kind = 1;
      break;
    case 38:
      parseEntity__pureZparsexml_u346(my_p0, my_p0, "a");
      break;
    default: 
      parseCharData__pureZparsexml_u593(my_p0);
      break;
    }

  
}

function getTok__pureZparsexml_u611(my_p0) {
    Label1: {
        Label2: while (true) {
        if (!true) break Label2;
          var lastKind_1241514597 = my_p0.kind;
          rawGetTok__pureZparsexml_u601(my_p0);
          switch (my_p0.kind) {
          case 4:
            if ((my_p0.options[1] != undefined)) {
            break Label1;
            }
            
            break;
          case 3:
            if (((my_p0.options[0] != undefined) || (ConstSet81[lastKind_1241514597] != undefined))) {
            break Label1;
            }
            
            break;
          default: 
            break Label1;
            break;
          }
        }
    };

  
}

function parseAttribute__pureZparsexml_u533(my_p0) {
  BeforeRet: {
    my_p0.kind = 9;
    if (my_p0.a.length < 0) { for (var i = my_p0.a.length; i < 0; ++i) my_p0.a.push(0); }
         else {my_p0.a.length = 0; };
    if (my_p0.b.length < 0) { for (var i = my_p0.b.length; i < 0; ++i) my_p0.b.push(0); }
         else {my_p0.b.length = 0; };
    parseName__pureZparsexml_u329(my_p0, my_p0, "a");
    if (((my_p0.a).length == 0)) {
    markError__pureZparsexml_u242(my_p0, 5);
    break BeforeRet;
    }
    
    var startPos_1241514519 = my_p0.bufpos;
    parseWhitespace__pureZparsexml_u318(my_p0, true);
    if (!((my_p0.buf[my_p0.bufpos] == 61))) {
    if ((!((my_p0.options[3] != undefined)) || (!((my_p0.buf[my_p0.bufpos] == 62)) && (my_p0.bufpos == startPos_1241514519)))) {
    markError__pureZparsexml_u242(my_p0, 6);
    }
    
    break BeforeRet;
    }
    
    my_p0.bufpos += 1;
    parseWhitespace__pureZparsexml_u318(my_p0, true);
    var pos_1241514529 = my_p0.bufpos;
    if ((ConstSet82[my_p0.buf[pos_1241514529]] != undefined)) {
    var quote_1241514534 = my_p0.buf[pos_1241514529];
    var pendingSpace_1241514535 = false;
    pos_1241514529 += 1;
    Label1: {
        Label2: while (true) {
        if (!true) break Label2;
          switch (my_p0.buf[pos_1241514529]) {
          case 0:
            markError__pureZparsexml_u242(my_p0, 7);
            break Label1;
            break;
          case 38:
            if (pendingSpace_1241514535) {
            addChar(my_p0.b, 32);;
            pendingSpace_1241514535 = false;
            }
            
            my_p0.bufpos = pos_1241514529;
            parseEntity__pureZparsexml_u346(my_p0, my_p0, "b");
            my_p0.kind = 9;
            pos_1241514529 = my_p0.bufpos;
            break;
          case 32:
          case 9:
            pendingSpace_1241514535 = true;
            pos_1241514529 += 1;
            break;
          case 13:
            pos_1241514529 = handleCR__pureZlexbase_u83(my_p0, pos_1241514529);
            pendingSpace_1241514535 = true;
            break;
          case 10:
            pos_1241514529 = handleLF__pureZlexbase_u95(my_p0, pos_1241514529);
            pendingSpace_1241514535 = true;
            break;
          case 47:
            pos_1241514529 = handleRefillChar__pureZlexbase_u107(my_p0, pos_1241514529);
            addChar(my_p0.b, 47);;
            break;
          default: 
            if ((my_p0.buf[pos_1241514529] == quote_1241514534)) {
            pos_1241514529 += 1;
            break Label1;
            }
            else {
              if (pendingSpace_1241514535) {
              addChar(my_p0.b, 32);;
              pendingSpace_1241514535 = false;
              }
              
              addChar(my_p0.b, my_p0.buf[pos_1241514529]);;
              pos_1241514529 += 1;
            }
            
            break;
          }
        }
    };
    }
    else {
    if ((my_p0.options[2] != undefined)) {
    var startPos_1241514561 = pos_1241514529;
    Label3: {
        Label4: while (true) {
          var c_1241514562 = my_p0.buf[pos_1241514529];
        if (!!((ConstSet83[c_1241514562] != undefined))) break Label4;
          if ((c_1241514562 == 38)) {
          my_p0.bufpos = pos_1241514529;
          parseEntity__pureZparsexml_u346(my_p0, my_p0, "b");
          my_p0.kind = 9;
          pos_1241514529 = my_p0.bufpos;
          }
          else {
          if ((c_1241514562 == 47)) {
          pos_1241514529 = handleRefillChar__pureZlexbase_u107(my_p0, pos_1241514529);
          addChar(my_p0.b, 47);;
          }
          else {
            addChar(my_p0.b, c_1241514562);;
            pos_1241514529 += 1;
          }
          }
        }
    };
    if ((pos_1241514529 == startPos_1241514561)) {
    markError__pureZparsexml_u242(my_p0, 9);
    }
    
    }
    else {
      markError__pureZparsexml_u242(my_p0, 7);
      Label5: {
          Label6: while (true) {
          if (!(!((my_p0.buf[pos_1241514529] == 62)) && (32 < my_p0.buf[pos_1241514529]))) break Label6;
            addChar(my_p0.b, my_p0.buf[pos_1241514529]);;
            pos_1241514529 += 1;
          }
      };
    }
    }
    my_p0.bufpos = pos_1241514529;
    parseWhitespace__pureZparsexml_u318(my_p0, true);
  };

  
}

function next__pureZparsexml_u627(my_p0) {
    switch (my_p0.state) {
    case 1:
      getTok__pureZparsexml_u611(my_p0);
      break;
    case 0:
      my_p0.state = 1;
      getTok__pureZparsexml_u611(my_p0);
      if (((my_p0.kind == 5) && eqStrings(my_p0.a, [120,109,108]))) {
      getTok__pureZparsexml_u611(my_p0);
      }
      
      break;
    case 2:
      if ((my_p0.buf[my_p0.bufpos] == 62)) {
      my_p0.kind = 10;
      my_p0.bufpos += 1;
      my_p0.state = 1;
      }
      else {
      if ((my_p0.buf[my_p0.bufpos] == 47)) {
      my_p0.bufpos = handleRefillChar__pureZlexbase_u107(my_p0, my_p0.bufpos);
      if ((my_p0.buf[my_p0.bufpos] == 62)) {
      my_p0.kind = 10;
      my_p0.bufpos += 1;
      my_p0.state = 3;
      }
      else {
      markError__pureZparsexml_u242(my_p0, 5);
      }
      
      }
      else {
      parseAttribute__pureZparsexml_u533(my_p0);
      }
      }
      break;
    case 3:
      my_p0.state = 1;
      my_p0.kind = 7;
      if (!(my_p0.cIsEmpty)) {
      my_p0.a = nimCopy(null, my_p0.c, NTI33554449);
      }
      
      break;
    case 4:
      my_p0.kind = 0;
      my_p0.state = 1;
      break;
    }

  
}

function kind__pureZparsexml_u175(my_p0) {
  var result_1241514161 = 0;

  BeforeRet: {
    result_1241514161 = my_p0.kind;
    break BeforeRet;
  };

  return result_1241514161;

}

function newXmlNode__pureZxmltree_u32(kind_p0) {
  var result_1258291234 = null;

    result_1258291234 = {k: kind_p0, fText: [], fTag: [], s: [], fAttr: null, fClientData: 0};

  return result_1258291234;

}

function newElement__pureZxmltree_u100(tag_p0) {
    var Temporary1;
    var Temporary2;

  var result_1258291302 = null;

    result_1258291302 = newXmlNode__pureZxmltree_u32(2);
    var Temporary1 = result_1258291302;
    if (ConstSet84[Temporary1.k]===undefined) { raiseFieldError2(makeNimstrLit("field \'fTag\' is not accessible for type \'XmlNodeObj\' using \'k = "), reprDiscriminant(Temporary1.k, NTI1258291204)); }
    Temporary1.fTag = nimCopy(null, tag_p0, NTI33554449);
    var Temporary2 = result_1258291302;
    if (ConstSet85[Temporary2.k]===undefined) { raiseFieldError2(makeNimstrLit("field \'s\' is not accessible for type \'XmlNodeObj\' using \'k = "), reprDiscriminant(Temporary2.k, NTI1258291204)); }
    Temporary2.s = nimCopy(null, [], NTI1258291257);

  return result_1258291302;

}

function tag__pureZxmltree_u206(n_p0) {
    var Temporary1;

  var result_1258291408 = [];

    var Temporary1 = n_p0;
    if (ConstSet86[Temporary1.k]===undefined) { raiseFieldError2(makeNimstrLit("field \'fTag\' is not accessible for type \'XmlNodeObj\' using \'k = "), reprDiscriminant(Temporary1.k, NTI1258291204)); }
    result_1258291408 = Temporary1["fTag"];

  return result_1258291408;

}

function add__pureZxmltree_u282(father_p0, son_p1) {
    var Temporary1;

    var Temporary1 = father_p0;
    if (ConstSet87[Temporary1.k]===undefined) { raiseFieldError2(makeNimstrLit("field \'s\' is not accessible for type \'XmlNodeObj\' using \'k = "), reprDiscriminant(Temporary1.k, NTI1258291204)); }
    Temporary1.s.push(son_p1);;

  
}

function addNode__OOZsrcZmargraveZsinglexml_u6(father_p0, son_p1) {
    if (!((son_p1 == null))) {
    add__pureZxmltree_u282(father_p0, son_p1);
    }
    

  
}

function newComment__pureZxmltree_u149(comment_p0) {
    var Temporary1;

  var result_1258291351 = null;

    result_1258291351 = newXmlNode__pureZxmltree_u32(5);
    var Temporary1 = result_1258291351;
    if (ConstSet88[Temporary1.k]===undefined) { raiseFieldError2(makeNimstrLit("field \'fText\' is not accessible for type \'XmlNodeObj\' using \'k = "), reprDiscriminant(Temporary1.k, NTI1258291204)); }
    Temporary1.fText = nimCopy(null, comment_p0, NTI33554449);

  return result_1258291351;

}

function newText__pureZxmltree_u139(text_p0) {
    var Temporary1;

  var result_1258291341 = null;

    result_1258291341 = newXmlNode__pureZxmltree_u32(0);
    var Temporary1 = result_1258291341;
    if (ConstSet89[Temporary1.k]===undefined) { raiseFieldError2(makeNimstrLit("field \'fText\' is not accessible for type \'XmlNodeObj\' using \'k = "), reprDiscriminant(Temporary1.k, NTI1258291204)); }
    Temporary1.fText = nimCopy(null, text_p0, NTI33554449);

  return result_1258291341;

}

function attrsHEX3D__pureZxmltree_u744(n_p0, attr_p1) {
    var Temporary1;

    var Temporary1 = n_p0;
    if (ConstSet90[Temporary1.k]===undefined) { raiseFieldError2(makeNimstrLit("field \'fAttr\' is not accessible for type \'XmlNodeObj\' using \'k = "), reprDiscriminant(Temporary1.k, NTI1258291204)); }
    Temporary1.fAttr = attr_p1;

  
}

function newSeq__pureZstrtabs_u308(len_p0) {
  var result_1291845944 = [];

    result_1291845944 = new Array(len_p0); for (var i = 0 ; i < len_p0 ; ++i) { result_1291845944[i] = {Field0: [], Field1: [], Field2: false}; }
  return result_1291845944;

}

function nstnewStringTable(mode_p0) {
  var result_1291845923 = null;

    result_1291845923 = {mode: mode_p0, counter: 0, data: newSeq__pureZstrtabs_u308(64), m_type: NTI1291845638};

  return result_1291845923;

}

function hash__pureZhashes_u791(x_p0) {
  var result_822084377 = 0;

    result_822084377 = Number(BigInt.asIntN(32, hashFarm__pureZhashes_u715((x_p0.slice(0, (x_p0).length - 1 + 1)))));

  return result_822084377;

}

function HEX21HEX26__pureZhashes_u4(h_p0, val_p1) {
  var result_822083591 = 0;

    var h_822083592 = Number(BigInt.asUintN(32, BigInt(h_p0)));
    var val_822083593 = Number(BigInt.asUintN(32, BigInt(val_p1)));
    var res_822083594 = ((h_822083592 + val_822083593) >>> 0);
    res_822083594 = ((res_822083594 + ((res_822083594 << 10) >>> 0)) >>> 0);
    res_822083594 = ((res_822083594 ^ (res_822083594 >>> 6)) >>> 0);
    result_822083591 = Number(BigInt.asIntN(32, BigInt(res_822083594)));

  return result_822083591;

}

function HEX21HEX24__pureZhashes_u19(h_p0) {
  var result_822083605 = 0;

    var h_822083606 = Number(BigInt.asUintN(32, BigInt(h_p0)));
    var res_822083611 = ((h_822083606 + ((h_822083606 << 3) >>> 0)) >>> 0);
    res_822083611 = ((res_822083611 ^ (res_822083611 >>> 11)) >>> 0);
    res_822083611 = ((res_822083611 + ((res_822083611 << 15) >>> 0)) >>> 0);
    result_822083605 = Number(BigInt.asIntN(32, BigInt(res_822083611)));

  return result_822083605;

}

function hashIgnoreCase__pureZhashes_u870(x_p0) {
  var result_822084456 = 0;

    var h_822084457 = 0;
    Label1: {
      var i_822084462 = 0;
      var colontmp__570427624 = 0;
      colontmp__570427624 = ((x_p0).length - 1);
      var res_570427625 = 0;
      Label2: {
          Label3: while (true) {
          if (!(res_570427625 <= colontmp__570427624)) break Label3;
            i_822084462 = res_570427625;
            var c_822084463 = x_p0[i_822084462];
            if ((ConstSet91[c_822084463] != undefined)) {
            c_822084463 = (c_822084463 + 32);
            }
            
            h_822084457 = HEX21HEX26__pureZhashes_u4(h_822084457, c_822084463);
            res_570427625 += 1;
          }
      };
    };
    result_822084456 = HEX21HEX24__pureZhashes_u19(h_822084457);

  return result_822084456;

}

function hashIgnoreStyle__pureZhashes_u803(x_p0) {
  var result_822084389 = 0;

    var h_822084390 = 0;
    var i_822084391 = 0;
    var xLen_822084392 = (x_p0).length;
    Label1: {
        Label2: while (true) {
        if (!(i_822084391 < xLen_822084392)) break Label2;
          var c_822084393 = x_p0[i_822084391];
          if ((c_822084393 == 95)) {
          i_822084391 += 1;
          }
          else {
            if ((ConstSet92[c_822084393] != undefined)) {
            c_822084393 = (c_822084393 + 32);
            }
            
            h_822084390 = HEX21HEX26__pureZhashes_u4(h_822084390, c_822084393);
            i_822084391 += 1;
          }
          
        }
    };
    result_822084389 = HEX21HEX24__pureZhashes_u19(h_822084390);

  return result_822084389;

}

function myhash__pureZstrtabs_u137(t_p0, key_p1) {
  var result_1291845772 = 0;

    switch (t_p0.mode) {
    case 0:
      result_1291845772 = hash__pureZhashes_u791(key_p1);
      break;
    case 1:
      result_1291845772 = hashIgnoreCase__pureZhashes_u870(key_p1);
      break;
    case 2:
      result_1291845772 = hashIgnoreStyle__pureZhashes_u803(key_p1);
      break;
    }

  return result_1291845772;

}

function cmpStrings(a_p0, b_p1) {
        if (a_p0 == b_p1) return 0;
    if (!a_p0) return -1;
    if (!b_p1) return 1;
    for (var i = 0; i < a_p0.length && i < b_p1.length; i++) {
      var result = a_p0[i] - b_p1[i];
      if (result != 0) return result;
    }
    return a_p0.length - b_p1.length;
  

  
}

function cmp__system_u1446(x_p0, y_p1) {
  var result_33557108 = 0;

    result_33557108 = cmpStrings(x_p0, y_p1);

  return result_33557108;

}

function toLowerAscii__stdZprivateZstrimpl_u1(c_p0) {
  var result_1157627907 = 0;

    if ((ConstSet93[c_p0] != undefined)) {
    result_1157627907 = (c_p0 + 32);
    }
    else {
      result_1157627907 = c_p0;
    }
    

  return result_1157627907;

}

function nsuCmpIgnoreCase(a_p0, b_p1) {
  var result_1040187582 = 0;

  BeforeRet: {
    var aLenHEX60gensym20_1040187589 = (a_p0).length;
    var bLenHEX60gensym20_1040187590 = (b_p1).length;
    var iHEX60gensym20_1040187591 = 0;
    var mHEX60gensym20_1040187592 = nimMin(aLenHEX60gensym20_1040187589, bLenHEX60gensym20_1040187590);
    Label1: {
        Label2: while (true) {
        if (!(iHEX60gensym20_1040187591 < mHEX60gensym20_1040187592)) break Label2;
          result_1040187582 = (toLowerAscii__stdZprivateZstrimpl_u1(a_p0[iHEX60gensym20_1040187591]) - toLowerAscii__stdZprivateZstrimpl_u1(b_p1[iHEX60gensym20_1040187591]));
          if (!((result_1040187582 == 0))) {
          break BeforeRet;
          }
          
          iHEX60gensym20_1040187591 += 1;
        }
    };
    result_1040187582 = (aLenHEX60gensym20_1040187589 - bLenHEX60gensym20_1040187590);
  };

  return result_1040187582;

}

function nsuCmpIgnoreStyle(a_p0, b_p1) {
          var Temporary7;
          var Temporary8;

  var result_1040187607 = 0;

  BeforeRet: {
    var aLenHEX60gensym24_1040187616 = (a_p0).length;
    var bLenHEX60gensym24_1040187617 = (b_p1).length;
    var iHEX60gensym24_1040187618 = 0;
    var jHEX60gensym24_1040187619 = 0;
    Label1: {
        Label2: while (true) {
        if (!true) break Label2;
          Label3: {
              Label4: while (true) {
              if (!((iHEX60gensym24_1040187618 < aLenHEX60gensym24_1040187616) && (a_p0[iHEX60gensym24_1040187618] == 95))) break Label4;
                iHEX60gensym24_1040187618 += 1;
              }
          };
          Label5: {
              Label6: while (true) {
              if (!((jHEX60gensym24_1040187619 < bLenHEX60gensym24_1040187617) && (b_p1[jHEX60gensym24_1040187619] == 95))) break Label6;
                jHEX60gensym24_1040187619 += 1;
              }
          };
          if ((iHEX60gensym24_1040187618 < aLenHEX60gensym24_1040187616)) {
          Temporary7 = toLowerAscii__stdZprivateZstrimpl_u1(a_p0[iHEX60gensym24_1040187618]);
          }
          else {
          Temporary7 = 0;
          }
          
          var aaHEX60gensym24_1040187630 = Temporary7;
          if ((jHEX60gensym24_1040187619 < bLenHEX60gensym24_1040187617)) {
          Temporary8 = toLowerAscii__stdZprivateZstrimpl_u1(b_p1[jHEX60gensym24_1040187619]);
          }
          else {
          Temporary8 = 0;
          }
          
          var bbHEX60gensym24_1040187631 = Temporary8;
          result_1040187607 = (aaHEX60gensym24_1040187630 - bbHEX60gensym24_1040187631);
          if (!((result_1040187607 == 0))) {
          break BeforeRet;
          }
          
          if ((aLenHEX60gensym24_1040187616 <= iHEX60gensym24_1040187618)) {
          if ((bLenHEX60gensym24_1040187617 <= jHEX60gensym24_1040187619)) {
          result_1040187607 = 0;
          break BeforeRet;
          }
          
          result_1040187607 = (-1);
          break BeforeRet;
          }
          else {
          if ((bLenHEX60gensym24_1040187617 <= jHEX60gensym24_1040187619)) {
          result_1040187607 = 1;
          break BeforeRet;
          }
          }
          iHEX60gensym24_1040187618 += 1;
          jHEX60gensym24_1040187619 += 1;
        }
    };
  };

  return result_1040187607;

}

function myCmp__pureZstrtabs_u141(t_p0, a_p1, b_p2) {
  var result_1291845777 = false;

    switch (t_p0.mode) {
    case 0:
      result_1291845777 = (cmp__system_u1446(a_p1, b_p2) == 0);
      break;
    case 1:
      result_1291845777 = (nsuCmpIgnoreCase(a_p1, b_p2) == 0);
      break;
    case 2:
      result_1291845777 = (nsuCmpIgnoreStyle(a_p1, b_p2) == 0);
      break;
    }

  return result_1291845777;

}

function nextTry__pureZstrtabs_u153(h_p0, maxHash_p1) {
  var result_1291845788 = 0;

    result_1291845788 = ((h_p0 + 1) & maxHash_p1);

  return result_1291845788;

}

function rawGet__pureZstrtabs_u157(t_p0, key_p1) {
  var result_1291845792 = 0;

  BeforeRet: {
    var h_1291845796 = (myhash__pureZstrtabs_u137(t_p0, key_p1) & (t_p0.data).length - 1);
    Label1: {
        Label2: while (true) {
        if (!t_p0.data[h_1291845796].Field2) break Label2;
          if (myCmp__pureZstrtabs_u141(t_p0, t_p0.data[h_1291845796].Field0, key_p1)) {
          result_1291845792 = h_1291845796;
          break BeforeRet;
          }
          
          h_1291845796 = nextTry__pureZstrtabs_u153(h_1291845796, (t_p0.data).length - 1);
        }
    };
    result_1291845792 = (-1);
  };

  return result_1291845792;

}

function mustRehash__pureZstrtabs_u146(length_p0, counter_p1) {
  var result_1291845781 = false;

    result_1291845781 = (((length_p0 * 2) < (counter_p1 * 3)) || ((length_p0 - counter_p1) < 4));

  return result_1291845781;

}

function rawInsert__pureZstrtabs_u212(t_p0, data_p1, data_p1_Idx, key_p2, val_p3) {
    var h_1291845852 = (myhash__pureZstrtabs_u137(t_p0, key_p2) & (data_p1[data_p1_Idx]).length - 1);
    Label1: {
        Label2: while (true) {
        if (!data_p1[data_p1_Idx][h_1291845852].Field2) break Label2;
          h_1291845852 = nextTry__pureZstrtabs_u153(h_1291845852, (data_p1[data_p1_Idx]).length - 1);
        }
    };
    data_p1[data_p1_Idx][h_1291845852].Field0 = nimCopy(null, key_p2, NTI33554449);
    data_p1[data_p1_Idx][h_1291845852].Field1 = nimCopy(null, val_p3, NTI33554449);
    data_p1[data_p1_Idx][h_1291845852].Field2 = true;

  
}

function enlarge__pureZstrtabs_u224(t_p0) {
            var Temporary4;
            var Temporary5;

    var n_1291845858 = [[]];
    n_1291845858[0] = new Array(((t_p0.data).length * 2)); for (var i = 0 ; i < ((t_p0.data).length * 2) ; ++i) { n_1291845858[0][i] = {Field0: [], Field1: [], Field2: false}; }    Label1: {
      var i_1291845875 = 0;
      var colontmp__570427633 = 0;
      colontmp__570427633 = (t_p0.data).length - 1;
      var res_570427634 = 0;
      Label2: {
          Label3: while (true) {
          if (!(res_570427634 <= colontmp__570427633)) break Label3;
            i_1291845875 = res_570427634;
            if (t_p0.data[i_1291845875].Field2) {
            Temporary4 = t_p0.data[i_1291845875].Field0;
            t_p0.data[i_1291845875].Field0 = [];
            Temporary5 = t_p0.data[i_1291845875].Field1;
            t_p0.data[i_1291845875].Field1 = [];
            rawInsert__pureZstrtabs_u212(t_p0, n_1291845858, 0, Temporary4, Temporary5);
            }
            
            res_570427634 += 1;
          }
      };
    };
    var HEX3Atmp_570427637 = nimCopy(null, t_p0.data, NTI1291845637);
    t_p0.data = n_1291845858[0];
    n_1291845858[0] = HEX3Atmp_570427637;

  
}

function nstPut(t_p0, key_p1, val_p2) {
    var index_1291845912 = rawGet__pureZstrtabs_u157(t_p0, key_p1);
    if ((0 <= index_1291845912)) {
    t_p0.data[index_1291845912].Field1 = nimCopy(null, val_p2, NTI33554449);
    }
    else {
      if (mustRehash__pureZstrtabs_u146((t_p0.data).length, t_p0.counter)) {
      enlarge__pureZstrtabs_u224(t_p0);
      }
      
      rawInsert__pureZstrtabs_u212(t_p0, t_p0, "data", key_p1, val_p2);
      t_p0.counter += 1;
    }
    

  
}

function nstnewStringTableWithTableConstr(keyValuePairs_p0, mode_p1) {
  var result_1291846001 = null;

    result_1291846001 = nstnewStringTable(mode_p1);
    Label1: {
      var key_1291846015 = [];
      var val_1291846016 = [];
      var i_570427620 = 0;
      Label2: {
          Label3: while (true) {
          if (!(i_570427620 < (keyValuePairs_p0).length)) break Label3;
            key_1291846015 = keyValuePairs_p0[i_570427620]["Field0"];
            val_1291846016 = keyValuePairs_p0[i_570427620]["Field1"];
            nstPut(result_1291846001, key_1291846015, val_1291846016);
            i_570427620 += 1;
          }
      };
    };

  return result_1291846001;

}

function attrs__pureZxmltree_u731(n_p0) {
    var Temporary1;

  var result_1258291933 = null;

    var Temporary1 = n_p0;
    if (ConstSet94[Temporary1.k]===undefined) { raiseFieldError2(makeNimstrLit("field \'fAttr\' is not accessible for type \'XmlNodeObj\' using \'k = "), reprDiscriminant(Temporary1.k, NTI1258291204)); }
    result_1258291933 = Temporary1.fAttr;

  return result_1258291933;

}

function newCData__pureZxmltree_u152(cdata_p0) {
    var Temporary1;

  var result_1258291354 = null;

    result_1258291354 = newXmlNode__pureZxmltree_u32(3);
    var Temporary1 = result_1258291354;
    if (ConstSet95[Temporary1.k]===undefined) { raiseFieldError2(makeNimstrLit("field \'fText\' is not accessible for type \'XmlNodeObj\' using \'k = "), reprDiscriminant(Temporary1.k, NTI1258291204)); }
    Temporary1.fText = nimCopy(null, cdata_p0, NTI33554449);

  return result_1258291354;

}

function newEntity__pureZxmltree_u155(entity_p0) {
    var Temporary1;

  var result_1258291357 = null;

    result_1258291357 = newXmlNode__pureZxmltree_u32(4);
    var Temporary1 = result_1258291357;
    if (ConstSet96[Temporary1.k]===undefined) { raiseFieldError2(makeNimstrLit("field \'fText\' is not accessible for type \'XmlNodeObj\' using \'k = "), reprDiscriminant(Temporary1.k, NTI1258291204)); }
    Temporary1.fText = nimCopy(null, entity_p0, NTI33554449);

  return result_1258291357;

}

function parse__OOZsrcZmargraveZsinglexml_u13(x_p0, errors_p1, errors_p1_Idx) {
      var Temporary1;
      var Temporary2;
      var Temporary3;
      var Temporary4;
              var Temporary7;
              var Temporary8;
      var Temporary9;
      var Temporary10;

  var result_1224736798 = null;

    switch (kind__pureZparsexml_u175(x_p0)) {
    case 4:
      Temporary1 = x_p0.a;
      x_p0.a = [];
      result_1224736798 = newComment__pureZxmltree_u149(Temporary1);
      next__pureZparsexml_u627(x_p0);
      break;
    case 2:
    case 3:
      Temporary2 = x_p0.a;
      x_p0.a = [];
      result_1224736798 = newText__pureZxmltree_u139(Temporary2);
      next__pureZparsexml_u627(x_p0);
      break;
    case 5:
    case 13:
      next__pureZparsexml_u627(x_p0);
      break;
    case 0:
      errors_p1[errors_p1_Idx] = true;
      next__pureZparsexml_u627(x_p0);
      break;
    case 6:
      Temporary3 = x_p0.a;
      x_p0.a = [];
      result_1224736798 = newElement__pureZxmltree_u100(Temporary3);
      next__pureZparsexml_u627(x_p0);
      untilElementEnd__OOZsrcZmargraveZsinglexml_u16(x_p0, result_1224736798, errors_p1, errors_p1_Idx);
      break;
    case 7:
      errors_p1[errors_p1_Idx] = true;
      break;
    case 8:
      Temporary4 = x_p0.a;
      x_p0.a = [];
      result_1224736798 = newElement__pureZxmltree_u100(Temporary4);
      next__pureZparsexml_u627(x_p0);
      attrsHEX3D__pureZxmltree_u744(result_1224736798, nstnewStringTableWithTableConstr([], 0));
      Label5: {
          Label6: while (true) {
          if (!true) break Label6;
            switch (kind__pureZparsexml_u175(x_p0)) {
            case 9:
              Temporary7 = x_p0.a;
              x_p0.a = [];
              Temporary8 = x_p0.b;
              x_p0.b = [];
              nstPut(attrs__pureZxmltree_u731(result_1224736798), Temporary7, Temporary8);
              next__pureZparsexml_u627(x_p0);
              break;
            case 10:
              next__pureZparsexml_u627(x_p0);
              break Label5;
              break;
            case 0:
              errors_p1[errors_p1_Idx] = true;
              next__pureZparsexml_u627(x_p0);
              break Label5;
              break;
            default: 
              errors_p1[errors_p1_Idx] = true;
              next__pureZparsexml_u627(x_p0);
              break Label5;
              break;
            }
          }
      };
      untilElementEnd__OOZsrcZmargraveZsinglexml_u16(x_p0, result_1224736798, errors_p1, errors_p1_Idx);
      break;
    case 9:
    case 10:
      errors_p1[errors_p1_Idx] = true;
      next__pureZparsexml_u627(x_p0);
      break;
    case 11:
      Temporary9 = x_p0.a;
      x_p0.a = [];
      result_1224736798 = newCData__pureZxmltree_u152(Temporary9);
      next__pureZparsexml_u627(x_p0);
      break;
    case 12:
      Temporary10 = x_p0.a;
      x_p0.a = [];
      result_1224736798 = newEntity__pureZxmltree_u155(Temporary10);
      next__pureZparsexml_u627(x_p0);
      break;
    case 1:
      break;
    }

  return result_1224736798;

}

function untilElementEnd__OOZsrcZmargraveZsinglexml_u16(x_p0, result_p1, errors_p2, errors_p2_Idx) {
  BeforeRet: {
    Label1: {
        Label2: while (true) {
        if (!true) break Label2;
          switch (kind__pureZparsexml_u175(x_p0)) {
          case 7:
            if (eqStrings(x_p0.a, tag__pureZxmltree_u206(result_p1))) {
            break BeforeRet;
            }
            else {
              errors_p2[errors_p2_Idx] = true;
            }
            
            break Label1;
            break;
          case 1:
            errors_p2[errors_p2_Idx] = true;
            break Label1;
            break;
          default: 
            addNode__OOZsrcZmargraveZsinglexml_u6(result_p1, parse__OOZsrcZmargraveZsinglexml_u13(x_p0, errors_p2, errors_p2_Idx));
            break;
          }
        }
    };
  };

  
}

function parseXml__OOZsrcZmargraveZsinglexml_u158(text_p0, i_p1) {
            var Temporary3;

  var result_1224736929 = {Field0: false, Field1: 0};

    var errors_1224736930 = [false];
    var x_1224736931 = [({m_type: NTI1241513991, a: [], b: [], c: [], kind: 0, err: 0, state: 0, cIsEmpty: false, filename: [], options: {}, bufpos: 0, buf: [], input: null, lineNumber: 0, sentinel: 0, lineStart: 0, offsetBase: 0, refillChars: {}})];
    var stream_1224736932 = newStringStream__pureZstreams_u1133(text_p0);
    setPosition__pureZstreams_u70(stream_1224736932, i_p1);
    open__pureZparsexml_u65(x_1224736931[0], stream_1224736932, [], ConstSet76);
    next__pureZparsexml_u627(x_1224736931[0]);
    Label1: {
        Label2: while (true) {
        if (!true) break Label2;
          switch (kind__pureZparsexml_u175(x_1224736931[0])) {
          case 8:
          case 6:
            Temporary3 = x_1224736931[0].a;
            x_1224736931[0].a = [];
            var node_1224736947 = newElement__pureZxmltree_u100(Temporary3);
            untilElementEnd__OOZsrcZmargraveZsinglexml_u16(x_1224736931[0], node_1224736947, errors_1224736930, 0);
            result_1224736929["Field0"] = true;
            break;
          case 4:
          case 13:
          case 5:
          case 11:
            next__pureZparsexml_u627(x_1224736931[0]);
            result_1224736929["Field0"] = true;
            break;
          case 7:
          case 2:
          case 3:
          case 1:
            result_1224736929["Field0"] = true;
            break Label1;
            break;
          default: 
            result_1224736929["Field0"] = false;
            break Label1;
            break;
          }
        }
    };
    result_1224736929["Field1"] = (i_p1 + x_1224736931[0].bufpos);

  return result_1224736929;

}

function parseAmpStr__converter_u1354(parser_p0) {
    var Temporary1;

  var result_570426702 = [null];

  BeforeRet: {
    var initialPos_570426703 = parser_p0.pos;
    if ((initialPos_570426703 < ((parser_p0.str) == null ? 0 : (parser_p0.str).length))) {
    Temporary1 = parser_p0.str.charCodeAt(initialPos_570426703);
    }
    else {
    Temporary1 = 32;
    }
    
    var firstChar_570426704 = Temporary1;
    switch (firstChar_570426704) {
    case 65:
    case 66:
    case 67:
    case 68:
    case 69:
    case 70:
    case 71:
    case 72:
    case 73:
    case 74:
    case 75:
    case 76:
    case 77:
    case 78:
    case 79:
    case 80:
    case 81:
    case 82:
    case 83:
    case 84:
    case 85:
    case 86:
    case 87:
    case 88:
    case 89:
    case 90:
    case 97:
    case 98:
    case 99:
    case 100:
    case 101:
    case 102:
    case 103:
    case 104:
    case 105:
    case 106:
    case 107:
    case 108:
    case 109:
    case 110:
    case 111:
    case 112:
    case 113:
    case 114:
    case 115:
    case 116:
    case 117:
    case 118:
    case 119:
    case 120:
    case 121:
    case 122:
      parser_p0.pos += 2;
      result_570426702[0] = "&";
      Label2: {
        var ch_570426710 = 0;
        Label3: {
            Label4: while (true) {
            if (!(parser_p0.pos < ((parser_p0.str) == null ? 0 : (parser_p0.str).length))) break Label4;
              ch_570426710 = parser_p0.str.charCodeAt((parser_p0.pos + 0));
              add__OOZsrcZmargraveZcommon_u8(result_570426702, 0, ch_570426710);
              if ((ch_570426710 == 59)) {
              break Label2;
              }
              else {
              if (!((Letters_1040187407[ch_570426710] != undefined))) {
              parser_p0.pos = initialPos_570426703;
              result_570426702[0] = "&amp;";
              break BeforeRet;
              }
              }
              parser_p0.pos += 1;
            }
        };
      };
      break;
    case 35:
      parser_p0.pos += 2;
      result_570426702[0] = "&";
      Label5: {
        var ch_570426720 = 0;
        Label6: {
            Label7: while (true) {
            if (!(parser_p0.pos < ((parser_p0.str) == null ? 0 : (parser_p0.str).length))) break Label7;
              ch_570426720 = parser_p0.str.charCodeAt((parser_p0.pos + 0));
              add__OOZsrcZmargraveZcommon_u8(result_570426702, 0, ch_570426720);
              if ((ch_570426720 == 59)) {
              break Label5;
              }
              else {
              if (!((Digits_1040187411[ch_570426720] != undefined))) {
              parser_p0.pos = initialPos_570426703;
              result_570426702[0] = "&amp;";
              break BeforeRet;
              }
              }
              parser_p0.pos += 1;
            }
        };
      };
      break;
    default: 
      result_570426702[0] = "&amp;";
      break;
    }
  };

  return result_570426702[0];

}

function parseDelimed__converter_u134(parser_p0, delim_p2, singleLine_p3) {
                var Temporary5;
                  var Temporary6;
                    var Temporary7;
                    var Temporary8;
              var Temporary9;
                    var Temporary10;
                    var Temporary11;
              var Temporary12;
                var Temporary13;
              var Temporary14;
              var Temporary15;
              var Temporary16;
              var Temporary17;
              var Temporary18;
              var Temporary19;
                var Temporary20;
                var Temporary21;
              var Temporary22;
                var Temporary23;
                var Temporary24;
                var Temporary25;
                var Temporary26;
                var Temporary27;
                var Temporary28;
              var Temporary29;
              var Temporary30;
              var Temporary31;
              var Temporary32;
              var Temporary33;
                var Temporary34;
              var Temporary35;
              var Temporary36;
              var Temporary37;
                var Temporary38;
                  var Temporary39;
                    var Temporary40;
                    var Temporary41;
                var Temporary42;
                var Temporary43;

  var result_570425484 = {Field0: 0, Field1: []};

  BeforeRet: {
    var HEX3Aenv_570427409 = null;
    HEX3Aenv_570427409 = {m_type: NTI570426741, singleLine0: false, elems1: [], lastStr2: null, initialPos3: 0};
    HEX3Aenv_570427409.singleLine0 = singleLine_p3;
    var escaped_570425485 = false;
    HEX3Aenv_570427409.lastStr2 = newStr__OOZsrcZmargraveZelement_u57("");
    HEX3Aenv_570427409.elems1 = nimCopy(null, [HEX3Aenv_570427409.lastStr2], NTI788529243);
    Label1: {
      var ch_570425500 = 0;
      Label2: {
          Label3: while (true) {
          if (!(parser_p0.pos < ((parser_p0.str) == null ? 0 : (parser_p0.str).length))) break Label3;
            ch_570425500 = parser_p0.str.charCodeAt((parser_p0.pos + 0));
            Label4: {
                if (!(escaped_570425485)) Temporary5 = true; else {                  if ((ConstSet14[ch_570425500] != undefined)) Temporary6 = true; else {                    if ({curlyNoHtmlEscape: false, insertLineBreaks: false, inlineHtmlHandler: null, codeBlockLanguageHandler: null, setLinkHandler: null, disableLineEscaping: false, disableTextAlignExtension: false, disableCurly: false, disableRawCurly: false, disableCodeFormat: false}.disableLineEscaping) Temporary8 = true; else {                      Temporary8 = parser_p0.options.disableLineEscaping;                    }                    if (!!(Temporary8)) Temporary7 = false; else {                      Temporary7 = (ConstSet15[ch_570425500] != undefined);                    }                    Temporary6 = Temporary7;                  }                  Temporary5 = Temporary6;                }              if (Temporary5) {
              if (escaped_570425485) {
              var Temporary9 = HEX3Aenv_570427409.lastStr2;
              if (ConstSet16[Temporary9.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary9.isText, NTI33554466)); }
              add__converter_u175(Temporary9, "str");
              }
              
              HEX3Aenv_570427409.initialPos3 = parser_p0.pos;
              switch (toJSStr(delim_p2)) {
              case "":
                break;
              case "*":
                if (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [42,42], 0)) {
                var tmpTuple_570426250 = parseDelimed__converter_u134(parser_p0, [42,42], HEX3Aenv_570427409.singleLine0);
                var finishReason_570426251 = tmpTuple_570426250["Field0"];
                var parsedElems_570426252 = nimCopy(null, tmpTuple_570426250["Field1"], NTI1023410270);
                if ((finishReason_570426251 == 0)) {
                HEX3Aenv_570427409.elems1.push(newElem__OOZsrcZmargraveZelement_u114(16, parsedElems_570426252));;
                HEX3Aenv_570427409.lastStr2 = newStr__OOZsrcZmargraveZelement_u57("");
                HEX3Aenv_570427409.elems1.push(HEX3Aenv_570427409.lastStr2);;
                break Label4;
                }
                else {
                  parser_p0.pos = HEX3Aenv_570427409.initialPos3;
                  if (!(surroundedWhitespace__OOZsrcZmargraveZparserZutils_u652(parser_p0, 0))) {
                  var colontmp__570427477 = 0;
                  var colontmp__570427478 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
                  result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427477, Field1: nimCopy(null, colontmp__570427478, NTI788529243)}, NTI1023410269);
                  break BeforeRet;
                  }
                  else {
                    var Temporary10 = HEX3Aenv_570427409.lastStr2;
                    if (ConstSet19[Temporary10.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary10.isText, NTI33554466)); }
                    add__converter_u922(Temporary10, "str");
                    break Label4;
                  }
                  
                }
                
                }
                else {
                if ((!(surroundedWhitespace__OOZsrcZmargraveZparserZutils_u652(parser_p0, 0)) && nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [42], 0))) {
                parser_p0.pos -= 1;
                var colontmp__570427479 = 0;
                var colontmp__570427480 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
                result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427479, Field1: nimCopy(null, colontmp__570427480, NTI788529243)}, NTI1023410269);
                break BeforeRet;
                }
                }
                break;
              case "_":
                if (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [95,95], 0)) {
                var tmpTuple_570426281 = parseDelimed__converter_u134(parser_p0, [95,95], HEX3Aenv_570427409.singleLine0);
                var finishReason_570426282 = tmpTuple_570426281["Field0"];
                var parsedElems_570426283 = nimCopy(null, tmpTuple_570426281["Field1"], NTI1023410270);
                if ((finishReason_570426282 == 0)) {
                HEX3Aenv_570427409.elems1.push(newElem__OOZsrcZmargraveZelement_u114(19, parsedElems_570426283));;
                HEX3Aenv_570427409.lastStr2 = newStr__OOZsrcZmargraveZelement_u57("");
                HEX3Aenv_570427409.elems1.push(HEX3Aenv_570427409.lastStr2);;
                break Label4;
                }
                else {
                  parser_p0.pos = HEX3Aenv_570427409.initialPos3;
                  if (onlyNextWhitespace__OOZsrcZmargraveZparserZutils_u660(parser_p0, 0)) {
                  var colontmp__570427481 = 0;
                  var colontmp__570427482 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
                  result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427481, Field1: nimCopy(null, colontmp__570427482, NTI788529243)}, NTI1023410269);
                  break BeforeRet;
                  }
                  else {
                    var Temporary11 = HEX3Aenv_570427409.lastStr2;
                    if (ConstSet20[Temporary11.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary11.isText, NTI33554466)); }
                    add__converter_u953(Temporary11, "str");
                    break Label4;
                  }
                  
                }
                
                }
                else {
                if ((onlyNextWhitespace__OOZsrcZmargraveZparserZutils_u660(parser_p0, 0) && nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [95], 0))) {
                parser_p0.pos -= 1;
                var colontmp__570427483 = 0;
                var colontmp__570427484 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
                result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427483, Field1: nimCopy(null, colontmp__570427484, NTI788529243)}, NTI1023410269);
                break BeforeRet;
                }
                }
                break;
              case " ":
                if ((Whitespace_1040187406[ch_570425500] != undefined)) {
                parser_p0.pos -= 1;
                var colontmp__570427485 = 0;
                var colontmp__570427486 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
                result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427485, Field1: nimCopy(null, colontmp__570427486, NTI788529243)}, NTI1023410269);
                break BeforeRet;
                }
                
                break;
              default: 
                if (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, delim_p2, 0)) {
                parser_p0.pos -= 1;
                var colontmp__570427487 = 0;
                var colontmp__570427488 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
                result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427487, Field1: nimCopy(null, colontmp__570427488, NTI788529243)}, NTI1023410269);
                break BeforeRet;
                }
                
                break;
              }
              if (((HEX3Aenv_570427409.singleLine0 && (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [13,10], 0) || nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [10], 0))) || (!(HEX3Aenv_570427409.singleLine0) && (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [13,10,13,10], 0) || nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [10,10], 0))))) {
              if ((HEX3Aenv_570427409.singleLine0 && ((delim_p2).length == 0))) {
              parser_p0.pos -= 1;
              }
              else {
                parser_p0.pos = HEX3Aenv_570427409.initialPos3;
              }
              
              if (((delim_p2).length == 0)) {
              Temporary12 = 1;
              }
              else {
              Temporary12 = 0;
              }
              
              var colontmp__570427489 = Temporary12;
              var colontmp__570427490 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
              result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427489, Field1: nimCopy(null, colontmp__570427490, NTI788529243)}, NTI1023410269);
              break BeforeRet;
              }
              else {
              if ((!(HEX3Aenv_570427409.singleLine0) && (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [13,10], 0) || nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [10], 0)))) {
              parser_p0.pos -= 1;
                var options_570426333 = nimCopy(null, parser_p0.options, NTI1191182340);
              if (options_570426333.insertLineBreaks) {
              HEX3Aenv_570427409.elems1.push(newElem__OOZsrcZmargraveZelement_u114(2, []));;
              HEX3Aenv_570427409.lastStr2 = newStr__OOZsrcZmargraveZelement_u57("");
              HEX3Aenv_570427409.elems1.push(HEX3Aenv_570427409.lastStr2);;
              }
              else {
                var Temporary13 = HEX3Aenv_570427409.lastStr2;
                if (ConstSet22[Temporary13.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary13.isText, NTI33554466)); }
              add__OOZsrcZmargraveZcommon_u8(Temporary13, "str", ch_570425500);
              }
              
              }
              else {
              if ((nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [32,32,13,10], 0) || nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [32,32,10], 0))) {
              parser_p0.pos -= 1;
              HEX3Aenv_570427409.elems1.push(newElem__OOZsrcZmargraveZelement_u114(2, []));;
              HEX3Aenv_570427409.lastStr2 = newStr__OOZsrcZmargraveZelement_u57("");
              HEX3Aenv_570427409.elems1.push(HEX3Aenv_570427409.lastStr2);;
              }
              else {
              if (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [96,96,96], 0)) {
              HEX3Aenv_570427409.elems1.push(parseCodeBlock__converter_u1012(parser_p0, 96));;
              HEX3Aenv_570427409.lastStr2 = newStr__OOZsrcZmargraveZelement_u57("");
              HEX3Aenv_570427409.elems1.push(HEX3Aenv_570427409.lastStr2);;
              }
              else {
              if (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [126,126,126], 0)) {
              HEX3Aenv_570427409.elems1.push(parseCodeBlock__converter_u1012(parser_p0, 126));;
              HEX3Aenv_570427409.lastStr2 = newStr__OOZsrcZmargraveZelement_u57("");
              HEX3Aenv_570427409.elems1.push(HEX3Aenv_570427409.lastStr2);;
              }
              else {
              if (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [94,40], 0)) {
              Temporary14 = parseAux__converter_u180.bind(HEX3Aenv_570427409); Temporary14.ClP_0 = parseAux__converter_u180; Temporary14.ClE_0 = HEX3Aenv_570427409;
              var reasonHEX60gensym71_570426431 = Temporary14(13, [41], parser_p0, ConstSet25);
              if ((ConstSet26[reasonHEX60gensym71_570426431] != undefined)) {
              var colontmp__570427491 = reasonHEX60gensym71_570426431;
              var colontmp__570427492 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
              result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427491, Field1: nimCopy(null, colontmp__570427492, NTI788529243)}, NTI1023410269);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [42,42], 0)) {
              Temporary15 = parseAux__converter_u180.bind(HEX3Aenv_570427409); Temporary15.ClP_0 = parseAux__converter_u180; Temporary15.ClE_0 = HEX3Aenv_570427409;
              var reasonHEX60gensym72_570426437 = Temporary15(16, [42,42], parser_p0, ConstSet27);
              if ((ConstSet28[reasonHEX60gensym72_570426437] != undefined)) {
              var colontmp__570427493 = reasonHEX60gensym72_570426437;
              var colontmp__570427494 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
              result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427493, Field1: nimCopy(null, colontmp__570427494, NTI788529243)}, NTI1023410269);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [95,95], 0)) {
              Temporary16 = parseAux__converter_u180.bind(HEX3Aenv_570427409); Temporary16.ClP_0 = parseAux__converter_u180; Temporary16.ClE_0 = HEX3Aenv_570427409;
              var reasonHEX60gensym73_570426443 = Temporary16(19, [95,95], parser_p0, ConstSet29);
              if ((ConstSet30[reasonHEX60gensym73_570426443] != undefined)) {
              var colontmp__570427495 = reasonHEX60gensym73_570426443;
              var colontmp__570427496 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
              result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427495, Field1: nimCopy(null, colontmp__570427496, NTI788529243)}, NTI1023410269);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [126,126], 0)) {
              Temporary17 = parseAux__converter_u180.bind(HEX3Aenv_570427409); Temporary17.ClP_0 = parseAux__converter_u180; Temporary17.ClE_0 = HEX3Aenv_570427409;
              var reasonHEX60gensym74_570426449 = Temporary17(20, [126,126], parser_p0, ConstSet31);
              if ((ConstSet32[reasonHEX60gensym74_570426449] != undefined)) {
              var colontmp__570427497 = reasonHEX60gensym74_570426449;
              var colontmp__570427498 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
              result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427497, Field1: nimCopy(null, colontmp__570427498, NTI788529243)}, NTI1023410269);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [33,91], 0)) {
              Temporary18 = bracket__converter_u267.bind(HEX3Aenv_570427409); Temporary18.ClP_0 = bracket__converter_u267; Temporary18.ClE_0 = HEX3Aenv_570427409;
              var reason_570426454 = Temporary18(true, parser_p0);
              if ((ConstSet59[reason_570426454] != undefined)) {
              var colontmp__570427499 = reason_570426454;
              var colontmp__570427500 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
              result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427499, Field1: nimCopy(null, colontmp__570427500, NTI788529243)}, NTI1023410269);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 123, 0)) {
                var options_570426462 = nimCopy(null, parser_p0.options, NTI1191182340);
              if (options_570426462.disableCurly) {
              var Temporary19 = HEX3Aenv_570427409.lastStr2;
              if (ConstSet60[Temporary19.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary19.isText, NTI33554466)); }
              add__converter_u1120(Temporary19, "str");
              }
              else {
                var Temporary20 = HEX3Aenv_570427409.lastStr2;
                if (ConstSet61[Temporary20.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary20.isText, NTI33554466)); }
              if (null != (Temporary21 = parseCurly__converter_u1124(parser_p0), Temporary21)) { if (null == Temporary20.str) Temporary20.str = Temporary21; else Temporary20.str += Temporary21; };
              }
              
              }
              else {
              if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 91, 0)) {
              Temporary22 = bracket__converter_u267.bind(HEX3Aenv_570427409); Temporary22.ClP_0 = bracket__converter_u267; Temporary22.ClE_0 = HEX3Aenv_570427409;
              var reason_570426506 = Temporary22(false, parser_p0);
              if ((ConstSet62[reason_570426506] != undefined)) {
              var colontmp__570427501 = reason_570426506;
              var colontmp__570427502 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
              result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427501, Field1: nimCopy(null, colontmp__570427502, NTI788529243)}, NTI1023410269);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [96,96], 0)) {
                var options_570426515 = nimCopy(null, parser_p0.options, NTI1191182340);
              if (options_570426515.disableCodeFormat) {
              var currentPos_570426516 = parser_p0.pos;
              var tmpTuple_570426555 = parseCodePreformat__converter_u1173(parser_p0, [96,96]);
              var finishReason_570426556 = tmpTuple_570426555["Field0"];
              var parsedElem_570426557 = tmpTuple_570426555["Field1"];
              if ((finishReason_570426556 == 0)) {
              HEX3Aenv_570427409.elems1.push(parsedElem_570426557);;
              HEX3Aenv_570427409.lastStr2 = newStr__OOZsrcZmargraveZelement_u57("");
              HEX3Aenv_570427409.elems1.push(HEX3Aenv_570427409.lastStr2);;
              }
              else {
                var Temporary23 = HEX3Aenv_570427409.lastStr2;
                if (ConstSet63[Temporary23.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary23.isText, NTI33554466)); }
                if (null != (Temporary24 = HEX5BHEX5D__OOZsrcZmargraveZcommon_u22(parser_p0.str, HEX2EHEX2E__stdZstrbasics_u48(HEX3Aenv_570427409.initialPos3, currentPos_570426516 - 1)), Temporary24)) { if (null == Temporary23.str) Temporary23.str = Temporary24; else Temporary23.str += Temporary24; };
                parser_p0.pos = currentPos_570426516;
                parser_p0.pos -= 1;
              }
              
              }
              else {
                Temporary25 = parseAux__converter_u180.bind(HEX3Aenv_570427409); Temporary25.ClP_0 = parseAux__converter_u180; Temporary25.ClE_0 = HEX3Aenv_570427409;
                var reasonHEX60gensym86_570426588 = Temporary25(18, [96,96], parser_p0, ConstSet64);
                if ((ConstSet65[reasonHEX60gensym86_570426588] != undefined)) {
                var colontmp__570427503 = reasonHEX60gensym86_570426588;
                var colontmp__570427504 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
                result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427503, Field1: nimCopy(null, colontmp__570427504, NTI788529243)}, NTI1023410269);
                break BeforeRet;
                }
                
              }
              
              }
              else {
              if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 96, 0)) {
                var options_570426597 = nimCopy(null, parser_p0.options, NTI1191182340);
              if (options_570426597.disableCodeFormat) {
              var currentPos_570426598 = parser_p0.pos;
              var tmpTuple_570426604 = parseCodePreformat__converter_u1173(parser_p0, [96]);
              var finishReason_570426605 = tmpTuple_570426604["Field0"];
              var parsedElem_570426606 = tmpTuple_570426604["Field1"];
              if ((finishReason_570426605 == 0)) {
              HEX3Aenv_570427409.elems1.push(parsedElem_570426606);;
              HEX3Aenv_570427409.lastStr2 = newStr__OOZsrcZmargraveZelement_u57("");
              HEX3Aenv_570427409.elems1.push(HEX3Aenv_570427409.lastStr2);;
              }
              else {
                var Temporary26 = HEX3Aenv_570427409.lastStr2;
                if (ConstSet66[Temporary26.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary26.isText, NTI33554466)); }
                if (null != (Temporary27 = HEX5BHEX5D__OOZsrcZmargraveZcommon_u22(parser_p0.str, HEX2EHEX2E__stdZstrbasics_u48(HEX3Aenv_570427409.initialPos3, currentPos_570426598 - 1)), Temporary27)) { if (null == Temporary26.str) Temporary26.str = Temporary27; else Temporary26.str += Temporary27; };
                parser_p0.pos = currentPos_570426598;
                parser_p0.pos -= 1;
              }
              
              }
              else {
                Temporary28 = parseAux__converter_u180.bind(HEX3Aenv_570427409); Temporary28.ClP_0 = parseAux__converter_u180; Temporary28.ClE_0 = HEX3Aenv_570427409;
                var reasonHEX60gensym92_570426637 = Temporary28(18, [96], parser_p0, ConstSet67);
                if ((ConstSet68[reasonHEX60gensym92_570426637] != undefined)) {
                var colontmp__570427505 = reasonHEX60gensym92_570426637;
                var colontmp__570427506 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
                result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427505, Field1: nimCopy(null, colontmp__570427506, NTI788529243)}, NTI1023410269);
                break BeforeRet;
                }
                
              }
              
              }
              else {
              if ((noAdjacentWhitespace__OOZsrcZmargraveZparserZutils_u664(parser_p0, 0) && nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 94, 0))) {
              Temporary29 = parseAux__converter_u180.bind(HEX3Aenv_570427409); Temporary29.ClP_0 = parseAux__converter_u180; Temporary29.ClE_0 = HEX3Aenv_570427409;
              var reasonHEX60gensym93_570426643 = Temporary29(13, [32], parser_p0, ConstSet69);
              if ((ConstSet70[reasonHEX60gensym93_570426643] != undefined)) {
              var colontmp__570427507 = reasonHEX60gensym93_570426643;
              var colontmp__570427508 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
              result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427507, Field1: nimCopy(null, colontmp__570427508, NTI788529243)}, NTI1023410269);
              break BeforeRet;
              }
              
              }
              else {
              if ((!(surroundedWhitespace__OOZsrcZmargraveZparserZutils_u652(parser_p0, 0)) && nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 42, 0))) {
              Temporary30 = parseAux__converter_u180.bind(HEX3Aenv_570427409); Temporary30.ClP_0 = parseAux__converter_u180; Temporary30.ClE_0 = HEX3Aenv_570427409;
              var reasonHEX60gensym94_570426649 = Temporary30(15, [42], parser_p0, ConstSet71);
              if ((ConstSet72[reasonHEX60gensym94_570426649] != undefined)) {
              var colontmp__570427509 = reasonHEX60gensym94_570426649;
              var colontmp__570427510 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
              result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427509, Field1: nimCopy(null, colontmp__570427510, NTI788529243)}, NTI1023410269);
              break BeforeRet;
              }
              
              }
              else {
              if ((onlyPrevWhitespace__OOZsrcZmargraveZparserZutils_u656(parser_p0, 0) && nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 95, 0))) {
              Temporary31 = parseAux__converter_u180.bind(HEX3Aenv_570427409); Temporary31.ClP_0 = parseAux__converter_u180; Temporary31.ClE_0 = HEX3Aenv_570427409;
              var reasonHEX60gensym95_570426655 = Temporary31(15, [95], parser_p0, ConstSet73);
              if ((ConstSet74[reasonHEX60gensym95_570426655] != undefined)) {
              var colontmp__570427511 = reasonHEX60gensym95_570426655;
              var colontmp__570427512 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
              result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427511, Field1: nimCopy(null, colontmp__570427512, NTI788529243)}, NTI1023410269);
              break BeforeRet;
              }
              
              }
              else {
              if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 60, 0)) {
              parser_p0.pos -= 1;
              var change_570426665 = false;
              var pos_570426666 = 0;
                var options_570426673 = nimCopy(null, parser_p0.options, NTI1191182340);
              if (!((options_570426673.inlineHtmlHandler == null))) {
              var tmpTupleAsgn_570426677 = options_570426673.inlineHtmlHandler(parser_p0.str, parser_p0.pos);
              change_570426665 = tmpTupleAsgn_570426677["Field0"];
              pos_570426666 = tmpTupleAsgn_570426677["Field1"];
              }
              else {
                var tmpTupleAsgn_570426678 = parseXml__OOZsrcZmargraveZsinglexml_u158(cstrToNimstr(parser_p0.str), parser_p0.pos);
                change_570426665 = tmpTupleAsgn_570426678["Field0"];
                pos_570426666 = tmpTupleAsgn_570426678["Field1"];
              }
              
              if (change_570426665) {
              var Temporary32 = HEX3Aenv_570427409.lastStr2;
              if (ConstSet97[Temporary32.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary32.isText, NTI33554466)); }
              if (null != (Temporary33 = HEX5BHEX5D__OOZsrcZmargraveZcommon_u22(parser_p0.str, HEX2EHEX2E__stdZstrbasics_u48(parser_p0.pos, pos_570426666 - 1)), Temporary33)) { if (null == Temporary32.str) Temporary32.str = Temporary33; else Temporary32.str += Temporary33; };
              parser_p0.pos = (pos_570426666 - 1);
              }
              else {
                var Temporary34 = HEX3Aenv_570427409.lastStr2;
                if (ConstSet98[Temporary34.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary34.isText, NTI33554466)); }
              if (null != "&lt;") { if (null == Temporary34.str) Temporary34.str = "&lt;"; else Temporary34.str += "&lt;"; };
              }
              
              }
              else {
              if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 62, 0)) {
              parser_p0.pos -= 1;
              var Temporary35 = HEX3Aenv_570427409.lastStr2;
              if (ConstSet99[Temporary35.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary35.isText, NTI33554466)); }
              if (null != "&gt;") { if (null == Temporary35.str) Temporary35.str = "&gt;"; else Temporary35.str += "&gt;"; };
              }
              else {
              if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 38, 0)) {
              var Temporary36 = HEX3Aenv_570427409.lastStr2;
              if (ConstSet100[Temporary36.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary36.isText, NTI33554466)); }
              if (null != (Temporary37 = parseAmpStr__converter_u1354(parser_p0), Temporary37)) { if (null == Temporary36.str) Temporary36.str = Temporary37; else Temporary36.str += Temporary37; };
              }
              else {
              if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 92, 0)) {
              parser_p0.pos -= 1;
              escaped_570425485 = true;
              }
              else {
                var Temporary38 = HEX3Aenv_570427409.lastStr2;
                if (ConstSet102[Temporary38.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary38.isText, NTI33554466)); }
              add__OOZsrcZmargraveZcommon_u8(Temporary38, "str", ch_570425500);
              }
              }}}}}}}}}}}}}}}}}}}}
              }
              else {
                  if ((ConstSet103[ch_570425500] != undefined)) Temporary39 = true; else {                    if ({curlyNoHtmlEscape: false, insertLineBreaks: false, inlineHtmlHandler: null, codeBlockLanguageHandler: null, setLinkHandler: null, disableLineEscaping: false, disableTextAlignExtension: false, disableCurly: false, disableRawCurly: false, disableCodeFormat: false}.disableLineEscaping) Temporary41 = true; else {                      Temporary41 = parser_p0.options.disableLineEscaping;                    }                    if (!!(Temporary41)) Temporary40 = false; else {                      Temporary40 = (ConstSet104[ch_570425500] != undefined);                    }                    Temporary39 = Temporary40;                  }                if (!(Temporary39)) {
                var Temporary42 = HEX3Aenv_570427409.lastStr2;
                if (ConstSet105[Temporary42.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary42.isText, NTI33554466)); }
                add__converter_u175(Temporary42, "str");
                }
                
                var Temporary43 = HEX3Aenv_570427409.lastStr2;
                if (ConstSet106[Temporary43.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary43.isText, NTI33554466)); }
                add__OOZsrcZmargraveZcommon_u8(Temporary43, "str", ch_570425500);
                escaped_570425485 = false;
              }
              
            };
            parser_p0.pos += 1;
          }
      };
    };
    var colontmp__570427514 = 1;
    var colontmp__570427515 = nimCopy(null, HEX3Aenv_570427409.elems1, NTI788529243);
    result_570425484 = nimCopy(result_570425484, {Field0: colontmp__570427514, Field1: nimCopy(null, colontmp__570427515, NTI788529243)}, NTI1023410269);
  };

  return result_570425484;

}

function parseInline__converter_u128(parser_p0, singleLine_p2) {
  var result_570425477 = [];

    var tmpTuple_570426774 = parseDelimed__converter_u134(parser_p0, [], singleLine_p2);
    var finishReason_570426775 = tmpTuple_570426774["Field0"];
    var elems_570426776 = nimCopy(null, tmpTuple_570426774["Field1"], NTI1023410270);
    result_570425477 = nimCopy(null, elems_570426776, NTI1023410270);

  return result_570425477;

}

function addLine__converter_u1441(parser_p0, context_p2, result_p3, result_p3_Idx, lastEmptyLine_p4) {
    var Temporary1;
        var Temporary2;
        var Temporary3;
          var Temporary4;
          var Temporary5;
            var Temporary6;

    if (!((context_p2 == null))) {
    var Temporary1 = context_p2;
    if (ConstSet107[Temporary1.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary1.isText, NTI33554466)); }
    switch (Temporary1.tag) {
    case 10:
    case 9:
      add__OOZsrcZmargraveZelement_u2786(context_p2, newElem__OOZsrcZmargraveZelement_u114(11, parseInline__converter_u128(parser_p0, true)));
      break;
    case 12:
      var c_570426810 = parseInline__converter_u128(parser_p0, true);
        if (!!(lastEmptyLine_p4)) Temporary3 = false; else {          var Temporary4 = context_p2;
          if (ConstSet108[Temporary4.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary4.isText, NTI33554466)); }
          Temporary3 = !(((Temporary4.content).length == 0));        }        if (!Temporary3) Temporary2 = false; else {          var last_570426814 = HEX5BHEX5D__OOZsrcZmargraveZelement_u2726(context_p2, 1);
          if (!!(last_570426814.isText)) Temporary5 = false; else {            var Temporary6 = last_570426814;
            if (ConstSet109[Temporary6.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary6.isText, NTI33554466)); }
            Temporary5 = (Temporary6.tag == 1);          }          Temporary2 = Temporary5;        }      if (Temporary2) {
      addNewline__converter_u118(parser_p0, last_570426814);
      add__OOZsrcZmargraveZelement_u2793(last_570426814, c_570426810);
      }
      else {
      add__OOZsrcZmargraveZelement_u2786(context_p2, newElem__OOZsrcZmargraveZelement_u114(1, c_570426810));
      }
      
      break;
    default: 
      break;
    }
    }
    else {
    result_p3[result_p3_Idx].push(newElem__OOZsrcZmargraveZelement_u114(1, parseInline__converter_u128(parser_p0, false)));;
    }
    

  
}

function style__OOZsrcZmargraveZelement_u2719(elem_p0, style_p1) {
    attr__OOZsrcZmargraveZelement_u601(elem_p0, "style", style_p1);

  
}

function parseId__OOZsrcZmargraveZparser_u210(parser_p0, startChar_p1) {
    var Temporary1;

  var result_1023410389 = [null];

    switch (startChar_p1) {
    case 40:
      Temporary1 = 41;
      break;
    case 91:
      Temporary1 = 93;
      break;
    case 123:
      Temporary1 = 125;
      break;
    default: 
      Temporary1 = 0;
      break;
    }
    var idDelim_1023410390 = Temporary1;
    result_1023410389[0] = "";
    Label2: {
        Label3: while (true) {
          var ch_1023410391 = parser_p0.str.charCodeAt((parser_p0.pos + 0));
        if (!nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, ConstSet114, 0)) break Label3;
          add__OOZsrcZmargraveZcommon_u8(result_1023410389, 0, ch_1023410391);
        }
    };
    (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, idDelim_1023410390, 0));

  return result_1023410389[0];

}

function getOrDefault__converter_u1768(t_p0, key_p1, def_p2) {
    var Temporary1;

  var result_570427118 = [];

    var hcHEX60gensym137_570427121 = [0];
    var indexHEX60gensym137_570427128 = rawGet__converter_u608(t_p0, key_p1, hcHEX60gensym137_570427121, 0);
    if ((0 <= indexHEX60gensym137_570427128)) {
    Temporary1 = t_p0.data[indexHEX60gensym137_570427128].Field2;
    }
    else {
    Temporary1 = def_p2;
    }
    
    result_570427118 = nimCopy(null, Temporary1, NTI1191182351);

  return result_570427118;

}

function addLine__converter_u1883(parser_p0, context_p2, result_p3, result_p3_Idx, lastEmptyLine_p4) {
    var Temporary1;
        var Temporary2;
        var Temporary3;
          var Temporary4;
          var Temporary5;
            var Temporary6;

    if (!((context_p2 == null))) {
    var Temporary1 = context_p2;
    if (ConstSet116[Temporary1.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary1.isText, NTI33554466)); }
    switch (Temporary1.tag) {
    case 10:
    case 9:
      add__OOZsrcZmargraveZelement_u2793(context_p2, parseInline__converter_u128(parser_p0, true));
      break;
    case 12:
      var c_570427252 = parseInline__converter_u128(parser_p0, true);
        if (!!(lastEmptyLine_p4)) Temporary3 = false; else {          var Temporary4 = context_p2;
          if (ConstSet117[Temporary4.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary4.isText, NTI33554466)); }
          Temporary3 = !(((Temporary4.content).length == 0));        }        if (!Temporary3) Temporary2 = false; else {          var last_570427256 = HEX5BHEX5D__OOZsrcZmargraveZelement_u2726(context_p2, 1);
          if (!!(last_570427256.isText)) Temporary5 = false; else {            var Temporary6 = last_570427256;
            if (ConstSet118[Temporary6.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary6.isText, NTI33554466)); }
            Temporary5 = (Temporary6.tag == 1);          }          Temporary2 = Temporary5;        }      if (Temporary2) {
      addNewline__converter_u118(parser_p0, last_570427256);
      add__OOZsrcZmargraveZelement_u2793(last_570427256, c_570427252);
      }
      else {
      add__OOZsrcZmargraveZelement_u2793(context_p2, c_570427252);
      }
      
      break;
    default: 
      break;
    }
    }
    else {
    add__OOZsrcZmargraveZelement_u2796(result_p3, result_p3_Idx, parseInline__converter_u128(parser_p0, false));
    }
    

  
}

function parseTopLevel__converter_u40(parser_p0) {
                      var Temporary8;
                var Temporary17;
                  var Temporary18;
                    var Temporary19;
                var Temporary20;
                  var Temporary21;
                  var Temporary22;
                    var Temporary23;
                    var Temporary24;
                  var Temporary25;
                    var Temporary26;
                      var Temporary29;
                        var Temporary30;
                var Temporary33;
                  var Temporary36;
                  var Temporary37;
                  var Temporary41;
                    var Temporary42;
                    var Temporary43;
                    var Temporary44;

  var result_570425388 = [[]];

    var lastEmptyLine_570425389 = false;
    Label1: {
      var firstCh_570425390 = 0;
      Label2: {
          Label3: while (true) {
          if (!(parser_p0.pos < ((parser_p0.str) == null ? 0 : (parser_p0.str).length))) break Label3;
            firstCh_570425390 = parser_p0.str.charCodeAt((parser_p0.pos + 0));
            Label4: {
              var context_570425391 = null;
              Label5: {
                var i_570425392 = 0;
                Label6: {
                    Label7: while (true) {
                    if (!(i_570425392 < (parser_p0.contextStack).length)) break Label7;
                      var c_570425396 = parser_p0.contextStack[i_570425392];
                      var Temporary8 = c_570425396;
                      if (ConstSet2[Temporary8.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary8.isText, NTI33554466)); }
                      switch (Temporary8.tag) {
                      case 9:
                        if (nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, ConstSet3, 0)) {
                        Label9: {
                            Label10: while (true) {
                            if (!nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, InlineWhitespace_1023410385, 0)) break Label10;
                            }
                        };
                        }
                        else {
                          break Label6;
                        }
                        
                        break;
                      case 10:
                        var originalPos_570425397 = parser_p0.pos;
                        Label11: {
                            Label12: while (true) {
                            if (!nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, Digits_1040187411, 0)) break Label12;
                            }
                        };
                        if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 46, 0)) {
                        Label13: {
                            Label14: while (true) {
                            if (!nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, InlineWhitespace_1023410385, 0)) break Label14;
                            }
                        };
                        }
                        else {
                          parser_p0.pos = originalPos_570425397;
                          break Label6;
                        }
                        
                        break;
                      case 12:
                        if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 62, 0)) {
                        Label15: {
                            Label16: while (true) {
                            if (!nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, InlineWhitespace_1023410385, 0)) break Label16;
                            }
                        };
                        }
                        else {
                          break Label6;
                        }
                        
                        break;
                      default: 
                        break;
                      }
                      context_570425391 = c_570425396;
                      i_570425392 += 1;
                    }
                };
                if (parser_p0.contextStack.length < i_570425392) { for (var i = parser_p0.contextStack.length ; i < i_570425392 ; ++i) parser_p0.contextStack.push(null); }
               else { parser_p0.contextStack.length = i_570425392; };
              };
              switch (parser_p0.str.charCodeAt((parser_p0.pos + 0))) {
              case 13:
              case 10:
                ((nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [13,10], 0) || nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [10], 0)));
                parser_p0.pos -= 1;
                lastEmptyLine_570425389 = true;
                break Label4;
                break;
              case 9:
              case 11:
              case 12:
              case 32:
                  if (!!((context_570425391 == null))) Temporary18 = false; else {                    var Temporary19 = context_570425391;
                    if (ConstSet6[Temporary19.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary19.isText, NTI33554466)); }
                    Temporary18 = !(((Temporary19.content).length == 0));                  }                if (Temporary18) {
                Temporary17 = HEX5BHEX5D__OOZsrcZmargraveZelement_u2726(context_570425391, 1);
                }
                else {
                if (!(((result_570425388[0]).length == 0))) {
                Temporary17 = (Temporary20 = HEX5BHEX5D__OOZsrcZmargraveZelement_u2730(result_570425388[0], 1), Temporary20)[0][Temporary20[1]];
                }
                else {
                Temporary17 = null;
                }
                }
                var last_570425449 = Temporary17;
                  if (!(!((last_570425449 == null)) && !(last_570425449.isText))) Temporary22 = false; else {                    var Temporary23 = last_570425449;
                    if (ConstSet9[Temporary23.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary23.isText, NTI33554466)); }
                    Temporary22 = (SpecialLineTags_1023410378[Temporary23.tag] != undefined);                  }                  if (!Temporary22) Temporary21 = false; else {                    var last2_570425458 = HEX5BHEX5D__OOZsrcZmargraveZelement_u2726(last_570425449, 1);
                    var Temporary24 = last2_570425458;
                    if (ConstSet10[Temporary24.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary24.isText, NTI33554466)); }
                    Temporary21 = !(((Temporary24.content).length == 0));                  }                if (Temporary21) {
                addNewline__converter_u118(parser_p0, last2_570425458);
                add__OOZsrcZmargraveZelement_u2793(last2_570425458, parseInline__converter_u128(parser_p0, false));
                }
                else {
                addLine__converter_u1441(parser_p0, context_570425391, result_570425388, 0, lastEmptyLine_570425389);
                }
                
                break;
              case 35:
                  if ((context_570425391 == null)) Temporary25 = true; else {                    var Temporary26 = context_570425391;
                    if (ConstSet111[Temporary26.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary26.isText, NTI33554466)); }
                    Temporary25 = (ConstSet110[Temporary26.tag] != undefined);                  }                if (Temporary25) {
                Label27: {
                    Label28: while (true) {
                      if (!!((context_570425391 == null))) Temporary29 = false; else {                        var Temporary30 = context_570425391;
                        if (ConstSet112[Temporary30.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary30.isText, NTI33554466)); }
                        Temporary29 = (Temporary30.tag == 1);                      }                    if (!Temporary29) break Label28;
                      var last_570426851 = ((parser_p0.contextStack).length - 1);
                      context_570425391 = parser_p0.contextStack[last_570426851];
                      if (parser_p0.contextStack.length < last_570426851) { for (var i = parser_p0.contextStack.length ; i < last_570426851 ; ++i) parser_p0.contextStack.push(null); }
               else { parser_p0.contextStack.length = last_570426851; };
                      if ((last_570426851 == 0)) {
                      break Label27;
                      }
                      
                    }
                };
                var level_570426856 = 1;
                Label31: {
                    Label32: while (true) {
                    if (!((level_570426856 < 6) && peekMatch__OOZsrcZmargraveZparserZutils_u562(parser_p0, 35, level_570426856))) break Label32;
                      level_570426856 += 1;
                    }
                };
                parser_p0.pos += level_570426856;
                var header_570426866 = newElem__OOZsrcZmargraveZelement_u114((2 + level_570426856), []);
                if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 124, 0)) {
                style__OOZsrcZmargraveZelement_u2719(header_570426866, "text-align:center");
                }
                else {
                if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 60, 0)) {
                style__OOZsrcZmargraveZelement_u2719(header_570426866, "text-align:left");
                }
                else {
                if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 62, 0)) {
                style__OOZsrcZmargraveZelement_u2719(header_570426866, "text-align:right");
                }
                }}
                  var ch_570426867 = parser_p0.str.charCodeAt((parser_p0.pos + 0));
                if (nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, IdStarts_1023410379, 0)) {
                attr__OOZsrcZmargraveZelement_u601(header_570426866, "id", parseId__OOZsrcZmargraveZparser_u210(parser_p0, ch_570426867));
                }
                
                add__OOZsrcZmargraveZelement_u2793(header_570426866, parseInline__converter_u128(parser_p0, true));
                var elHEX60gensym118_570426874 = header_570426866;
                if (!((context_570425391 == null))) {
                add__OOZsrcZmargraveZelement_u2786(context_570425391, elHEX60gensym118_570426874);
                }
                else {
                result_570425388[0].push(elHEX60gensym118_570426874);;
                }
                
                }
                else {
                addLine__converter_u1441(parser_p0, context_570425391, result_570425388, 0, lastEmptyLine_570425389);
                }
                
                break;
              case 42:
              case 45:
              case 43:
                if (nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, InlineWhitespace_1023410385, 1)) {
                var elHEX60gensym120_570426893 = newElem__OOZsrcZmargraveZelement_u114(9, []);
                var elHEX60gensym121_570426895 = elHEX60gensym120_570426893;
                if (!((context_570425391 == null))) {
                add__OOZsrcZmargraveZelement_u2786(context_570425391, elHEX60gensym121_570426895);
                }
                else {
                result_570425388[0].push(elHEX60gensym121_570426895);;
                }
                
                parser_p0.contextStack.push(elHEX60gensym120_570426893);;
                context_570425391 = elHEX60gensym120_570426893;
                addLine__converter_u1441(parser_p0, context_570425391, result_570425388, 0, lastEmptyLine_570425389);
                }
                else {
                if (nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, IdStarts_1023410379, 1)) {
                var list_570426917 = newElem__OOZsrcZmargraveZelement_u114(9, []);
                var item_570426918 = newElem__OOZsrcZmargraveZelement_u114(11, []);
                attr__OOZsrcZmargraveZelement_u601(item_570426918, "id", parseId__OOZsrcZmargraveZparser_u210(parser_p0, parser_p0.str.charCodeAt((parser_p0.pos + (-1)))));
                var Temporary33 = item_570426918;
                if (ConstSet115[Temporary33.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary33.isText, NTI33554466)); }
                Temporary33.content = nimCopy(null, parseInline__converter_u128(parser_p0, true), NTI1023410551);
                add__OOZsrcZmargraveZelement_u2786(list_570426917, item_570426918);
                var elHEX60gensym125_570426925 = list_570426917;
                var elHEX60gensym126_570426927 = elHEX60gensym125_570426925;
                if (!((context_570425391 == null))) {
                add__OOZsrcZmargraveZelement_u2786(context_570425391, elHEX60gensym126_570426927);
                }
                else {
                result_570425388[0].push(elHEX60gensym126_570426927);;
                }
                
                parser_p0.contextStack.push(elHEX60gensym125_570426925);;
                context_570425391 = elHEX60gensym125_570426925;
                }
                else {
                addLine__converter_u1441(parser_p0, context_570425391, result_570425388, 0, lastEmptyLine_570425389);
                }
                }
                break;
              case 48:
              case 49:
              case 50:
              case 51:
              case 52:
              case 53:
              case 54:
              case 55:
              case 56:
              case 57:
                var originalPos_570426949 = parser_p0.pos;
                parser_p0.pos += 1;
                Label34: {
                    Label35: while (true) {
                    if (!nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, Digits_1040187411, 0)) break Label35;
                    }
                };
                if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 46, 0)) {
                var list_570426955 = newElem__OOZsrcZmargraveZelement_u114(10, []);
                var item_570426956 = newElem__OOZsrcZmargraveZelement_u114(11, []);
                  var ch_570426957 = parser_p0.str.charCodeAt((parser_p0.pos + 0));
                if (nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, IdStarts_1023410379, 0)) {
                attr__OOZsrcZmargraveZelement_u601(item_570426956, "id", parseId__OOZsrcZmargraveZparser_u210(parser_p0, ch_570426957));
                }
                
                add__OOZsrcZmargraveZelement_u2793(item_570426956, parseInline__converter_u128(parser_p0, true));
                add__OOZsrcZmargraveZelement_u2786(list_570426955, item_570426956);
                var elHEX60gensym130_570426964 = list_570426955;
                var elHEX60gensym131_570426966 = elHEX60gensym130_570426964;
                if (!((context_570425391 == null))) {
                add__OOZsrcZmargraveZelement_u2786(context_570425391, elHEX60gensym131_570426966);
                }
                else {
                result_570425388[0].push(elHEX60gensym131_570426966);;
                }
                
                parser_p0.contextStack.push(elHEX60gensym130_570426964);;
                context_570425391 = elHEX60gensym130_570426964;
                }
                else {
                  parser_p0.pos = originalPos_570426949;
                  addLine__converter_u1441(parser_p0, context_570425391, result_570425388, 0, lastEmptyLine_570425389);
                }
                
                break;
              case 62:
                var quote_570426988 = newElem__OOZsrcZmargraveZelement_u114(12, []);
                parser_p0.pos += 1;
                  var ch_570426994 = parser_p0.str.charCodeAt((parser_p0.pos + 0));
                if (nextMatch__OOZsrcZmargraveZparserZutils_u677(parser_p0, IdStarts_1023410379, 0)) {
                attr__OOZsrcZmargraveZelement_u601(quote_570426988, "id", parseId__OOZsrcZmargraveZparser_u210(parser_p0, ch_570426994));
                }
                
                var elHEX60gensym134_570426996 = quote_570426988;
                var elHEX60gensym135_570426998 = elHEX60gensym134_570426996;
                if (!((context_570425391 == null))) {
                add__OOZsrcZmargraveZelement_u2786(context_570425391, elHEX60gensym135_570426998);
                }
                else {
                result_570425388[0].push(elHEX60gensym135_570426998);;
                }
                
                parser_p0.contextStack.push(elHEX60gensym134_570426996);;
                context_570425391 = elHEX60gensym134_570426996;
                addLine__converter_u1441(parser_p0, context_570425391, result_570425388, 0, lastEmptyLine_570425389);
                break;
              case 91:
                var initialPos_570427020 = parser_p0.pos;
                parser_p0.pos += 1;
                var refNameFailed_570427026 = [false];
                var refName_570427032 = parseReferenceName__converter_u488(parser_p0, refNameFailed_570427026, 0);
                  if (!!(refNameFailed_570427026[0])) Temporary37 = false; else {                    parser_p0.pos += 1;
                    Temporary37 = nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 58, 0);                  }                  if (!Temporary37) Temporary36 = false; else {                    var tmpTuple_570427043 = parseLink__converter_u324(parser_p0, true);
                    var correct_570427044 = tmpTuple_570427043["Field0"];
                    var link_570427045 = nimCopy(null, tmpTuple_570427043["Field1"], NTI1191182339);
                    Temporary36 = correct_570427044;                  }                if (Temporary36) {
                Label38: {
                  var el_570427132 = null;
                  var colontmp__570427383 = [];
                  colontmp__570427383 = getOrDefault__converter_u1768(parser_p0.linkReferrers, refName_570427032, []);
                  var i_570427384 = 0;
                  var L_570427385 = (colontmp__570427383).length;
                  Label39: {
                      Label40: while (true) {
                      if (!(i_570427384 < L_570427385)) break Label40;
                        el_570427132 = colontmp__570427383[i_570427384];
                        if (!((((link_570427045.tip) == null ? 0 : (link_570427045.tip).length) == 0))) {
                        attrEscaped__OOZsrcZmargraveZelement_u2055(el_570427132, "title", link_570427045.tip);
                        }
                        
                        setLink__converter_u470(parser_p0, el_570427132, link_570427045);
                        i_570427384 += 1;
                      }
                  };
                };
                }
                else {
                  parser_p0.pos = initialPos_570427020;
                  addLine__converter_u1441(parser_p0, context_570425391, result_570425388, 0, lastEmptyLine_570425389);
                }
                
                break;
              case 124:
                if ((parser_p0.options.disableTextAlignExtension || !((context_570425391 == null)))) {
                addLine__converter_u1441(parser_p0, context_570425391, result_570425388, 0, lastEmptyLine_570425389);
                }
                else {
                  parser_p0.pos += 1;
                  var align_570427167 = [];
                  if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 60, 0)) {
                  align_570427167 = nimCopy(null, [116,101,120,116,45,97,108,105,103,110,58,108,101,102,116], NTI33554449);
                  }
                  else {
                  if (nextMatch__OOZsrcZmargraveZparserZutils_u668(parser_p0, 62, 0)) {
                  align_570427167 = nimCopy(null, [116,101,120,116,45,97,108,105,103,110,58,114,105,103,104,116], NTI33554449);
                  }
                  else {
                    align_570427167 = nimCopy(null, [116,101,120,116,45,97,108,105,103,110,58,99,101,110,116,101,114], NTI33554449);
                  }
                  }
                  var el_570427173 = newElem__OOZsrcZmargraveZelement_u114(1, parseInline__converter_u128(parser_p0, false));
                  style__OOZsrcZmargraveZelement_u2719(el_570427173, toJSStr(align_570427167));
                  result_570425388[0].push(el_570427173);;
                }
                
                break;
              default: 
                if (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [96,96,96], 0)) {
                var elHEX60gensym142_570427194 = parseCodeBlock__converter_u1012(parser_p0, 96);
                if (!((context_570425391 == null))) {
                add__OOZsrcZmargraveZelement_u2786(context_570425391, elHEX60gensym142_570427194);
                }
                else {
                result_570425388[0].push(elHEX60gensym142_570427194);;
                }
                
                }
                else {
                if (nextMatch__OOZsrcZmargraveZparserZutils_u706(parser_p0, [126,126,126], 0)) {
                var elHEX60gensym143_570427218 = parseCodeBlock__converter_u1012(parser_p0, 126);
                if (!((context_570425391 == null))) {
                add__OOZsrcZmargraveZelement_u2786(context_570425391, elHEX60gensym143_570427218);
                }
                else {
                result_570425388[0].push(elHEX60gensym143_570427218);;
                }
                
                }
                else {
                  if (!peekMatch__OOZsrcZmargraveZparserZutils_u602(parser_p0, [123,33], 0)) Temporary41 = false; else {                    if ({curlyNoHtmlEscape: false, insertLineBreaks: false, inlineHtmlHandler: null, codeBlockLanguageHandler: null, setLinkHandler: null, disableLineEscaping: false, disableTextAlignExtension: false, disableCurly: false, disableRawCurly: false, disableCodeFormat: false}.disableCurly) Temporary44 = true; else {                      Temporary44 = {curlyNoHtmlEscape: false, insertLineBreaks: false, inlineHtmlHandler: null, codeBlockLanguageHandler: null, setLinkHandler: null, disableLineEscaping: false, disableTextAlignExtension: false, disableCurly: false, disableRawCurly: false, disableCodeFormat: false}.disableRawCurly;                    }                    if (Temporary44) Temporary43 = true; else {                      Temporary43 = parser_p0.options.disableCurly;                    }                    if (Temporary43) Temporary42 = true; else {                      Temporary42 = parser_p0.options.disableRawCurly;                    }                    Temporary41 = !(Temporary42);                  }                if (Temporary41) {
                addLine__converter_u1883(parser_p0, context_570425391, result_570425388, 0, lastEmptyLine_570425389);
                }
                else {
                addLine__converter_u1441(parser_p0, context_570425391, result_570425388, 0, lastEmptyLine_570425389);
                }
                }}
                break;
              }
              lastEmptyLine_570425389 = false;
            };
            parser_p0.pos += 1;
          }
      };
    };

  return result_570425388[0];

}

function parseMargrave__converter_u25(parser_p0) {
  var result_570425383 = [];

    result_570425383 = nimCopy(null, parseTopLevel__converter_u40(parser_p0), NTI1023410572);

  return result_570425383;

}

function parseMargrave__converter_u8(text_p0, options_p1) {
  var result_570425367 = [];

    var parser_570425368 = [initMargraveParser__OOZsrcZmargraveZparserZdefs_u42(text_p0)];
    parser_570425368[0].options = nimCopy(parser_570425368[0].options, options_p1, NTI1191182340);
    result_570425367 = nimCopy(null, parseMargrave__converter_u25(parser_570425368[0]), NTI721420299);

  return result_570425367;

}

function isEmpty__OOZsrcZmargraveZelement_u54(tag_p0) {
    var Temporary1;

  var result_788529208 = false;

    switch (tag_p0) {
    case 0:
    case 2:
    case 21:
    case 22:
    case 27:
    case 28:
      Temporary1 = true;
      break;
    default: 
      Temporary1 = false;
      break;
    }
    result_788529208 = Temporary1;

  return result_788529208;

}

function hasKey__OOZsrcZmargraveZelement_u2101(t_p0, key_p1) {
  var result_788531258 = false;

    var hc_788531263 = [0];
    result_788531258 = (0 <= rawGet__OOZsrcZmargraveZelement_u710(t_p0, key_p1, hc_788531263, 0));

  return result_788531258;

}

function hasAttr__OOZsrcZmargraveZelement_u2061(elem_p0, key_p1) {
    var Temporary1;

  var result_788531216 = false;

    var Temporary1 = elem_p0;
    if (ConstSet122[Temporary1.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'attrs\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary1.isText, NTI33554466)); }
    result_788531216 = hasKey__OOZsrcZmargraveZelement_u2101(Temporary1.attrs, key_p1);

  return result_788531216;

}

function rawGet__OOZsrcZmargraveZelement_u256(t_p0, key_p1, hc_p2, hc_p2_Idx) {
  var result_788529414 = 0;

  BeforeRet: {
    hc_p2[hc_p2_Idx] = hash__pureZhashes_u794(key_p1);
    if ((hc_p2[hc_p2_Idx] == 0)) {
    hc_p2[hc_p2_Idx] = 314159265;
    }
    
    if (((t_p0.data).length == 0)) {
    result_788529414 = (-1);
    break BeforeRet;
    }
    
    var h_788529465 = (hc_p2[hc_p2_Idx] & (t_p0.data).length - 1);
    Label1: {
        Label2: while (true) {
        if (!isFilled__pureZcollectionsZtables_u31(t_p0.data[h_788529465].Field0)) break Label2;
          if (((t_p0.data[h_788529465].Field0 == hc_p2[hc_p2_Idx]) && (t_p0.data[h_788529465].Field2 == key_p1))) {
          result_788529414 = h_788529465;
          break BeforeRet;
          }
          
          h_788529465 = nextTry__pureZcollectionsZtables_u34(h_788529465, (t_p0.data).length - 1);
        }
    };
    result_788529414 = ((-1) - h_788529465);
  };

  return result_788529414;

}

function raiseKeyError__OOZsrcZmargraveZelement_u545(key_p0) {
    raiseException({message: ([107,101,121,32,110,111,116,32,102,111,117,110,100,58,32]).concat(cstrToNimstr(key_p0)), parent: null, m_type: NTI134217747, name: null, trace: [], up: null}, "KeyError");

  
}

function HEX5BHEX5D__OOZsrcZmargraveZelement_u249(t_p0, key_p1) {
  var result_788529406 = null;
  var result_788529406_Idx = 0;

    var hcHEX60gensym97_788529407 = [0];
    var indexHEX60gensym97_788529647 = rawGet__OOZsrcZmargraveZelement_u256(t_p0, key_p1, hcHEX60gensym97_788529407, 0);
    if ((0 <= indexHEX60gensym97_788529647)) {
    result_788529406 = t_p0.data[indexHEX60gensym97_788529647]; result_788529406_Idx = "Field3";
    }
    else {
    raiseKeyError__OOZsrcZmargraveZelement_u545(key_p1);
    }
    

  return [result_788529406, result_788529406_Idx];

}

function attr__OOZsrcZmargraveZelement_u196(elem_p0, key_p1) {
    var Temporary1;
    var Temporary2;

  var result_788529351 = null;

    var Temporary1 = elem_p0;
    if (ConstSet123[Temporary1.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'attrs\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary1.isText, NTI33554466)); }
    result_788529351 = (Temporary2 = HEX5BHEX5D__OOZsrcZmargraveZelement_u249(Temporary1.attrs, key_p1), Temporary2)[0][Temporary2[1]];

  return result_788529351;

}

function toCstring__OOZsrcZmargraveZelement_u2832(x_p0) {
  var result_788531987 = null;

    switch (x_p0) {
    case 0:
      result_788531987 = "";
      break;
    case 1:
      result_788531987 = "p";
      break;
    case 2:
      result_788531987 = "br";
      break;
    case 3:
      result_788531987 = "h1";
      break;
    case 4:
      result_788531987 = "h2";
      break;
    case 5:
      result_788531987 = "h3";
      break;
    case 6:
      result_788531987 = "h4";
      break;
    case 7:
      result_788531987 = "h5";
      break;
    case 8:
      result_788531987 = "h6";
      break;
    case 9:
      result_788531987 = "ul";
      break;
    case 10:
      result_788531987 = "ol";
      break;
    case 11:
      result_788531987 = "li";
      break;
    case 12:
      result_788531987 = "blockquote";
      break;
    case 13:
      result_788531987 = "sup";
      break;
    case 14:
      result_788531987 = "sub";
      break;
    case 15:
      result_788531987 = "em";
      break;
    case 16:
      result_788531987 = "strong";
      break;
    case 17:
      result_788531987 = "pre";
      break;
    case 18:
      result_788531987 = "code";
      break;
    case 19:
      result_788531987 = "u";
      break;
    case 20:
      result_788531987 = "s";
      break;
    case 21:
      result_788531987 = "img";
      break;
    case 22:
      result_788531987 = "input";
      break;
    case 23:
      result_788531987 = "a";
      break;
    case 24:
      result_788531987 = "picture";
      break;
    case 25:
      result_788531987 = "video";
      break;
    case 26:
      result_788531987 = "audio";
      break;
    case 27:
      result_788531987 = "source";
      break;
    case 28:
      result_788531987 = "unknownTag";
      break;
    }

  return result_788531987;

}

function add__OOZsrcZmargraveZelement_u2954(x_p0, x_p0_Idx) {
    if (null != "<") { if (null == x_p0[x_p0_Idx]) x_p0[x_p0_Idx] = "<"; else x_p0[x_p0_Idx] += "<"; };

  
}

function len__OOZsrcZmargraveZelement_u3002(t_p0) {
  var result_788532158 = 0;

    result_788532158 = t_p0.counter;

  return result_788532158;

}

function add__OOZsrcZmargraveZelement_u3272(x_p0, x_p0_Idx) {
    if (null != " ") { if (null == x_p0[x_p0_Idx]) x_p0[x_p0_Idx] = " "; else x_p0[x_p0_Idx] += " "; };

  
}

function add__OOZsrcZmargraveZelement_u3276(x_p0, x_p0_Idx) {
    if (null != "/") { if (null == x_p0[x_p0_Idx]) x_p0[x_p0_Idx] = "/"; else x_p0[x_p0_Idx] += "/"; };

  
}

function add__OOZsrcZmargraveZelement_u3280(x_p0, x_p0_Idx) {
    if (null != ">") { if (null == x_p0[x_p0_Idx]) x_p0[x_p0_Idx] = ">"; else x_p0[x_p0_Idx] += ">"; };

  
}

function toNativeString__OOZsrcZmargraveZelement_u2827(elem_p0) {
    var Temporary1;
      var Temporary2;
      var Temporary3;
        var Temporary4;
        var Temporary6;
        var Temporary10;
              var Temporary13;

  var result_788531981 = [null];

    if (elem_p0.isText) {
    var Temporary1 = elem_p0;
    if (ConstSet119[Temporary1.isText]===undefined) { raiseFieldError2(makeNimstrLit("field \'str\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary1.isText, NTI33554466)); }
    result_788531981[0] = Temporary1.str;
    }
    else {
      var Temporary2 = elem_p0;
      if (ConstSet120[Temporary2.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary2.isText, NTI33554466)); }
      var empty_788531982 = isEmpty__OOZsrcZmargraveZelement_u54(Temporary2.tag);
      var tag_788531983 = null;
      var Temporary3 = elem_p0;
      if (ConstSet121[Temporary3.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary3.isText, NTI33554466)); }
      switch (Temporary3.tag) {
      case 0:
        break;
      case 28:
        if (hasAttr__OOZsrcZmargraveZelement_u2061(elem_p0, "tag")) {
        tag_788531983 = attr__OOZsrcZmargraveZelement_u196(elem_p0, "tag");
        empty_788531982 = hasAttr__OOZsrcZmargraveZelement_u2061(elem_p0, "emptyTag");
        }
        
        break;
      default: 
        var Temporary4 = elem_p0;
        if (ConstSet124[Temporary4.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'tag\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary4.isText, NTI33554466)); }
        tag_788531983 = toCstring__OOZsrcZmargraveZelement_u2832(Temporary4.tag);
        break;
      }
      if (!((((tag_788531983) == null ? 0 : (tag_788531983).length) == 0))) {
      add__OOZsrcZmargraveZelement_u2954(result_788531981, 0);
      if (null != tag_788531983) { if (null == result_788531981[0]) result_788531981[0] = tag_788531983; else result_788531981[0] += tag_788531983; };
      Label5: {
        var attrName_788532422 = null;
        var attrValue_788532423 = null;
        var colontmp__570427644 = ({data: [], counter: 0, first: 0, last: 0});
        var Temporary6 = elem_p0;
        if (ConstSet125[Temporary6.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'attrs\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary6.isText, NTI33554466)); }
        colontmp__570427644 = nimCopy(colontmp__570427644, Temporary6.attrs, NTI788529166);
        var L_570427646 = len__OOZsrcZmargraveZelement_u3002(colontmp__570427644);
        if ((0 < colontmp__570427644.counter)) {
        var h_570427647 = colontmp__570427644.first;
        Label7: {
            Label8: while (true) {
            if (!(0 <= h_570427647)) break Label8;
              var nxt_570427649 = colontmp__570427644.data[h_570427647].Field1;
              if (isFilled__pureZcollectionsZtables_u31(colontmp__570427644.data[h_570427647].Field0)) {
              attrName_788532422 = colontmp__570427644.data[h_570427647].Field2;
              attrValue_788532423 = colontmp__570427644.data[h_570427647].Field3;
              add__OOZsrcZmargraveZelement_u3272(result_788531981, 0);
              if (null != attrName_788532422) { if (null == result_788531981[0]) result_788531981[0] = attrName_788532422; else result_788531981[0] += attrName_788532422; };
              if (!((((attrValue_788532423) == null ? 0 : (attrValue_788532423).length) == 0))) {
              if (null != "=\"") { if (null == result_788531981[0]) result_788531981[0] = "=\""; else result_788531981[0] += "=\""; };
              if (null != attrValue_788532423) { if (null == result_788531981[0]) result_788531981[0] = attrValue_788532423; else result_788531981[0] += attrValue_788532423; };
              if (null != "\"") { if (null == result_788531981[0]) result_788531981[0] = "\""; else result_788531981[0] += "\""; };
              }
              
              }
              
              h_570427647 = nxt_570427649;
            }
        };
        }
        
      };
      if (empty_788531982) {
      add__OOZsrcZmargraveZelement_u3276(result_788531981, 0);
      }
      
      add__OOZsrcZmargraveZelement_u3280(result_788531981, 0);
      }
      
      Label9: {
        var cont_788532455 = null;
        var colontmp__570427651 = [];
        var Temporary10 = elem_p0;
        if (ConstSet126[Temporary10.isText]!==undefined) { raiseFieldError2(makeNimstrLit("field \'content\' is not accessible for type \'MargraveElement\' using \'isText = "), reprDiscriminant(Temporary10.isText, NTI33554466)); }
        colontmp__570427651 = Temporary10.content;
        var i_570427652 = 0;
        var L_570427653 = (colontmp__570427651).length;
        Label11: {
            Label12: while (true) {
            if (!(i_570427652 < L_570427653)) break Label12;
              cont_788532455 = colontmp__570427651[i_570427652];
              if (null != (Temporary13 = toNativeString__OOZsrcZmargraveZelement_u2827(cont_788532455), Temporary13)) { if (null == result_788531981[0]) result_788531981[0] = Temporary13; else result_788531981[0] += Temporary13; };
              i_570427652 += 1;
            }
        };
      };
      if (!(empty_788531982)) {
      if (null != "</") { if (null == result_788531981[0]) result_788531981[0] = "</"; else result_788531981[0] += "</"; };
      if (null != tag_788531983) { if (null == result_788531981[0]) result_788531981[0] = tag_788531983; else result_788531981[0] += tag_788531983; };
      add__OOZsrcZmargraveZelement_u3280(result_788531981, 0);
      }
      
    }
    

  return result_788531981[0];

}

function convertMargrave__converter_u5(text_p0) {
            var Temporary4;

  var result_570425351 = null;

    result_570425351 = "";
    Label1: {
      var elem_570427289 = null;
      var colontmp__570427366 = [];
      colontmp__570427366 = parseMargrave__converter_u8(text_p0, defaultParserOptions_1191182377);
      var i_570427368 = 0;
      var L_570427369 = (colontmp__570427366).length;
      Label2: {
          Label3: while (true) {
          if (!(i_570427368 < L_570427369)) break Label3;
            elem_570427289 = colontmp__570427366[i_570427368];
            if (null != (Temporary4 = toNativeString__OOZsrcZmargraveZelement_u2827(elem_570427289), Temporary4)) { if (null == result_570425351) result_570425351 = Temporary4; else result_570425351 += Temporary4; };
            if (null != "\n") { if (null == result_570425351) result_570425351 = "\n"; else result_570425351 += "\n"; };
            i_570427368 += 1;
          }
      };
    };

  return result_570425351;

}

function convert() {
    var input_570427325 = input__converter_u1946();
    var output_570427326 = convertMargrave__converter_u5(input_570427325);
    document.getElementById("output").innerHTML = output_570427326;

  
}

function convertToSource() {
    var input_570427328 = input__converter_u1946();
    var output_570427329 = convertMargrave__converter_u5(input_570427328);
    var sourceBlock_570427330 = document.createElement("pre");
    sourceBlock_570427330.textContent = output_570427329;
    var outputElement_570427331 = document.getElementById("output");
    outputElement_570427331.innerHTML = "";
    outputElement_570427331.appendChild(sourceBlock_570427330);

  
}

function filename__converter_u1988() {
  var result_570427333 = null;

    result_570427333 = document.getElementById("filename").value || "output.html";

  return result_570427333;

}

function download() {
    var input_570427338 = input__converter_u1946();
    var output_570427339 = convertMargrave__converter_u5(input_570427338);
    var blob_570427346 = new Blob([output_570427339], {type: 'text/html'});
    var url_570427347 = window.URL.createObjectURL(blob_570427346);
    var a_570427348 = document.createElement("a");
    a_570427348.style.display = "none";
    a_570427348.setAttribute("href", url_570427347);
    a_570427348.setAttribute("download", filename__converter_u1988());
    document.body.appendChild(a_570427348);
    a_570427348.click();
    window.URL.revokeObjectURL(url_570427347);
    document.body.removeChild(a_570427348);

  
}
